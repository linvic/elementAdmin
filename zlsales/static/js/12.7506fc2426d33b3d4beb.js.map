{"version":3,"sources":["webpack:///src/pages/Estate/SellingAdd.vue","webpack:///./src/pages/Estate/SellingAdd.vue?c296","webpack:///./src/pages/Estate/SellingAdd.vue","webpack:///src/pages/Estate/Selling.vue","webpack:///./src/pages/Estate/Selling.vue?a72b","webpack:///./src/pages/Estate/Selling.vue"],"names":["SellingAdd","required","message","trigger","Object","this","getProjects","then","$https","spread","acct","perms","setOldData","oldVal","_iteratorNormalCompletion","room","_step2","value","optionalN","selegth","activeN","arrayL","floor_id","_iteratorNormalCompletion3","getBuildings","editObj","project_id","building_id","getList","result","length","_this3","floors","floor_max_room","building_name","active","_iteratorNormalCompletion4","i","_step4","_step6","arrTwo","o","x","c","_iteratorNormalCompletion7","item","_step7","_iteratorNormalCompletion8","_step8","_iteratorNormalCompletion9","_step9","_this4","_this","room_id","open_status","stepOne_form","_rooms","id","closeDialog","Items","val","projects","project_name","Estate_SellingAdd","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","step","isEdit","expression","ref","attrs","model","size","status-icon","rules","stepOne_rules","label-width","label","prop","callback","$$v","$set","_v","disabled","on","change","_l","key","changeBuilding","_e","click","$event","stepOne_next","staticClass","_m","indeterminate","isIndeterminate","handleCheckAllChange","checkAll","colspan","_s","build_name","lists","handleCheckedTrChange","checkedTr","floor_name","list","class","status0","status1","status2","checkedRoom","room_name","guide_price","roomMaxLength","rooms","type","plain","is_sale","isSale","is_reserve","isReserve","is_cancel","isCancel","stepTwo_save","staticRenderFns","staticStyle","color","Selling","__webpack_require__","normalizeComponent","ssrContext","getDataList","pageIndex","pageSize","Total","open_id","open_name","process_type","Estate_Selling","slot","float","onclick","icon","dialogSellingAdd","width","data","tableData","scopedSlots","_u","fn","scope","row","modify_time","See","sellingEdit","current-page","page-sizes","page-size","layout","total","dataTotal","size-change","pageSizeChange","current-change","pageIndexChange","title","visible","append-to-body","update:visible","parentGetDataList","dialogSellingEdit","editObjs","Selling_Component","Selling_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/12.7506fc2426d33b3d4beb.js","sourcesContent":["<template>\r\n    <div>\r\n        <el-form ref=\"stepOne_form\" :model=\"stepOne_form\" size=\"small\" status-icon :rules=\"stepOne_rules\" label-width=\"130px\" v-show=\"step === 0 || isEdit\">\r\n            <el-form-item label=\"放盘名称/批次：\" prop=\"open_name\">\r\n                <el-input v-model=\"stepOne_form.open_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"项目名称：\" prop=\"project_id\">\r\n                <el-select v-model=\"stepOne_form.project_id\" @change=\"getBuildings\" :disabled=\"isEdit\">\r\n                    <el-option v-for=\"item in projects\" :key=\"item.project_id\" :label=\"item.project_name\" :value=\"item.project_id\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"楼宇名称：\" prop=\"building_id\">\r\n                <el-select v-model=\"stepOne_form.building_id\" @change=\"changeBuilding\" :disabled=\"isEdit\">\r\n                    <el-option v-for=\"item in building\" :key=\"item.building_id\" :label=\"item.building_name\" :value=\"item.building_id\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"适用销售流程：\" prop=\"process_type\">\r\n                <el-select v-model=\"stepOne_form.process_type\">\r\n                    <el-option label=\"产业楼销售流程\" value=\"0\"></el-option>\r\n                    <el-option label=\"住宅楼销售流程\" value=\"1\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button @click=\"stepOne_next()\" v-if=\"!isEdit\">下一步</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <div v-show=\"step === 1 || isEdit\">\r\n            <div class=\"selling_rooms\">\r\n                <ul class=\"statusTag\">\r\n                    <li><i class=\"el-icon-web-stop\" style=\"color: #fff;\"></i> 未放盘</li>\r\n                    <li><i class=\"el-icon-web-stop\" style=\"color: #ddd;\"></i> 已放盘</li>\r\n                    <li><i class=\"el-icon-web-stop\" style=\"color: #409EFF;\"></i> 可售</li>\r\n                    <li><i class=\"el-icon-web-stop\" style=\"color: #67c23a;\"></i> 预留</li>\r\n                </ul>\r\n                <div class=\"selling_rooms_list\">\r\n                    <table class=\"selling_table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>\r\n                                    <el-checkbox v-show=\"checkAllIsShow\" :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n                                </th>\r\n                                <th colspan=\"999\">{{build_name}}</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                            <tr v-for=\"lists in roomList\">\r\n                                <td>\r\n                                    <el-checkbox v-model=\"checkedTr\" :label=\"lists.floor_id\" :key=\"lists.floor_id\" name=\"floor\" @change=\"handleCheckedTrChange\">{{lists.floor_name}}</el-checkbox>\r\n                                </td>\r\n\r\n                                <!-- status/* 状态 0-未放盘 1-可售 2-预留 3.disabled-已放盘 */  -->\r\n                                <!-- 渲染数据时，将状态1-可售 2-预留 均标记为 3.disabled  -->\r\n                                <td\r\n                                v-for=\"list in lists.rooms\"\r\n                                :class=\"{'active': list.active === true, 'room': list.open_status !== 3, 'status0': list.open_status === 0, 'status1': list.open_status === 1, 'status2': list.open_status === 2, 'disabled': list.open_status === 3}\"\r\n                                @click=\"checkedRoom(list)\"\r\n                                >\r\n\r\n                                    <p>{{list.room_name}}</p>\r\n                                    <em>￥{{list.guide_price}}</em>\r\n                                </td>\r\n                                <!-- 房间数量不够 空 td 来凑 -->\r\n                                <td v-for=\"list in (roomMaxLength - lists.rooms.length)\"></td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"m-t\">\r\n                <el-button size=\"mini\" type=\"primary\" plain :disabled=\"disabled.is_sale\" @click=\"isSale()\">标记为可售</el-button>\r\n                <el-button size=\"mini\" type=\"success\" plain :disabled=\"disabled.is_reserve\"  @click=\"isReserve()\">标记为预留</el-button>\r\n                <el-button size=\"mini\" type=\"warning\" plain :disabled=\"disabled.is_cancel\"  @click=\"isCancel()\">取消放盘</el-button>\r\n            </div>\r\n            <div class=\"m-t\">\r\n                <el-button type=\"primary\" @click=\"stepTwo_save()\">保存并发布放盘</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        var checkAmount = (rule, value, callback) => {\r\n            setTimeout(() => {\r\n                var isInteger = /^[1-9]\\d*$/;\r\n                if (!isInteger.test(value)) {\r\n                    callback(new Error('请输入正整数'));\r\n                } else {\r\n                    callback();\r\n                }\r\n            },1000);\r\n        };\r\n        return {\r\n            step: 0, // 步骤\r\n            isEdit: false, // 是否编辑模式\r\n            stepOne_form: {\r\n                open_name: '',\r\n                project_id: '',\r\n                project_name: '',\r\n                building_id: '',\r\n                building_name: '',\r\n                process_type: ''\r\n            },\r\n            stepOne_rules: {\r\n                open_name: [\r\n                    { required: true, message: '请填写放盘名称/批次', trigger: 'blur' }\r\n                ],\r\n                project_id: [\r\n                    { required: true, message: '请选择放盘项目', trigger: 'change' }\r\n                ],\r\n                building_id: [\r\n                    { required: true, message: '请选择放盘楼宇', trigger: 'change' }\r\n                ],\r\n                process_type: [\r\n                    { required: true, message: '请选择适用销售流程', trigger: 'change' }\r\n                ]\r\n            },\r\n            checkAll: false, // 全选\r\n            checkAllIsShow: true,\r\n            checkedTr: [], // 已选中的楼层id\r\n            checkedTrAll: [],\r\n            isIndeterminate: false,\r\n            build_name: '',\r\n            roomMaxLength: 0,\r\n            roomSelected: [], // 选中的房间ID\r\n            roomList: [],\r\n            disabled: {\r\n                is_sale: true, // 可售按钮\r\n                is_reserve: true, // 预留按钮\r\n                is_cancel: true // 取消放盘\r\n            },\r\n            projects: [], // 项目\r\n            building: [] // 楼宇列表\r\n        }\r\n    },\r\n    props: {\r\n        editObj: {\r\n            type: Object\r\n        }\r\n        // 这里明天要传 open_id(id)，open_name, project_id，building_id，process_type\r\n    },\r\n    created() {\r\n        let _this = this;\r\n        this.$https.all([\r\n            this.getProjects()\r\n        ]).then(this.$https.spread(function (acct, perms) {\r\n            if (_this.editObj) { // 编辑\r\n                _this.setOldData();\r\n            }\r\n        }))\r\n    },\r\n    watch: {\r\n        checkedTr: function(newVal, oldVal) { // 监听选中层\r\n            // if(newVal.length===0){this.checkAll = false;}\r\n            let c = this.ArrExcept(newVal, oldVal);\r\n            if (newVal.length > oldVal.length) { // 判断数据 新增\r\n                // 选中层 增加，给增加的 层给选中状态 active\r\n                this.checkedTrActive(c, true);\r\n            } else if (newVal.length < oldVal.length){\r\n                // 选中层减少 ， 给减少 的层 取消选中状态 active\r\n                this.checkedTrActive(c, false);\r\n            }\r\n        },\r\n        roomList: {\r\n            handler: function(newVal, oldVal) {\r\n                for (let floor of this.roomList) { // 遍历楼宇\r\n                    let optionalN = 0; // status !== 3 统计可选择的块数量\r\n                    let activeN = 0; // 统计已选中的个数\r\n                    for (let room of floor.rooms) {\r\n\r\n                        if (room.open_status !== 3) {\r\n                            optionalN ++\r\n\r\n                            let selegth = this.roomSelected.length + 1;\r\n                            // 1.判断 val 是否存在选中的数组中\r\n                            let index_of = this.roomSelected.indexOf(room, -selegth);\r\n\r\n                            if (room.active) {\r\n                                activeN ++\r\n\r\n                                if (index_of === -1 ) { \r\n                                    // 已选中的 不存在选中数组中\r\n                                    this.roomSelected.push(room);\r\n                                }\r\n\r\n                            } else {\r\n                                // 未选择的存在数组中，则删\r\n                                if (index_of !== -1 ) { \r\n                                    // 已选中的 不存在选中数组中\r\n                                    this.roomSelected.splice(index_of, 1);\r\n                                }\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    let arrayL = this.checkedTr.length + 1;\r\n                    let arrayIndex = this.checkedTr.indexOf(floor.floor_id, -arrayL );\r\n                    if (optionalN > 0 && optionalN === activeN) {\r\n                        // console.log('当前行全选中')\r\n                        if (arrayIndex === -1 ) {\r\n                            this.checkedTr.push(floor.floor_id)\r\n                        }\r\n                    } else {\r\n                        // console.log('当前行未全选')\r\n                        if (arrayIndex !== -1 ) {\r\n                            this.checkedTr.splice(arrayIndex, 1)\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        roomSelected: function(newVal, oldVal) { // 监听选中层\r\n            if (newVal.length === 0) { // 当前无选中的房间\r\n                this.disabled.is_sale = true;\r\n                this.disabled.is_reserve = true;\r\n                this.disabled.is_cancel = true;\r\n            } else {\r\n                this.disabled.is_sale = false;\r\n                this.disabled.is_reserve = false;\r\n                this.disabled.is_cancel = false;\r\n                for (let room of newVal) { // 遍历房间\r\n                    if (room.open_status === 0) { // 如果有房间的状态为 0 未放盘，那就不能取消放盘\r\n                        this.disabled.is_cancel = true;\r\n                    } else if (room.open_status === 1) { // 如果有房间的状态为1可售，那就不能标记为可售\r\n                        this.disabled.is_sale = true;\r\n                    } else if (room.open_status === 2) { // 如果有房间的状态为2 预留，那就不能标记为预留\r\n                        this.disabled.is_reserve = true;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        checkedTrAll: function(newVal, oldVal) { // 监听选中层\r\n            console.log('all数据变了', newVal, oldVal)\r\n        }\r\n    },\r\n    methods: {\r\n        setOldData() {\r\n            this.stepOne_form.open_name = this.editObj.open_name; // \r\n            this.stepOne_form.project_id = this.editObj.project_id; // \r\n            this.stepOne_form.process_type = this.editObj.process_type.toString(); // \r\n\r\n            \r\n            let _this = this;\r\n            this.$https.all([\r\n                this.getBuildings(this.editObj.project_id)\r\n            ]).then(this.$https.spread(function (acct, perms) {\r\n                _this.stepOne_form.building_id = _this.editObj.building_id;\r\n                _this.changeBuilding(_this.stepOne_form.building_id);\r\n                _this.isEdit = true;\r\n                _this.step = 1;\r\n                _this.getList()\r\n            }))\r\n        },\r\n        stepOne_next() { // 下一步\r\n            this.$refs['stepOne_form'].validate((valid) => {\r\n                if (valid) {\r\n                    // 查询楼盘状态\r\n                    this.$https.get('/api/pms_sale_open/QueryOpenStatus', {\r\n                        params: {\r\n                            building_id: this.stepOne_form.building_id,\r\n                        }\r\n                    }).then((result) => {\r\n                        if (result.data.code == 0) {\r\n                            this.step = 1;\r\n                            this.getList();\r\n                        } else {\r\n                            this.$message({\r\n                                type: 'error',\r\n                                showClose: true,\r\n                                message: result.data.message\r\n                            })\r\n                        }\r\n                    })\r\n                } else {\r\n                    console.error('验证不通过');\r\n                    return false;\r\n                }\r\n            })\r\n        },\r\n        handleCheckAllChange(val) { // 全选\r\n            this.checkedTr = val ? this.checkedTrAll : [];\r\n            this.isIndeterminate = false;\r\n        },\r\n        handleCheckedTrChange(value) { // 单选\r\n            let checkedCount = this.checkedTr.length;\r\n            this.checkAll = checkedCount === this.roomList.length;\r\n            this.isIndeterminate = checkedCount > 0 && checkedCount < this.roomList.length;\r\n        },\r\n        // 获取数据\r\n        getList() {\r\n            console.log('lou',this.stepOne_form.building_id)\r\n            this.$https.get('/api/pms_sale_open/GetOpenDetails', {\r\n                params: {\r\n                    building_id: this.stepOne_form.building_id,\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.roomList = result.data.data.floors;\r\n                    this.roomMaxLength = result.data.data.floor_max_room;\r\n                    this.build_name = result.data.data.building_name;\r\n                    this.checkedTrAll = [];\r\n                    this.roomList.map(item => {\r\n                        this.checkedTrAll.push(item.floor_id);\r\n                        item.rooms.map(items => {\r\n                            this.$set(items, 'active', false);\r\n                            if (this.isEdit) { // 编辑模式\r\n\r\n                            } else { // 新增模式\r\n                                if (items.open_status !== 0) {\r\n                                    items.open_status = 3;\r\n                                }\r\n                            }\r\n                            \r\n                        })\r\n                    })\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        // 选中需要操作的td\r\n        checkedRoom(item) {\r\n            if (item.open_status !== 3) { // 状态不为3 就可以选择\r\n                // 控制 active\r\n                item.active = !item.active;\r\n            }\r\n        },\r\n        checkedTrActive(arr, isChecked) {\r\n            // arr 层\r\n            for (let i of arr) {\r\n                for (let floor of this.roomList) { // 遍历楼宇\r\n                    if (i == floor.floor_id) { // 匹配到变化的层\r\n                        for (let room of floor.rooms) {\r\n\r\n                            if (isChecked) {\r\n                                room.open_status !== 3 ? room.active = true : '';\r\n                            } else {\r\n                                room.open_status !== 3 ? room.active = false : '';\r\n                            }\r\n                            \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        ArrExcept(arrOne, arrTwo) { // 取数组差集\r\n            let c = [];\r\n            let tmp = arrOne.concat(arrTwo);\r\n            let o = {};\r\n            for (let i = 0; i < tmp.length; i ++) {\r\n                (tmp[i] in o) ? o[tmp[i]] ++ : o[tmp[i]] = 1;\r\n            }\r\n            for (let x in o)\r\n                if (o[x] == 1) c.push(x);\r\n            return c;\r\n        },\r\n        isSale() {\r\n            this.checkAllIsShow = false;\r\n            for (let item of this.roomSelected) {\r\n                item.open_status = 1;\r\n                item.active = false;\r\n            }\r\n        },\r\n        isReserve() {\r\n            this.checkAllIsShow = false;\r\n            for (let item of this.roomSelected) {\r\n                item.open_status = 2;\r\n                item.active = false;\r\n            }\r\n        },\r\n        isCancel() {\r\n            this.checkAllIsShow = false;\r\n            for (let item of this.roomSelected) {\r\n                item.open_status = 0;\r\n                item.active = false;\r\n            }\r\n        },\r\n        stepTwo_save() {\r\n            this.$refs['stepOne_form'].validate((valid) => {\r\n                if (valid) {\r\n                    \r\n                    let _rooms = {};\r\n                    let _this = this;\r\n                    this.roomList.map(item => {\r\n                        this.checkedTrAll.push(item.floor_id);\r\n                        item.rooms.map(items => {\r\n                            if (_this.isEdit) { // 编辑\r\n                                let _key = '' + items.room_id;\r\n                                _rooms[_key] = items.open_status;\r\n                            } else { //新增\r\n                                if (items.open_status === 1 || items.open_status === 2) {\r\n                                    let _key = '' + items.room_id;\r\n                                    _rooms[_key] = items.open_status;\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n\r\n                    let _postData = JSON.parse(JSON.stringify(this.stepOne_form));\r\n                    _postData.rooms = _rooms;\r\n                    if (this.isEdit) {\r\n                        _postData.open_id = this.editObj.id;\r\n                    }\r\n                    this.$https.post('/api/pms_sale_open/CommitOpenStatus', _postData).then((result) => {\r\n                        if (result.data.code == 0) {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                showClose: true,\r\n                                message: (this.isEdit ? '放盘修改成功' : '放盘成功'),\r\n                                duration: 1000,\r\n                                onClose: () => {\r\n                                    // 关闭当前dialog，\r\n                                    this.closeDialog();\r\n                                    // 刷新列表\r\n                                    this.$emit('parentGetDataList');\r\n                                }\r\n                            })\r\n                        } else {\r\n                            this.$message({\r\n                                type: 'error',\r\n                                showClose: true,\r\n                                message: result.data.message\r\n                            })\r\n                        }\r\n                    })\r\n                } else {\r\n                    console.error('验证不通过');\r\n                    return false;\r\n                }\r\n            })\r\n        },\r\n        getProjects() { // 获取房产项目\r\n            return this.$https.get('/api/pms_base_projects/GetProjects', {\r\n                params: {\r\n                    page: 1,\r\n                    page_size: 999,\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.projects = result.data.data.Items;\r\n                    console.log('获取了projects')\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        getBuildings(val) { // 获取楼宇\r\n            let obj = this.projects.find((item)=>{\r\n                return item.project_id === val;\r\n            });\r\n            console.log(this.projects)\r\n            this.stepOne_form.project_name = obj.project_name;\r\n\r\n            this.stepOne_form.building_id = ''\r\n            return this.$https.get('/api/pms_base_buildings/GetBuildings', {\r\n                params: {\r\n                    page: 1,\r\n                    page_size: 999,\r\n                    project_id: this.stepOne_form.project_id\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    // 遍历项目\r\n                    this.building = result.data.data.Items;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        changeBuilding(val) {\r\n            let obj = this.building.find((item)=>{\r\n                return item.building_id === val;\r\n            });\r\n            this.stepOne_form.building_name = obj.building_name;\r\n        },\r\n        closeDialog(name) { // 关闭当前\r\n            // this.$refs.form.resetFields(); // 重置表单\r\n            if (!name) {\r\n                this.$emit('closeDialog', 'dialogSellingAdd'); // 执行父组件关闭方法\r\n                this.$emit('closeDialog', 'dialogSellingEdit'); // 执行父组件关闭方法\r\n            } else {\r\n                this.$emit('closeDialog', name); // 执行父组件关闭方法\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .selling_rooms {\r\n        width: 800px;\r\n    }\r\n    .selling_rooms_list {\r\n        padding-bottom: 20px; \r\n        overflow-x: auto;\r\n    }\r\n    .statusTag {\r\n        display: block;\r\n        list-style: none;\r\n        text-align: right;\r\n    }\r\n    .statusTag li {\r\n        display: inline-block;\r\n        margin-left: 5px;\r\n    }\r\n    .statusTag li i {\r\n        border:1px solid #ebeef5;\r\n    }\r\n    .selling_table {\r\n        border-spacing: 0;\r\n        border-collapse: collapse;\r\n        text-align: center;\r\n    }\r\n    .selling_table th {\r\n        text-align: left;\r\n    }\r\n    .selling_table tr td:first-child {\r\n        text-align: left;\r\n        border: none; \r\n    }\r\n    .selling_table th {\r\n        padding: 2px;\r\n        min-width: 80px;\r\n        max-width: 80px;\r\n    }\r\n    .selling_table td {\r\n        border: 1px solid #ebeef5;\r\n        padding: 2px;\r\n        min-width: 80px;\r\n        max-width: 80px;\r\n    }\r\n    .selling_table td.room {\r\n        cursor: pointer;\r\n    }\r\n\r\n    /* 状态 0-未放盘 1-可售 2-预留 disabled-已放盘 */ \r\n    .room.status0 {\r\n        /* 未放盘 */\r\n        background-color: #fff;\r\n        color: #606266;\r\n    }\r\n    .room.status1 {\r\n        /* 可售 */\r\n        background-color: #409EFF;\r\n        color: #fff;\r\n    }\r\n    .room.status2 {\r\n        /* 预留 */\r\n        background-color: #67c23a;\r\n        color: #fff;\r\n    }\r\n    td.disabled {\r\n        /* 已放盘 */\r\n        background-color: #bbb;\r\n        color: #fff;\r\n    }\r\n    .room.active {\r\n        /* 预留 */\r\n        background-color: #FFB840;\r\n        color: #fff;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Estate/SellingAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 0 || _vm.isEdit),expression:\"step === 0 || isEdit\"}],ref:\"stepOne_form\",attrs:{\"model\":_vm.stepOne_form,\"size\":\"small\",\"status-icon\":\"\",\"rules\":_vm.stepOne_rules,\"label-width\":\"130px\"}},[_c('el-form-item',{attrs:{\"label\":\"放盘名称/批次：\",\"prop\":\"open_name\"}},[_c('el-input',{model:{value:(_vm.stepOne_form.open_name),callback:function ($$v) {_vm.$set(_vm.stepOne_form, \"open_name\", $$v)},expression:\"stepOne_form.open_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"项目名称：\",\"prop\":\"project_id\"}},[_c('el-select',{attrs:{\"disabled\":_vm.isEdit},on:{\"change\":_vm.getBuildings},model:{value:(_vm.stepOne_form.project_id),callback:function ($$v) {_vm.$set(_vm.stepOne_form, \"project_id\", $$v)},expression:\"stepOne_form.project_id\"}},_vm._l((_vm.projects),function(item){return _c('el-option',{key:item.project_id,attrs:{\"label\":item.project_name,\"value\":item.project_id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"楼宇名称：\",\"prop\":\"building_id\"}},[_c('el-select',{attrs:{\"disabled\":_vm.isEdit},on:{\"change\":_vm.changeBuilding},model:{value:(_vm.stepOne_form.building_id),callback:function ($$v) {_vm.$set(_vm.stepOne_form, \"building_id\", $$v)},expression:\"stepOne_form.building_id\"}},_vm._l((_vm.building),function(item){return _c('el-option',{key:item.building_id,attrs:{\"label\":item.building_name,\"value\":item.building_id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"适用销售流程：\",\"prop\":\"process_type\"}},[_c('el-select',{model:{value:(_vm.stepOne_form.process_type),callback:function ($$v) {_vm.$set(_vm.stepOne_form, \"process_type\", $$v)},expression:\"stepOne_form.process_type\"}},[_c('el-option',{attrs:{\"label\":\"产业楼销售流程\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"住宅楼销售流程\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[(!_vm.isEdit)?_c('el-button',{on:{\"click\":function($event){_vm.stepOne_next()}}},[_vm._v(\"下一步\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1 || _vm.isEdit),expression:\"step === 1 || isEdit\"}]},[_c('div',{staticClass:\"selling_rooms\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"selling_rooms_list\"},[_c('table',{staticClass:\"selling_table\"},[_c('thead',[_c('tr',[_c('th',[_c('el-checkbox',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.checkAllIsShow),expression:\"checkAllIsShow\"}],attrs:{\"indeterminate\":_vm.isIndeterminate},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\")])],1),_vm._v(\" \"),_c('th',{attrs:{\"colspan\":\"999\"}},[_vm._v(_vm._s(_vm.build_name))])])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.roomList),function(lists){return _c('tr',[_c('td',[_c('el-checkbox',{key:lists.floor_id,attrs:{\"label\":lists.floor_id,\"name\":\"floor\"},on:{\"change\":_vm.handleCheckedTrChange},model:{value:(_vm.checkedTr),callback:function ($$v) {_vm.checkedTr=$$v},expression:\"checkedTr\"}},[_vm._v(_vm._s(lists.floor_name))])],1),_vm._v(\" \"),_vm._l((lists.rooms),function(list){return _c('td',{class:{'active': list.active === true, 'room': list.open_status !== 3, 'status0': list.open_status === 0, 'status1': list.open_status === 1, 'status2': list.open_status === 2, 'disabled': list.open_status === 3},on:{\"click\":function($event){_vm.checkedRoom(list)}}},[_c('p',[_vm._v(_vm._s(list.room_name))]),_vm._v(\" \"),_c('em',[_vm._v(\"￥\"+_vm._s(list.guide_price))])])}),_vm._v(\" \"),_vm._l(((_vm.roomMaxLength - lists.rooms.length)),function(list){return _c('td')})],2)}))])])]),_vm._v(\" \"),_c('div',{staticClass:\"m-t\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\",\"disabled\":_vm.disabled.is_sale},on:{\"click\":function($event){_vm.isSale()}}},[_vm._v(\"标记为可售\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"plain\":\"\",\"disabled\":_vm.disabled.is_reserve},on:{\"click\":function($event){_vm.isReserve()}}},[_vm._v(\"标记为预留\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"plain\":\"\",\"disabled\":_vm.disabled.is_cancel},on:{\"click\":function($event){_vm.isCancel()}}},[_vm._v(\"取消放盘\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"m-t\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.stepTwo_save()}}},[_vm._v(\"保存并发布放盘\")])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"statusTag\"},[_c('li',[_c('i',{staticClass:\"el-icon-web-stop\",staticStyle:{\"color\":\"#fff\"}}),_vm._v(\" 未放盘\")]),_vm._v(\" \"),_c('li',[_c('i',{staticClass:\"el-icon-web-stop\",staticStyle:{\"color\":\"#ddd\"}}),_vm._v(\" 已放盘\")]),_vm._v(\" \"),_c('li',[_c('i',{staticClass:\"el-icon-web-stop\",staticStyle:{\"color\":\"#409EFF\"}}),_vm._v(\" 可售\")]),_vm._v(\" \"),_c('li',[_c('i',{staticClass:\"el-icon-web-stop\",staticStyle:{\"color\":\"#67c23a\"}}),_vm._v(\" 预留\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-bf4892e4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/Estate/SellingAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bf4892e4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./SellingAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./SellingAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./SellingAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bf4892e4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./SellingAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bf4892e4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Estate/SellingAdd.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <el-card>\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>放盘记录</span>\r\n                <el-button-group style=\"float: right;\">\r\n                    <el-button size=\"small\" onclick=\"window.location.reload()\" icon=\"el-icon-refresh\">刷新</el-button>\r\n                    \r\n                    <el-button size=\"small\" type=\"primary\" @click=\"dialogSellingAdd = true\" icon=\"el-icon-circle-plus-outline\">新增</el-button>\r\n                </el-button-group>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\">\r\n                <el-table-column prop=\"open_id\" label=\"ID\" width=\"55\"></el-table-column>\r\n                <el-table-column prop=\"open_name\" label=\"放盘名称/批次\"></el-table-column>\r\n                <el-table-column prop=\"project_name\" label=\"项目名称\"></el-table-column>\r\n                <el-table-column prop=\"building_name\" label=\"楼宇名称\"></el-table-column>\r\n                <el-table-column label=\"适用销售流程\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{(scope.row.process_type === 0 ? '产业楼销售流程' : '住宅楼销售流程')}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"open_area\" label=\"放盘面积(平方米)\"></el-table-column>\r\n                <el-table-column prop=\"created_time\" label=\"创建时间\"></el-table-column>\r\n                <el-table-column label=\"更新时间\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{(scope.row.modify_time === '0001-01-01 00:00:00' ? '' : scope.row.modify_time)}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"success\"\r\n                            @click=\"See(scope.row.open_id)\" plain>查看</el-button>\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"primary\"\r\n                            @click=\"sellingEdit(scope.row)\" plain>修改</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页 -->\r\n            <div class=\"text-center m-t\">\r\n                <el-pagination\r\n                    @size-change=\"pageSizeChange\"\r\n                    @current-change=\"pageIndexChange\"\r\n                    :current-page=\"pageIndex\"\r\n                    :page-sizes=\"[10, 15, 20, 30]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"dataTotal\">\r\n                </el-pagination>\r\n            </div>\r\n        </el-card>\r\n        <el-dialog v-if=\"dialogSellingAdd\" title=\"新增放盘\" :visible.sync=\"dialogSellingAdd\" append-to-body width=\"840px\">\r\n            <SellingAdd @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\"></SellingAdd>\r\n        </el-dialog>\r\n        <el-dialog v-if=\"dialogSellingEdit\" title=\"修改放盘\" :visible.sync=\"dialogSellingEdit\" append-to-body width=\"840px\">\r\n            <SellingAdd @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\" :editObj=\"editObjs\"></SellingAdd>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SellingAdd from './SellingAdd'\r\n\r\nexport default {\r\n    components: {\r\n        SellingAdd\r\n    },\r\n    data () {\r\n        return {\r\n            editObjs: null,\r\n            pageIndex: 1, // 当前页码\r\n            pageSize: 10, // 页码大小\r\n            dataTotal: 0, // 数据总数\r\n            loading: true,\r\n            tableData: [],\r\n            dialogSellingAdd: false, //新增\r\n            dialogSellingEdit: false //新增\r\n        }\r\n    },\r\n    created() {\r\n        this.getDataList()\r\n    },\r\n    watch: {\r\n    },\r\n    methods: {\r\n        closeDialog(name) { // 关闭弹层\r\n            this[name] = false;\r\n        },\r\n        pageSizeChange(val) { // 分页：pageSize改变时\r\n            this.pageSize = val;\r\n            this.getDataList();\r\n        },\r\n        pageIndexChange(val) { // 分页：当前页码改变时\r\n            this.pageIndex = val;\r\n            this.getDataList();\r\n        },\r\n        getDataList(){\r\n\r\n            this.$https.get('/api/pms_sale_open/GetRecords', {\r\n                params: {\r\n                    page: this.pageIndex,\r\n                    page_size: this.pageSize\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.tableData = result.data.data.Items;\r\n                    this.dataTotal = result.data.data.Total;\r\n\r\n                    this.loading = false;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        sellingEdit(obj) {\r\n            this.editObjs = {\r\n                id: obj.open_id,\r\n                open_name: obj.open_name,\r\n                project_id: obj.project_id,\r\n                building_id: obj.building_id,\r\n                process_type: obj.process_type\r\n            };\r\n            this.dialogSellingEdit = true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Estate/Selling.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"放盘记录\")]),_vm._v(\" \"),_c('el-button-group',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"onclick\":\"window.location.reload()\",\"icon\":\"el-icon-refresh\"}},[_vm._v(\"刷新\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){_vm.dialogSellingAdd = true}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"open_id\",\"label\":\"ID\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"open_name\",\"label\":\"放盘名称/批次\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"project_name\",\"label\":\"项目名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"building_name\",\"label\":\"楼宇名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"适用销售流程\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s((scope.row.process_type === 0 ? '产业楼销售流程' : '住宅楼销售流程'))+\"\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"open_area\",\"label\":\"放盘面积(平方米)\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"created_time\",\"label\":\"创建时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"更新时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s((scope.row.modify_time === '0001-01-01 00:00:00' ? '' : scope.row.modify_time))+\"\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){_vm.See(scope.row.open_id)}}},[_vm._v(\"查看\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.sellingEdit(scope.row)}}},[_vm._v(\"修改\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"text-center m-t\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageIndex,\"page-sizes\":[10, 15, 20, 30],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.dataTotal},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageIndexChange}})],1)],1),_vm._v(\" \"),(_vm.dialogSellingAdd)?_c('el-dialog',{attrs:{\"title\":\"新增放盘\",\"visible\":_vm.dialogSellingAdd,\"append-to-body\":\"\",\"width\":\"840px\"},on:{\"update:visible\":function($event){_vm.dialogSellingAdd=$event}}},[_c('SellingAdd',{on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e(),_vm._v(\" \"),(_vm.dialogSellingEdit)?_c('el-dialog',{attrs:{\"title\":\"修改放盘\",\"visible\":_vm.dialogSellingEdit,\"append-to-body\":\"\",\"width\":\"840px\"},on:{\"update:visible\":function($event){_vm.dialogSellingEdit=$event}}},[_c('SellingAdd',{attrs:{\"editObj\":_vm.editObjs},on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-20dd3d4c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/Estate/Selling.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20dd3d4c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./Selling.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Selling.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Selling.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20dd3d4c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./Selling.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-20dd3d4c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Estate/Selling.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}