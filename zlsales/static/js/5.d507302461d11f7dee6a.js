webpackJsonp([5],{"9zkf":function(e,t){},LtDY:function(e,t){},Ovga:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{form:{TypeId:null,ValueName:"",DictsValue:"",SortOrder:null,IsDefault:!1,ValueDesc:""},form_rules:{TypeId:[{required:!0,message:"请选择所属类别",trigger:"change"}],ValueName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],DictsValue:[{required:!0,message:"请输入字典值",trigger:"blur"}],SortOrder:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},optionsValue:[],options:[],optionsProps:{value:"id",label:"text",children:"children"}}},props:{id:{type:Number},pid:{type:[Number,String]}},created:function(){this.getDataTree()},methods:{getDataTree:function(){var e=this;this.$https.get("/api/Dicts/GetTypesTree").then(function(t){0==t.data.code?(e.options=t.data.data,console.log(e.pid),e.pid&&1!=e.pid&&(e.form.TypeId=e.pid,e.optionsValue=e.getTreeDeepArr(e.pid,e.options)),e.id&&e.getOldData()):e.$message({type:"error",showClose:!0,message:t.data.message})})},getOldData:function(){var e=this;this.$https.get("/api/Dicts/GetDictValue?value_id="+this.id).then(function(t){if(0==t.data.code){var a=t.data.data;e.form.TypeId=a.type_id,e.optionsValue=e.getTreeDeepArr(a.type_id,e.options),e.form.ValueName=a.value_name,e.form.DictsValue=a.value_code,e.form.SortOrder=a.sort_order,e.form.IsDefault=1===a.is_default,e.form.ValueDesc=a.value_desc}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={TypeId:e.form.TypeId,ValueName:e.form.ValueName,DictsValue:e.form.DictsValue,SortOrder:e.form.SortOrder,IsDefault:e.form.IsDefault,IsEnabled:!0,IsDeleted:!1,ValueDesc:e.form.ValueDesc};e.id?(a.ValueId=parseInt(e.id),e.$https.post("/api/Dicts/UpdateValues",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogDicEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/Dicts/AppendValues",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogDicAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogDicAdd"),this.$emit("closeDialog","dialogDicEdit"))},cascaderChange:function(e){this.form.TypeId=e[e.length-1]},getTreeDeepArr:function(e,t){var a=[],i=[],s=0;return function t(o,r){for(var l=0;l<o.length;l++){if(s=r,a[r]=o[l].id,o[l].id==e){i=a.slice(0,r+1);break}o[l].children&&(s++,t(o[l].children,s))}return i}(t,s)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{"status-icon":"",rules:e.form_rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"字典所属类别：",prop:"TypeId"}},[a("el-cascader",{attrs:{options:e.options,props:e.optionsProps,"show-all-levels":!1,"change-on-select":"",clearable:""},on:{change:e.cascaderChange},model:{value:e.optionsValue,callback:function(t){e.optionsValue=t},expression:"optionsValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典名称：",prop:"ValueName"}},[a("el-input",{model:{value:e.form.ValueName,callback:function(t){e.$set(e.form,"ValueName",t)},expression:"form.ValueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典值：",prop:"DictsValue"}},[a("el-input",{model:{value:e.form.DictsValue,callback:function(t){e.$set(e.form,"DictsValue",t)},expression:"form.DictsValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"SortOrder"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.SortOrder,callback:function(t){e.$set(e.form,"SortOrder",t)},expression:"form.SortOrder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否默认："}},[a("el-switch",{model:{value:e.form.IsDefault,callback:function(t){e.$set(e.form,"IsDefault",t)},expression:"form.IsDefault"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.ValueDesc,callback:function(t){e.$set(e.form,"ValueDesc",t)},expression:"form.ValueDesc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var o=a("Aizv")(i,s,!1,function(e){a("hhg3")},"data-v-db2c1f46",null).exports,r={data:function(){return{form:{ParentId:0,TypeName:"",TypeCode:"",SortOrder:null,IsEnabled:!0,TypeDesc:""},form_rules:{TypeName:[{required:!0,message:"请输入字典类别名称",trigger:"blur"}],TypeCode:[{required:!0,message:"请输入字典类别编号",trigger:"blur"}],SortOrder:[{required:!0,message:"请输入字典类别排序",trigger:"blur"}]},optionsValue:[],options:[],optionsProps:{value:"id",label:"text",children:"children"}}},props:{id:{type:Number}},created:function(){this.getDataTree()},methods:{getDataTree:function(){var e=this;this.$https.get("/api/Dicts/GetTypesTree?is_enabled=").then(function(t){0==t.data.code?(e.options=t.data.data,e.id&&e.getOldData()):e.$message({type:"error",showClose:!0,message:t.data.message})})},getOldData:function(){var e=this;this.$https.get("/api/Dicts/GetTypesDetail?type_id="+this.id).then(function(t){if(0==t.data.code){var a=t.data.data;e.form.ParentId=a.parent_id,e.optionsValue=e.getTreeDeepArr(a.parent_id,e.options),e.form.TypeName=a.type_name,e.form.TypeCode=a.type_code,e.form.SortOrder=a.sort_order,e.form.IsEnabled=a.is_enabled,e.form.TypeDesc=a.dicts_desc}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={ParentId:e.form.ParentId,TypeName:e.form.TypeName,TypeCode:e.form.TypeCode,SortOrder:e.form.SortOrder,IsEnabled:e.form.IsEnabled,IsDeleted:!1,TypeDesc:e.form.TypeDesc};e.id?(a.TypeId=parseInt(e.id),e.$https.post("/api/Dicts/UpdateTypes",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogDicTypeEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/Dicts/AppendTypes",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogDicTypeAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogDicTypeAdd"),this.$emit("closeDialog","dialogDicTypeEdit"))},cascaderChange:function(e){console.log(e[e.length-1]),this.form.ParentId=e[e.length-1]},getTreeDeepArr:function(e,t){var a=[],i=[],s=0;return function t(o,r){for(var l=0;l<o.length;l++){if(s=r,a[r]=o[l].id,o[l].id==e){i=a.slice(0,r+1);break}o[l].children&&(s++,t(o[l].children,s))}return i}(t,s)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{"status-icon":"",rules:e.form_rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"父级："}},[a("el-cascader",{attrs:{options:e.options,props:e.optionsProps,"show-all-levels":!1,"change-on-select":"",clearable:""},on:{change:e.cascaderChange},model:{value:e.optionsValue,callback:function(t){e.optionsValue=t},expression:"optionsValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典类别名称：",prop:"TypeName"}},[a("el-input",{model:{value:e.form.TypeName,callback:function(t){e.$set(e.form,"TypeName",t)},expression:"form.TypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典类编号：",prop:"TypeCode"}},[a("el-input",{model:{value:e.form.TypeCode,callback:function(t){e.$set(e.form,"TypeCode",t)},expression:"form.TypeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"SortOrder"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.SortOrder,callback:function(t){e.$set(e.form,"SortOrder",t)},expression:"form.SortOrder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有效："}},[a("el-switch",{model:{value:e.form.IsEnabled,callback:function(t){e.$set(e.form,"IsEnabled",t)},expression:"form.IsEnabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.TypeDesc,callback:function(t){e.$set(e.form,"TypeDesc",t)},expression:"form.TypeDesc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n={components:{DicTypeAdd:a("Aizv")(r,l,!1,function(e){a("LtDY")},"data-v-8a63b7ee",null).exports},data:function(){return{editId:null,treeData:[],treeProps:{label:"text",children:"children"},dialogDicTypeAdd:!1,dialogDicTypeEdit:!1}},created:function(){this.getDataList()},watch:{},methods:{getDataList:function(){var e=this;this.$https.get("/api/Dicts/GetTypesTree?is_enabled=").then(function(t){0==t.data.code?e.treeData=t.data.data:e.$message({type:"error",showClose:!0,message:t.data.message})})},dicTypeEdit:function(e){this.editId=Number(e),this.dialogDicTypeEdit=!0},dicTypeDel:function(e){var t=this;this.$confirm("您确定要将删除该字典分类吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$https.post("/api/Dicts/DeleteTypes?type_id="+e).then(function(e){0==e.data.code?t.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){t.getDataList()}}):t.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},closeDialog:function(e){this[e]=!1}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dictype"},[a("el-card",{staticStyle:{"min-width":"900px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典分类")]),e._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogDicTypeAdd=!0}}},[e._v("新增")])],1)],1),e._v(" "),a("table",{staticClass:"el-table el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0",width:"100%"}},[a("thead",{staticClass:"has-gutter"},[a("tr",[a("th",{staticClass:"cell"},[e._v("字典名")]),e._v(" "),a("th",{attrs:{width:"150px"}},[e._v("编号")]),e._v(" "),a("th",{attrs:{width:"50px"}},[e._v("排序")]),e._v(" "),a("th",{attrs:{width:"50px"}},[e._v("有效")]),e._v(" "),a("th",{attrs:{width:"200px"}},[e._v("备注")]),e._v(" "),a("th",{attrs:{width:"200px"}},[e._v("操作")])])])]),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.treeProps,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return a("div",{staticClass:"custom-tree-node"},[a("div",[e._v(e._s(i.label))]),e._v(" "),a("div",[a("div",{staticClass:"custom-tree-node-item",staticStyle:{width:"150px"}},[e._v(e._s(s.value))]),e._v(" "),a("div",{staticClass:"custom-tree-node-item",staticStyle:{width:"50px"}},[e._v(e._s(s.sort))]),e._v(" "),a("div",{staticClass:"custom-tree-node-item",staticStyle:{width:"50px"}},[e._v(e._s("true"===s.attrValue?"是":"否"))]),e._v(" "),a("div",{staticClass:"custom-tree-node-item",staticStyle:{width:"200px"}},[e._v(e._s(s.title))]),e._v(" "),a("div",{staticClass:"custom-tree-node-item",staticStyle:{width:"200px"}},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(t){e.dicTypeEdit(s.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){e.dicTypeDel(s.id)}}},[e._v("删除")])],1)])])}}])})],1),e._v(" "),e.dialogDicTypeAdd?a("el-dialog",{attrs:{title:"新增字典类别",visible:e.dialogDicTypeAdd,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogDicTypeAdd=t}}},[a("DicTypeAdd",{on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogDicTypeEdit?a("el-dialog",{attrs:{title:"编辑字典类别",visible:e.dialogDicTypeEdit,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogDicTypeEdit=t}}},[a("DicTypeAdd",{attrs:{id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e()],1)},staticRenderFns:[]};var c={components:{DicAdd:o,DicType:a("Aizv")(n,d,!1,function(e){a("9zkf")},"data-v-f0ccf6fc",null).exports},data:function(){return{editId:null,filterText:"",dicData:[],treeProps:{label:"text",children:"children"},currentDicTypeTxt:"",currentDicType:1,tableData:[],dialogDicAdd:!1,dialogDicEdit:!1,dialogDicType:!1,pageIndex:1,pageSize:10,dataTotal:0}},created:function(){this.getDataTree(),this.getDataList()},watch:{filterText:function(e){this.pageIndex=1,this.pageSize=10,this.getDataList()}},methods:{getDataTree:function(){var e=this;this.$https.get("/api/Dicts/GetTypesTree").then(function(t){0==t.data.code?e.dicData=t.data.data:e.$message({type:"error",showClose:!0,message:t.data.message})})},getDataList:function(){var e=this;this.$https.get("/api/Dicts/GetValues",{params:{page:this.pageIndex,page_size:this.pageSize,type_id:this.currentDicType,keyword:this.filterText}}).then(function(t){0==t.data.code?(e.tableData=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})})},handleNodeClick:function(e){this.currentDicType=e.id,this.filterText="",this.pageIndex=1,this.pageSize=10,this.currentDicTypeTxt=" - "+e.text,this.getDataList()},closeDialog:function(e){this[e]=!1},dicEdit:function(e){console.log(e),this.editId=Number(e),this.dialogDicEdit=!0},dicDelete:function(e){var t=this;this.$confirm("您确定要将删除该字典吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$https.post("/api/Dicts/DeleteValues?value_id="+e).then(function(e){0==e.data.code?t.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){t.getDataList()}}):t.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典分类")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogDicType=!0}}},[e._v("分类配置")])],1),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.dicData,props:e.treeProps,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),a("el-main",{staticClass:"dicMain"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("字典数据"+e._s(e.currentDicTypeTxt))]),e._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogDicAdd=!0}}},[e._v("新增")])],1)],1),e._v(" "),a("el-input",{staticStyle:{"max-width":"320px"},attrs:{placeholder:"输入关键字进行过滤","suffix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"value_name",label:"字典名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dicts_value",label:"字典值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort_order",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否默认"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1===t.row.is_default?"是":"否"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Value_Desc",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(a){e.dicEdit(t.row.value_id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){e.dicDelete(t.row.value_id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"text-center m-t"},[e.dataTotal>10?a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}}):e._e()],1)],1)],1)],1),e._v(" "),e.dialogDicAdd?a("el-dialog",{attrs:{title:"新增字典数据",visible:e.dialogDicAdd,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogDicAdd=t}}},[a("DicAdd",{attrs:{pid:e.currentDicType},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogDicEdit?a("el-dialog",{attrs:{title:"编辑字典数据",visible:e.dialogDicEdit,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogDicEdit=t}}},[a("DicAdd",{attrs:{id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"字典分类管理",visible:e.dialogDicType,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.dialogDicType=t},close:function(t){e.getDataTree()}}},[a("DicType")],1)],1)},staticRenderFns:[]};var u=a("Aizv")(c,p,!1,function(e){a("enqH")},"data-v-b9cd0af2",null);t.default=u.exports},enqH:function(e,t){},hhg3:function(e,t){}});
//# sourceMappingURL=5.d507302461d11f7dee6a.js.map