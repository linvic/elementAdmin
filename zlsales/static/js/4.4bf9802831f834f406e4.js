webpackJsonp([4],{"/7pb":function(e,t){},"0L6e":function(e,t){},AwZg:function(e,t){},DNG0:function(e,t){},MtFN:function(e,t){},XjpO:function(e,t){},aC5L:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("u6qr"),r=o.n(a),l=o("3SZ7"),i=o.n(l),n={data:function(){return{form:{project_code:"",project_name:"",total_area:"",built_area:"",green_space:"",road_space:"",building_amount:"",charge:"",project_addr:"",dev_company:"",dev_legal:"",dev_contact:"",dev_mobile:"",dev_addr:"",remark:""},form_rules:{project_code:[{required:!0,message:"项目编码不能为空",trigger:"blur"}],project_name:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],building_amount:[{required:!0,message:"楼宇数量不能为空",trigger:"blur"}]}}},props:{id:{type:Number}},created:function(){this.id&&this.getOldData()},methods:{getOldData:function(){var e=this;this.$https.get("/api/pms_base_projects/GetProjectDetail?project_id="+this.id).then(function(t){if(0==t.data.code){var o=t.data.data;e.form.project_code=o.project_code,e.form.project_name=o.project_name,e.form.total_area=0==o.total_area?"":o.total_area,e.form.built_area=0==o.built_area?"":o.built_area,e.form.green_space=0==o.green_space?"":o.green_space,e.form.road_space=0==o.road_space?"":o.road_space,e.form.building_amount=o.building_amount,e.form.charge=o.charge,e.form.project_addr=o.project_addr,e.form.dev_company=o.dev_company,e.form.dev_legal=o.dev_legal,e.form.dev_contact=o.dev_contact,e.form.dev_mobile=o.dev_mobile,e.form.dev_addr=o.dev_addr,e.form.remark=o.remark}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var o=JSON.parse(i()(e.form));o.total_area=""==e.form.total_area?0:e.form.total_area,o.built_area=""==e.form.built_area?0:e.form.built_area,o.green_space=""==e.form.green_space?0:e.form.green_space,o.road_space=""==e.form.road_space?0:e.form.road_space,console.info(o),e.id?(o.project_id=parseInt(e.id),e.$https.post("/api/pms_base_projects/UpdateProject",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogProjectEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/pms_base_projects/AppendProject",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogProjectAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogProjectAdd"),this.$emit("closeDialog","dialogProjectEdit"))}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"100px",size:"small"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"项目编码",prop:"project_code"}},[o("el-input",{model:{value:e.form.project_code,callback:function(t){e.$set(e.form,"project_code",t)},expression:"form.project_code"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"项目名称",prop:"project_name"}},[o("el-input",{model:{value:e.form.project_name,callback:function(t){e.$set(e.form,"project_name",t)},expression:"form.project_name"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"占地面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.total_area,callback:function(t){e.$set(e.form,"total_area",t)},expression:"form.total_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"建筑面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.built_area,callback:function(t){e.$set(e.form,"built_area",t)},expression:"form.built_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"绿地面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.green_space,callback:function(t){e.$set(e.form,"green_space",t)},expression:"form.green_space"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"道路面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.road_space,callback:function(t){e.$set(e.form,"road_space",t)},expression:"form.road_space"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼宇数量",prop:"building_amount"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.building_amount,callback:function(t){e.$set(e.form,"building_amount",t)},expression:"form.building_amount"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"负责人"}},[o("el-input",{model:{value:e.form.charge,callback:function(t){e.$set(e.form,"charge",t)},expression:"form.charge"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"项目地址"}},[o("el-input",{model:{value:e.form.project_addr,callback:function(t){e.$set(e.form,"project_addr",t)},expression:"form.project_addr"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"公司名称"}},[o("el-input",{model:{value:e.form.dev_company,callback:function(t){e.$set(e.form,"dev_company",t)},expression:"form.dev_company"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"法人代表"}},[o("el-input",{model:{value:e.form.dev_legal,callback:function(t){e.$set(e.form,"dev_legal",t)},expression:"form.dev_legal"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"联系人"}},[o("el-input",{model:{value:e.form.dev_contact,callback:function(t){e.$set(e.form,"dev_contact",t)},expression:"form.dev_contact"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"联系电话"}},[o("el-input",{model:{value:e.form.dev_mobile,callback:function(t){e.$set(e.form,"dev_mobile",t)},expression:"form.dev_mobile"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"联系地址"}},[o("el-input",{model:{value:e.form.dev_addr,callback:function(t){e.$set(e.form,"dev_addr",t)},expression:"form.dev_addr"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var m=o("Aizv")(n,s,!1,function(e){o("AwZg")},"data-v-60def82f",null).exports,c={data:function(){return{form:{building_code:"",building_name:"",building_alias_name:"",floor_amount:"",building_function:"",building_structure:"",building_decoration:"",building_damage:"",building_area:"",public_area:"",usable_area:"",building_permit:"",presale_permit:"",completion:"",capped:"",remark:""},form_rules:{building_code:[{required:!0,message:"楼宇编码不能为空",trigger:"blur"}],building_name:[{required:!0,message:"楼宇证件名称不能为空",trigger:"blur"}],building_alias_name:[{required:!0,message:"楼宇运营名称不能为空",trigger:"blur"}],floor_amount:[{required:!0,message:"楼层数量不能为空",trigger:"blur"}]},building_function:[],building_structure:[],building_decoration:[],building_damage:[]}},props:{id:{type:Number},project_id:{type:Number}},created:function(){var e=this;this.$https.all([this.getDic("pms_type_buildingfeature","building_function"),this.getDic("pms_type_structure","building_structure"),this.getDic("pms_type_decoration","building_decoration"),this.getDic("pms_type_damage","building_damage")]).then(this.$https.spread(function(t,o){e.id&&e.getOldData()}))},methods:{getOldData:function(){var e=this;this.$https.get("/api/pms_base_buildings/GetBuildingDetail?building_id="+this.id).then(function(t){if(0==t.data.code){var o=t.data.data;e.form.building_code=o.building_code,e.form.building_name=o.building_name,e.form.building_alias_name=o.building_alias_name,e.form.floor_amount=o.floor_amount,e.form.building_function=0==o.building_function?"":o.building_function,e.form.building_structure=0==o.building_structure?"":o.building_structure,e.form.building_decoration=0==o.building_decoration?"":o.building_decoration,e.form.building_damage=0==o.building_damage?"":o.building_damage,e.form.building_area=0==o.building_area?"":o.building_area,e.form.public_area=0==o.public_area?"":o.public_area,e.form.usable_area=0==o.usable_area?"":o.usable_area,e.form.building_permit=o.building_permit,e.form.presale_permit=o.presale_permit,e.form.completion=o.completion,e.form.capped=o.capped,e.form.remark=o.remark}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var o=JSON.parse(i()(e.form));o.project_id=e.project_id,o.building_function=""==e.form.building_function?0:e.form.building_function,o.building_structure=""==e.form.building_structure?0:e.form.building_structure,o.building_decoration=""==e.form.building_decoration?0:e.form.building_decoration,o.building_damage=""==e.form.building_damage?0:e.form.building_damage,o.building_area=""==e.form.building_area?0:e.form.building_area,o.public_area=""==e.form.public_area?0:e.form.public_area,o.usable_area=""==e.form.usable_area?0:e.form.usable_area,o.floor_amount=parseInt(o.floor_amount),e.id?(o.building_id=parseInt(e.id),e.$https.post("/api/pms_base_buildings/ModifyBuilding",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogBuildingEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/pms_base_buildings/InsertBuilding",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogBuildingAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var o=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?o[t]=e.data.data:o.$message({type:"error",showClose:!0,message:e.data.message})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogBuildingAdd"),this.$emit("closeDialog","dialogBuildingEdit"))}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"120px",size:"small"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼宇编码",prop:"building_code"}},[o("el-input",{model:{value:e.form.building_code,callback:function(t){e.$set(e.form,"building_code",t)},expression:"form.building_code"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼宇证件名称",prop:"building_name"}},[o("el-input",{on:{input:function(t){e.form.building_alias_name=e.form.building_name}},model:{value:e.form.building_name,callback:function(t){e.$set(e.form,"building_name",t)},expression:"form.building_name"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼宇运营名称",prop:"building_alias_name"}},[o("el-input",{model:{value:e.form.building_alias_name,callback:function(t){e.$set(e.form,"building_alias_name",t)},expression:"form.building_alias_name"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼层数量",prop:"floor_amount"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.floor_amount,callback:function(t){e.$set(e.form,"floor_amount",t)},expression:"form.floor_amount"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"建筑面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.building_area,callback:function(t){e.$set(e.form,"building_area",t)},expression:"form.building_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"公摊面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.public_area,callback:function(t){e.$set(e.form,"public_area",t)},expression:"form.public_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"使用面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.usable_area,callback:function(t){e.$set(e.form,"usable_area",t)},expression:"form.usable_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼宇功能"}},[o("el-select",{model:{value:e.form.building_function,callback:function(t){e.$set(e.form,"building_function",t)},expression:"form.building_function"}},e._l(e.building_function,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"结构类别"}},[o("el-select",{model:{value:e.form.building_structure,callback:function(t){e.$set(e.form,"building_structure",t)},expression:"form.building_structure"}},e._l(e.building_structure,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"装修标准"}},[o("el-select",{model:{value:e.form.building_decoration,callback:function(t){e.$set(e.form,"building_decoration",t)},expression:"form.building_decoration"}},e._l(e.building_decoration,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"完损等级"}},[o("el-select",{model:{value:e.form.building_damage,callback:function(t){e.$set(e.form,"building_damage",t)},expression:"form.building_damage"}},e._l(e.building_damage,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"竣工日期"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.completion,callback:function(t){e.$set(e.form,"completion",t)},expression:"form.completion"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"预售许可证日期"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.capped,callback:function(t){e.$set(e.form,"capped",t)},expression:"form.capped"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"建筑许可证"}},[o("el-input",{model:{value:e.form.building_permit,callback:function(t){e.$set(e.form,"building_permit",t)},expression:"form.building_permit"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"预售许可证"}},[o("el-input",{model:{value:e.form.presale_permit,callback:function(t){e.$set(e.form,"presale_permit",t)},expression:"form.presale_permit"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var u=o("Aizv")(c,d,!1,function(e){o("0L6e")},"data-v-0dae2e66",null).exports,p={data:function(){return{form:{floor_code:"",floor_name:"",floor_start:"",floor_end:"",room_start:"",room_end:"",remark:""},form_rules:{floor_code:[{required:!0,message:"楼层编码不能为空",trigger:"blur"}],floor_name:[{required:!0,message:"楼层名称不能为空",trigger:"blur"}]}}},props:{id:{type:Number},project_id:{type:Number},building_id:{type:Number}},created:function(){this.id&&this.getOldData()},methods:{getOldData:function(){var e=this;this.$https.get("/api/pms_base_floors/GetFloorDetail?floor_id="+this.id).then(function(t){if(0==t.data.code){var o=t.data.data;e.form.floor_code=o.floor_code,e.form.floor_name=o.floor_name,e.form.floor_start=o.floor_start,e.form.floor_end=o.floor_end,e.form.room_start=o.room_start,e.form.room_end=o.room_end,e.form.remark=o.remark}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var o=JSON.parse(i()(e.form));o.project_id=e.project_id,o.building_id=e.building_id,o.floor_start=""==e.form.floor_start?1:e.form.floor_start,o.floor_end=""==e.form.floor_end?1:e.form.floor_end,o.room_start=""==e.form.room_start?1:e.form.room_start,o.room_end=""==e.form.room_end?1:e.form.room_end,e.id?(o.floor_id=parseInt(e.id),e.$https.post("/api/pms_base_floors/ModifyFloor",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogFloorEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/pms_base_floors/InsertFloor",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogFloorAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogFloorAdd"),this.$emit("closeDialog","dialogFloorEdit"))}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"100px",size:"small"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼层编码",prop:"floor_code"}},[o("el-input",{model:{value:e.form.floor_code,callback:function(t){e.$set(e.form,"floor_code",t)},expression:"form.floor_code"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼层名称",prop:"floor_name"}},[o("el-input",{model:{value:e.form.floor_name,callback:function(t){e.$set(e.form,"floor_name",t)},expression:"form.floor_name"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"开始楼层"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.floor_start,callback:function(t){e.$set(e.form,"floor_start",t)},expression:"form.floor_start"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"结束楼层"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.floor_end,callback:function(t){e.$set(e.form,"floor_end",t)},expression:"form.floor_end"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"开始房号"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.room_start,callback:function(t){e.$set(e.form,"room_start",t)},expression:"form.room_start"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"结束房号"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.room_end,callback:function(t){e.$set(e.form,"room_end",t)},expression:"form.room_end"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var f=o("Aizv")(p,_,!1,function(e){o("DNG0")},"data-v-d6510d16",null).exports,g={data:function(){return{form:{room_code:"",room_name:"",room_feature:"",room_decoration:"",room_unit:"",room_toward:"",built_area:"",usable_area:"",garage_area:"",num_floor:"",guide_price:"",is_sold:!1,room_length:"",room_width:"",location:"",space_usage:"",property_type:"",room_nature:"",remark:""},form_rules:{room_code:[{required:!0,message:"房间编码不能为空",trigger:"blur"}],room_name:[{required:!0,message:"房间名称不能为空",trigger:"blur"}],room_feature:[{required:!0,message:"房间功能不能为空",trigger:"change"}],built_area:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}],num_floor:[{required:!0,message:"楼层数不能为空",trigger:"blur"},{validator:function(e,t,o){t>255||t<0?o(new Error("楼层数不能大于255")):o()},trigger:"blur"}],guide_price:[{required:!0,message:"指导单价不能为空",trigger:"blur"}]},room_feature:[],room_decoration:[],room_unit:[],room_toward:[],location:[],space_usage:[],property_type:[],room_nature:[]}},props:{id:{type:Number},project_id:{type:Number},building_id:{type:Number},floor_id:{type:Number},all_name:{type:String}},created:function(){console.log(this.all_name);var e=this;this.$https.all([this.getDic("pms_type_roomfunc","room_feature"),this.getDic("pms_type_decoration","room_decoration"),this.getDic("pms_type_unit","room_unit"),this.getDic("pms_type_direction","room_toward"),this.getDic("pms_type_region","location"),this.getDic("pms_type_usage","space_usage"),this.getDic("pms_type_property","property_type"),this.getDic("pms_type_roomprop","room_nature")]).then(this.$https.spread(function(t,o){e.id&&e.getOldData()}))},methods:{getOldData:function(){var e=this;this.$https.get("/api/pms_base_rooms/GetRoomDetail?room_id="+this.id).then(function(t){if(0==t.data.code){var o=t.data.data;e.form.room_code=o.room_code,e.form.room_name=o.room_name,e.form.room_feature=0==o.room_feature?"":o.room_feature,e.form.room_decoration=0==o.room_decoration?"":o.room_decoration,e.form.room_unit=0==o.room_unit?"":o.room_unit,e.form.room_toward=0==o.room_toward?"":o.room_toward,e.form.built_area=0==o.built_area?"":o.built_area,e.form.usable_area=0==o.usable_area?"":o.usable_area,e.form.garage_area=0==o.garage_area?"":o.garage_area,e.form.num_floor=o.num_floor,e.form.is_sold=o.is_sold,e.form.room_length=0==o.room_length?"":o.room_length,e.form.room_width=0==o.room_width?"":o.room_width,e.form.location=0==o.location?"":o.location,e.form.space_usage=0==o.space_usage?"":o.space_usage,e.form.property_type=0==o.property_type?"":o.property_type,e.form.room_nature=0==o.room_nature?"":o.room_nature,e.form.guide_price=o.guide_price,e.form.remark=o.remark}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var o=JSON.parse(i()(e.form));o.project_id=e.project_id,o.building_id=e.building_id,o.floor_id=e.floor_id,o.parking_area=0,o.full_name=e.all_name+e.form.room_name,o.room_feature=""==e.form.room_feature?0:e.form.room_feature,o.room_decoration=""==e.form.room_decoration?0:e.form.room_decoration,o.room_unit=""==e.form.room_unit?0:e.form.room_unit,o.room_toward=""==e.form.room_toward?0:e.form.room_toward,o.built_area=""==e.form.built_area?0:e.form.built_area,o.usable_area=""==e.form.usable_area?0:e.form.usable_area,o.garage_area=""==e.form.garage_area?0:e.form.garage_area,o.room_length=""==e.form.room_length?0:e.form.room_length,o.room_width=""==e.form.room_width?0:e.form.room_width,o.location=""==e.form.location?0:e.form.location,o.space_usage=""==e.form.space_usage?0:e.form.space_usage,o.property_type=""==e.form.property_type?0:e.form.property_type,o.room_nature=""==e.form.room_nature?0:e.form.room_nature,e.id?(o.room_id=parseInt(e.id),e.$https.post("/api/pms_base_rooms/ModifyRoom",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogRoomEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/pms_base_rooms/InsertRoom",o).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogRoomAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var o=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?o[t]=e.data.data:o.$message({type:"error",showClose:!0,message:e.data.message})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogRoomAdd"),this.$emit("closeDialog","dialogRoomEdit"))}}},b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"120px",size:"small"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"房间编码",prop:"room_code"}},[o("el-input",{model:{value:e.form.room_code,callback:function(t){e.$set(e.form,"room_code",t)},expression:"form.room_code"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"房间名称",prop:"room_name"}},[o("el-input",{model:{value:e.form.room_name,callback:function(t){e.$set(e.form,"room_name",t)},expression:"form.room_name"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"楼层数",prop:"num_floor"}},[o("el-input",{attrs:{placeholder:"正整数"},nativeOn:{keyup:function(t){e.onkeyupPlusInt(t)}},model:{value:e.form.num_floor,callback:function(t){e.$set(e.form,"num_floor",t)},expression:"form.num_floor"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"房间功能"}},[o("el-select",{model:{value:e.form.room_feature,callback:function(t){e.$set(e.form,"room_feature",t)},expression:"form.room_feature"}},e._l(e.room_feature,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"装修"}},[o("el-select",{model:{value:e.form.room_decoration,callback:function(t){e.$set(e.form,"room_decoration",t)},expression:"form.room_decoration"}},e._l(e.room_decoration,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"户型"}},[o("el-select",{model:{value:e.form.room_unit,callback:function(t){e.$set(e.form,"room_unit",t)},expression:"form.room_unit"}},e._l(e.room_unit,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"朝向"}},[o("el-select",{model:{value:e.form.room_toward,callback:function(t){e.$set(e.form,"room_toward",t)},expression:"form.room_toward"}},e._l(e.room_toward,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"建筑面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.built_area,callback:function(t){e.$set(e.form,"built_area",t)},expression:"form.built_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"使用面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.usable_area,callback:function(t){e.$set(e.form,"usable_area",t)},expression:"form.usable_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"指导单价",prop:"guide_price"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.guide_price,callback:function(t){e.$set(e.form,"guide_price",t)},expression:"form.guide_price"}},[o("template",{slot:"append"},[e._v("元/平米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"车库面积"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.garage_area,callback:function(t){e.$set(e.form,"garage_area",t)},expression:"form.garage_area"}},[o("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"长度"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.room_length,callback:function(t){e.$set(e.form,"room_length",t)},expression:"form.room_length"}},[o("template",{slot:"append"},[e._v("米")])],2)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"宽度"}},[o("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.room_width,callback:function(t){e.$set(e.form,"room_width",t)},expression:"form.room_width"}},[o("template",{slot:"append"},[e._v("米")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"区域"}},[o("el-select",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}},e._l(e.location,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"用途"}},[o("el-select",{model:{value:e.form.space_usage,callback:function(t){e.$set(e.form,"space_usage",t)},expression:"form.space_usage"}},e._l(e.space_usage,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"物业类型"}},[o("el-select",{model:{value:e.form.property_type,callback:function(t){e.$set(e.form,"property_type",t)},expression:"form.property_type"}},e._l(e.property_type,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"房间性质"}},[o("el-select",{model:{value:e.form.room_nature,callback:function(t){e.$set(e.form,"room_nature",t)},expression:"form.room_nature"}},e._l(e.room_nature,function(e){return o("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"销售状态"}},[o("el-switch",{attrs:{"active-text":"已售"},model:{value:e.form.is_sold,callback:function(t){e.$set(e.form,"is_sold",t)},expression:"form.is_sold"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var v={data:function(){return{fileList:[],acceptTypes:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"]}},created:function(){},methods:{beforeUpload:function(e){return console.log("type",e.type),this.acceptTypes.includes(e.type)?e.size/1024/1024<1?e:(this.$notify.info({title:e.name,message:"单张图片不得大于 1 MB 的限制"}),!1):(this.$notify.info({title:e.name,message:"只能上传 xlsx / csv 格式的文件"}),!1)},handleChange:function(e,t){console.log(e)},onSuccess:function(e,t,o){0===e.code?this.$message({type:"success",showClose:!0,message:"导入成功，您可返还列表刷新页面查看，也可继续导入",duration:2500,onClose:function(){}}):this.$message({type:"error",showClose:!0,duration:2500,message:e.message})},onError:function(e,t,o){this.$message({type:"error",showClose:!0,duration:2500,message:e.message})}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",{attrs:{drag:"",action:this.$https.defaults.baseURL+"/api/pms_base_rooms/ImportRooms",accept:e.acceptTypes.join(","),"before-upload":e.beforeUpload,"with-credentials":"","on-change":e.handleChange,"on-success":e.onSuccess,"on-error":e.onError,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),o("em",[e._v("点击上传")])]),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx,csv文件，且不超过1MB")])])],1)},staticRenderFns:[]};var y={components:{Project:m,Building:u,Floor:f,Room:o("Aizv")(g,b,!1,function(e){o("MtFN")},"data-v-30d79067",null).exports,ImportRooms:o("Aizv")(v,h,!1,function(e){o("/7pb")},"data-v-e66404d6",null).exports},data:function(){return{editId:null,pageIndex:1,pageSize:10,dataTotal:0,tabPosition:"1",project_id:0,project_name:"",building_id:0,building_name:"",floor_id:0,floor_name:"",dialogProject:!1,ProjectTable:[],BuildingTable:[],FloorTable:[],RoomTable:[],room_feature:[],room_unit:[],room_toward:[],room_decoration:[],property_type:[],dialogProjectAdd:!1,dialogProjectEdit:!1,dialogBuildingAdd:!1,dialogBuildingEdit:!1,dialogFloorAdd:!1,dialogFloorEdit:!1,dialogRoomAdd:!1,dialogRoomEdit:!1,dialogImportRooms:!1}},created:function(){this.getDic("pms_type_roomfunc","room_feature"),this.getDic("pms_type_unit","room_unit"),this.getDic("pms_type_direction","room_toward"),this.getDic("pms_type_decoration","room_decoration"),this.getDic("pms_type_property","property_type"),this.getDataList()},watch:{},methods:{pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()},closeDialog:function(e){this[e]=!1},toBuilding:function(e){this.tabPosition="2",this.pageIndex=1,this.project_id=e.project_id,this.project_name=e.project_name,this.getDataList()},toFloor:function(e){this.tabPosition="3",this.pageIndex=1,this.building_id=e.building_id,this.building_name=e.building_name,this.getDataList()},toRoom:function(e){this.tabPosition="4",this.dataTotal=0,this.pageIndex=1,this.floor_id=e.floor_id,this.floor_name=e.floor_name,this.getDataList()},getDic:function(e,t){var o=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?o[t]=e.data.data:o.$message({type:"error",showClose:!0,message:e.data.message})})},getDicVal:function(e,t){var o="",a=!0,l=!1,i=void 0;try{for(var n,s=r()(this[t]);!(a=(n=s.next()).done);a=!0){var m=n.value;e==m.value_id&&(o=m.value_name)}}catch(e){l=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw i}}return o},getDataList:function(){var e=this;switch(this.tabPosition){case"2":this.$https.get("/api/pms_base_buildings/GetBuildings",{params:{page:this.pageIndex,page_size:this.pageSize,project_id:this.project_id}}).then(function(t){0==t.data.code?(e.BuildingTable=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})});break;case"3":this.$https.get("/api/pms_base_floors/GetFloors",{params:{page:this.pageIndex,page_size:this.pageSize,building_id:this.building_id}}).then(function(t){0==t.data.code?(e.FloorTable=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})});break;case"4":this.$https.get("/api/pms_base_rooms/GetRooms",{params:{page:this.pageIndex,page_size:this.pageSize,floor_id:this.floor_id}}).then(function(t){0==t.data.code?(e.RoomTable=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})});break;default:this.$https.get("/api/pms_base_projects/GetProjects",{params:{page:this.pageIndex,page_size:this.pageSize}}).then(function(t){0==t.data.code?(e.ProjectTable=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})})}},projectEdit:function(e){this.editId=Number(e),this.dialogProjectEdit=!0},buildingEdit:function(e){this.editId=Number(e),this.dialogBuildingEdit=!0},floorEdit:function(e){this.editId=Number(e),this.dialogFloorEdit=!0},roomEdit:function(e){this.editId=Number(e),this.dialogRoomEdit=!0},projectDel:function(e){var t=this;this.$confirm("您确定要将删除该项目吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$https.post("/api/pms_base_projects/BatchDelete",{project_id:[e]}).then(function(e){0==e.data.code?t.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){t.getDataList()}}):t.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},buildingDel:function(e,t){var o=this;this.$confirm("您确定要将删除该楼宇吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$https.post("/api/pms_base_buildings/BatchDelete",{project_id:e,building_id:[t]}).then(function(e){0==e.data.code?o.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){o.getDataList()}}):o.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},floorDel:function(e,t){var o=this;this.$confirm("您确定要将删除该楼层吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$https.post("/api/pms_base_floors/BatchDelete",{building_id:e,floor_id:[t]}).then(function(e){0==e.data.code?o.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){o.getDataList()}}):o.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},roomDel:function(e,t){var o=this;this.$confirm("您确定要将删除该房间吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$https.post("/api/pms_base_rooms/BatchDelete",{floor_id:e,room_id:[t]}).then(function(e){0==e.data.code?o.$message({type:"success",showClose:!0,message:"删除成功",duration:1500,onClose:function(){o.getDataList()}}):o.$message({type:"error",showClose:!0,message:e.data.message})})}).catch(function(){})},positionBack:function(e){this.tabPosition=""+e,this.pageIndex=1,this.getDataList(),1===e?(this.project_id=0,this.project_name="",this.building_id=0,this.building_name="",this.floor_id=0,this.floor_name=""):2===e?(this.building_id=0,this.building_name="",this.floor_id=0,this.floor_name=""):3===e&&(this.floor_id=0,this.floor_name="")},ImportRooms:function(){this.dialogImportRooms=!0},showTip:function(){this.$alert("导入三部曲：<br>1、创建好项目，楼宇、楼层 <br>2、下载导入模版 （必填项为：选择楼层数、房间编码、房间名称、指导单价）<br>3、导入制作好的模版后核对数据","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"知道了",callback:function(e){}})}},computed:{}},k={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("房产档案信息管理")])]),e._v(" "),o("el-tabs",{attrs:{type:"border-card"},model:{value:e.tabPosition,callback:function(t){e.tabPosition=t},expression:"tabPosition"}},[o("el-tab-pane",{attrs:{label:"项目信息",name:"1",disabled:""}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-button-group",{staticStyle:{float:"right"}},[o("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogProjectAdd=!0}}},[e._v("新增项目")])],1)],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ProjectTable}},[o("el-table-column",{attrs:{prop:"project_id",label:"ID"}}),e._v(" "),o("el-table-column",{attrs:{prop:"project_code",label:"项目编码"}}),e._v(" "),o("el-table-column",{attrs:{prop:"project_name",label:"项目名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"project_addr",label:"地址"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(o){e.toBuilding(t.row)}}},[e._v("查看楼宇")]),e._v(" "),o("el-button",{attrs:{size:"mini",plain:""},on:{click:function(o){e.projectEdit(t.row.project_id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(o){e.projectDel(t.row.project_id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"楼宇信息",name:"2",disabled:""}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-breadcrumb",{staticStyle:{"line-height":"32px"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(1)}}},[e._v(e._s(e.project_name))]),e._v(" "),o("el-breadcrumb-item")],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button-group",{staticStyle:{float:"right"}},[o("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogBuildingAdd=!0}}},[e._v("新增楼宇")])],1)],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.BuildingTable}},[o("el-table-column",{attrs:{prop:"building_id",label:"ID"}}),e._v(" "),o("el-table-column",{attrs:{prop:"building_code",label:"楼宇编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"building_name",label:"楼宇证件名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"building_area",label:"建筑面积(平米)"}}),e._v(" "),o("el-table-column",{attrs:{prop:"usable_area",label:"使用面积(平米)"}}),e._v(" "),o("el-table-column",{attrs:{prop:"floor_amount",label:"楼层数量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"capped",label:"预售许可证日期"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(o){e.toFloor(t.row)}}},[e._v("查看楼层")]),e._v(" "),o("el-button",{attrs:{size:"mini",plain:""},on:{click:function(o){e.buildingEdit(t.row.building_id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(o){e.buildingDel(t.row.project_id,t.row.building_id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"楼层信息",name:"3",disabled:""}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-breadcrumb",{staticStyle:{"line-height":"32px"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(1)}}},[e._v(e._s(e.project_name))]),e._v(" "),o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(2)}}},[e._v(e._s(e.building_name))]),e._v(" "),o("el-breadcrumb-item")],1)],1),e._v(" "),o("el-col",{staticClass:"text-right",attrs:{span:12}},[o("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer","vertical-align":"bottom","margin-right":"10px",color:"#409EFF"},on:{click:function(t){e.showTip()}}}),e._v(" "),o("el-button-group",{staticStyle:{float:"right"}},[o("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogFloorAdd=!0}}},[e._v("新增楼层")])],1),e._v(" "),o("el-button-group",{staticStyle:{float:"right","margin-right":"10px"}},[o("a",{staticClass:"el-button el-button--success el-button--small",attrs:{href:this.$https.defaults.baseURL+"/api/pms_base_rooms/ExportTemplate?building_id="+this.building_id,target:"_blank"}},[o("i",{staticClass:"el-icon-web-download"}),e._v(" 下载导入模板")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-web-upload",size:"small"},on:{click:function(t){e.ImportRooms()}}},[e._v("导入房间")])],1)],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.FloorTable}},[o("el-table-column",{attrs:{prop:"floor_id",label:"ID"}}),e._v(" "),o("el-table-column",{attrs:{prop:"floor_code",label:"楼层编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"floor_name",label:"楼层名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"floor_start",label:"开始楼层"}}),e._v(" "),o("el-table-column",{attrs:{prop:"floor_end",label:"结束楼层"}}),e._v(" "),o("el-table-column",{attrs:{prop:"room_start",label:"开始房号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"room_end",label:"结束房号"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(o){e.toRoom(t.row)}}},[e._v("查看房间")]),e._v(" "),o("el-button",{attrs:{size:"mini",plain:""},on:{click:function(o){e.floorEdit(t.row.floor_id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(o){e.floorDel(t.row.building_id,t.row.floor_id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"房间信息",name:"4",disabled:""}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-breadcrumb",{staticStyle:{"line-height":"32px"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(1)}}},[e._v(e._s(e.project_name))]),e._v(" "),o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(2)}}},[e._v(e._s(e.building_name))]),e._v(" "),o("el-breadcrumb-item",{nativeOn:{click:function(t){e.positionBack(3)}}},[e._v(e._s(e.floor_name))]),e._v(" "),o("el-breadcrumb-item")],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button-group",{staticStyle:{float:"right"}},[o("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogRoomAdd=!0}}},[e._v("新增房间")])],1)],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.RoomTable}},[o("el-table-column",{attrs:{prop:"room_id",label:"ID",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{prop:"room_code",label:"房间编号",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{prop:"room_name",label:"房间名称",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{label:"房间功能"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.getDicVal(t.row.room_feature,"room_feature")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"户型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.getDicVal(t.row.room_unit,"room_unit")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"朝向"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.getDicVal(t.row.room_toward,"room_toward")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"装修"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.getDicVal(t.row.room_decoration,"room_decoration")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"物业类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.getDicVal(t.row.property_type,"property_type")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"built_area",label:"建筑面积(平米)"}}),e._v(" "),o("el-table-column",{attrs:{prop:"usable_area",label:"使用面积(平米)"}}),e._v(" "),o("el-table-column",{attrs:{prop:"is_sold",label:"销售状态"}}),e._v(" "),o("el-table-column",{attrs:{prop:"is_rented",label:"使用状态"}}),e._v(" "),o("el-table-column",{attrs:{prop:"guide_price",label:"指导单价(元/平米)"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",plain:""},on:{click:function(o){e.roomEdit(t.row.room_id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(o){e.roomDel(t.row.floor_id,t.row.room_id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("div",{staticClass:"text-center m-t"},[e.dataTotal>10?o("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}}):e._e()],1)],1)],1),e._v(" "),e.dialogProjectAdd?o("el-dialog",{attrs:{title:"新增房产项目",visible:e.dialogProjectAdd,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogProjectAdd=t}}},[o("Project",{on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogProjectEdit?o("el-dialog",{attrs:{title:"编辑房产项目",visible:e.dialogProjectEdit,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogProjectEdit=t}}},[o("Project",{attrs:{id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogBuildingAdd?o("el-dialog",{attrs:{title:"新增楼宇",visible:e.dialogBuildingAdd,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogBuildingAdd=t}}},[o("Building",{attrs:{project_id:e.project_id},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogBuildingEdit?o("el-dialog",{attrs:{title:"编辑楼宇",visible:e.dialogBuildingEdit,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogBuildingEdit=t}}},[o("Building",{attrs:{project_id:e.project_id,id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogFloorAdd?o("el-dialog",{attrs:{title:"新增楼层",visible:e.dialogFloorAdd,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogFloorAdd=t}}},[o("Floor",{attrs:{project_id:e.project_id,building_id:e.building_id},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogFloorEdit?o("el-dialog",{attrs:{title:"编辑楼层",visible:e.dialogFloorEdit,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogFloorEdit=t}}},[o("Floor",{attrs:{project_id:e.project_id,building_id:e.building_id,id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogRoomAdd?o("el-dialog",{attrs:{title:"新增房间",visible:e.dialogRoomAdd,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogRoomAdd=t}}},[o("Room",{attrs:{project_id:e.project_id,building_id:e.building_id,floor_id:e.floor_id,all_name:e.project_name+"#"+e.building_name+"#"+e.floor_name+"#"},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogRoomEdit?o("el-dialog",{attrs:{title:"编辑房间",visible:e.dialogRoomEdit,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.dialogRoomEdit=t}}},[o("Room",{attrs:{project_id:e.project_id,building_id:e.building_id,floor_id:e.floor_id,all_name:e.project_name+"#"+e.building_name+"#"+e.floor_name+"#",id:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogImportRooms?o("el-dialog",{attrs:{title:"导入房间",visible:e.dialogImportRooms,"append-to-body":"",width:"400px"},on:{"update:visible":function(t){e.dialogImportRooms=t}}},[o("ImportRooms",{on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e()],1)},staticRenderFns:[]};var w=o("Aizv")(y,k,!1,function(e){o("XjpO")},"data-v-ddd2e40e",null);t.default=w.exports}});
//# sourceMappingURL=4.4bf9802831f834f406e4.js.map