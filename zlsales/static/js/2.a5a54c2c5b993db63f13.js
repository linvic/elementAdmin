webpackJsonp([2],{G2yt:function(e,t){},Kc66:function(e,t){},SZw7:function(e,t){},SaOK:function(e,t,a){"use strict";var n=a("3SZ7"),o=a.n(n),i=(a("G2yt"),a("FevL")),l=function e(t,a){if(!(this instanceof e))return new e(t,a);this.options=this.extend({noPrint:".no-print"},a),this.dom="string"==typeof t?document.querySelector(t):t,this.init()};l.prototype={init:function(){var e=this.getStyle()+this.getHtml();this.writeIframe(e)},extend:function(e,t){for(var a in t)e[a]=t[a];return e},getStyle:function(){for(var e="",t=document.querySelectorAll("style,link"),a=0;a<t.length;a++)e+=t[a].outerHTML;return e+="<style>"+(this.options.noPrint?this.options.noPrint:".no-print")+"{display:none;}</style>"},getHtml:function(){var e=document.querySelectorAll("input"),t=document.querySelectorAll("textarea"),a=document.querySelectorAll("select");for(var n in e)"checkbox"==e[n].type||"radio"==e[n].type?1==e[n].checked?e[n].setAttribute("checked","checked"):e[n].removeAttribute("checked"):"text"==e[n].type&&e[n].setAttribute("value",e[n].value);for(var o in t)"textarea"==t[o].type&&(t[o].innerHTML=t[o].value);for(var i in a)if("select-one"==a[i].type){var l=a[i].children;for(var m in l)"OPTION"==l[m].tagName&&(1==l[m].selected?l[m].setAttribute("selected","selected"):l[m].removeAttribute("selected"))}return this.dom.outerHTML},writeIframe:function(e){var t,a,n=document.createElement("iframe"),o=document.body.appendChild(n);n.id="printIframe",n.style="position:absolute;width:0;height:0;top:-10px;left:-10px;",t=o.contentWindow||o.contentDocument,(a=o.contentDocument||o.contentWindow.document).open(),a.write(e),a.close(),this.toPrint(t),setTimeout(function(){document.body.removeChild(n)},100)},toPrint:function(e){try{setTimeout(function(){e.focus();try{e.document.execCommand("print",!1,null)||e.print()}catch(t){e.print()}e.close()},10)}catch(e){console.log("err",e)}}};var m={install:function(e,t){e.prototype.$print=l}},r=m,c=a("mtWM"),s=a.n(c);i.default.use(r),i.default.component("ProofOfPendingPayment-Template",function(e,t){s.a.get("/api/file_template/get_file_templatedetails_by_file_code?file_code=ProofOfPendingPayment").then(function(t){var a=t.data.data.template_html,n=t.data.data.template_html.replace(/{{/g,"{{documentData.").replace(/}}/g,' || "______" }}');e({template:n,props:{documentData:{type:Object}},data:function(){return{templateHtml:""}},methods:{},created:function(){this.$emit("setTemplateHtml",a)}})})});var _={props:{frameParame:{type:Object},editId:{type:Number()}},data:function(){return{documentData:{c_id:"",customer_name:"",file_template_html:"",money_from:"",money_to:"",money_to_phone:"",money_pay_amount:"",money_pay_amount_inwords:"",money_pay_type:"",money_pay_type_txt:"□现钞，□支票，□银行卡，□其他方式",room_all_name:"",money_type:"",money_type_txt:"□意向金，□购房款，□车位款，□其它",money_type_other:""},myCustomers:[]}},created:function(){var e=this;this.$https.all([this.getMyCustomer()]).then(this.$https.spread(function(t,a){e.editId&&e.getOldData()}))},watch:{"documentData.money_pay_amount":function(e){this.documentData.money_pay_amount_inwords=this.Arabia_To_SimplifiedChinese(e)},"documentData.money_pay_type":function(e){e=Number(e),console.log(e),this.documentData.money_pay_type_txt=1===e?"√现钞，□支票，□银行卡，□其他方式":2===e?"□现钞，√支票，□银行卡，□其他方式":3===e?"□现钞，□支票，√银行卡，□其他方式":4===e?"□现钞，□支票，□银行卡，√其他方式":"□现钞，□支票，□银行卡，□其他方式"},"documentData.money_type":function(e){e=Number(e),console.log(e),this.documentData.money_type_txt=1===e?"√意向金，□购房款，□车位款，□其它":2===e?"□意向金，√购房款，□车位款，□其它":3===e?"□意向金，□购房款，√车位款，□其它":4===e?"□意向金，□购房款，□车位款，√其它":"□意向金，□购房款，□车位款，□其它"}},methods:{onPrint:function(){this.$print(this.$refs.printbox)},SetTemplateHtml:function(e){this.documentData.file_template_html=e},getMyCustomer:function(){var e=this;this.$https.get("/api/Customer/page",{params:{currentPage:1,pageSize:9999,customer_classify:999,user_id:-2}}).then(function(t){0==t.data.code?e.myCustomers=t.data.data.Items:e.$message({type:"error",showClose:!0,message:t.data.message})})},changeCustomer:function(e){var t;t=this.myCustomers.find(function(t){return t.c_id===e}),this.documentData.customer_name=t.customer_name,this.documentData.money_to=t.customer_name},getOldData:function(){var e=this;this.$https.get("/api/file_common/get_file_commondetails?fc_id="+this.editId).then(function(t){if(0==t.data.code){var a=t.data.data;e.documentData.c_id=a.c_id,e.documentData.customer_name=a.customer_name,e.documentData.file_template_html=a.file_template_html;var n=JSON.parse(a.file_json_data);e.documentData.money_from=n.money_from,e.documentData.money_to=n.money_to,e.documentData.money_to_phone=n.money_to_phone,e.documentData.money_pay_amount=n.money_pay_amount,e.documentData.money_pay_type=n.money_pay_type,e.documentData.room_all_name=n.room_all_name,e.documentData.money_type=n.money_type,e.documentData.money_type_other=n.money_type_other}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={c_id:e.documentData.c_id,customer_name:e.documentData.customer_name,file_template_html:e.documentData.file_template_html,file_template_id:e.frameParame.id,file_name:e.frameParame.name,file_type_code:e.frameParame.code};a.file_json_data=o()({money_from:e.documentData.money_from,money_to:e.documentData.money_to,money_to_phone:e.documentData.money_to_phone,money_pay_amount:e.documentData.money_pay_amount,money_pay_type:e.documentData.money_pay_type,room_all_name:e.documentData.room_all_name,money_type:e.documentData.money_type,money_type_other:e.documentData.money_type_other}),e.editId?(a.fc_id=parseInt(e.editId),e.$https.post("/api/file_common/update_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功编辑文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/file_common/create_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功保存文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","Frame")},Arabia_To_SimplifiedChinese:function(e){var t=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);for(var i="",l=0;l<t.length;l++)i+=(a[Math.floor(10*e*Math.pow(10,l))%10]+t[l]).replace(/零./,"");console.log("325=",i),i=i||"整",e=Math.floor(e);for(var m=0;m<n[0].length&&e>0;m++){for(var r="",c=0;c<n[1].length&&e>0;c++)r=a[e%10]+n[1][c]+r,e=Math.floor(e/10);i=r.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][m]+i}return o+i.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!this.frameParame.type,expression:"!this.frameParame.type"}],attrs:{sm:24,md:12}},[a("el-form",{ref:"form",attrs:{model:e.documentData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"款项用于谁",prop:"c_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择客户"},on:{change:e.changeCustomer},model:{value:e.documentData.c_id,callback:function(t){e.$set(e.documentData,"c_id",t)},expression:"documentData.c_id"}},e._l(e.myCustomers,function(e){return a("el-option",{key:e.c_id,attrs:{label:e.customer_name,value:e.c_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"付款对象"}},[a("el-select",{staticStyle:{width:"400px"},model:{value:e.documentData.money_from,callback:function(t){e.$set(e.documentData,"money_from",t)},expression:"documentData.money_from"}},[a("el-option",{attrs:{label:"东莞市凤岗天安数码城有限公司",value:"东莞市凤岗天安数码城有限公司"}}),e._v(" "),a("el-option",{attrs:{label:"东莞市天安数码产业投资发展有限公司",value:"东莞市天安数码产业投资发展有限公司"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款人"}},[a("el-input",{model:{value:e.documentData.money_to,callback:function(t){e.$set(e.documentData,"money_to",t)},expression:"documentData.money_to"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款人联系电话"}},[a("el-input",{model:{value:e.documentData.money_to_phone,callback:function(t){e.$set(e.documentData,"money_to_phone",t)},expression:"documentData.money_to_phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款金额"}},[a("el-input",{model:{value:e.documentData.money_pay_amount,callback:function(t){e.$set(e.documentData,"money_pay_amount",t)},expression:"documentData.money_pay_amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式"}},[a("el-radio-group",{model:{value:e.documentData.money_pay_type,callback:function(t){e.$set(e.documentData,"money_pay_type",t)},expression:"documentData.money_pay_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("现钞")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("支票")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("银行卡")]),e._v(" "),a("el-radio",{attrs:{label:"4"}},[e._v("其他方式")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"物业房产"}},[a("el-input",{model:{value:e.documentData.room_all_name,callback:function(t){e.$set(e.documentData,"room_all_name",t)},expression:"documentData.room_all_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"款项类别"}},[a("el-radio-group",{model:{value:e.documentData.money_type,callback:function(t){e.$set(e.documentData,"money_type",t)},expression:"documentData.money_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("意向金")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("购房款")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("车位款")]),e._v(" "),a("el-radio",{attrs:{label:"4"}},[e._v("其它")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"款项类别-其它"}},[a("el-input",{model:{value:e.documentData.money_type_other,callback:function(t){e.$set(e.documentData,"money_type_other",t)},expression:"documentData.money_type_other"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:function(t){e.submit()}}},[e._v("保存文档")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-web-reply"}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(t){e.onPrint()}}},[e._v("打印")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{sm:24,md:this.frameParame.type?24:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"print"===this.frameParame.type,expression:"this.frameParame.type === 'print'"}],staticClass:"text-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-printer",circle:""},on:{click:function(t){e.onPrint()}}},[e._v("点击打印本文档")])],1),e._v(" "),a("div",{staticClass:"print"},[a("div",{ref:"printbox"},[a("ProofOfPendingPayment-Template",{attrs:{documentData:e.documentData},on:{setTemplateHtml:e.SetTemplateHtml}})],1)])])],1)],1)},staticRenderFns:[]};var u=a("Aizv")(_,d,!1,function(e){a("cvQm")},"data-v-3dca5e03",null).exports;i.default.use(r),i.default.component("EnterParkRegistrationForm-Template",function(e,t){s.a.get("/api/file_template/get_file_templatedetails_by_file_code?file_code=EnterParkRegistrationForm").then(function(t){var a=t.data.data.template_html,n=t.data.data.template_html.replace(/{{/g,"{{documentData.").replace(/}}/g,' || "      " }}');e({template:n,props:{documentData:{type:Object}},data:function(){return{templateHtml:""}},methods:{},created:function(){this.$emit("setTemplateHtml",a)}})})});var p={props:{frameParame:{type:Object},editId:{type:Number()}},data:function(){return{documentData:{c_id:"",customer_name:"",file_template_html:"",create_time:"",company_name:"",company_corporate:"",linkman_name:"",linkman_phone:"",company_registered_address:"",company_registered_capital:"",company_type:[],company_type_txt:"□股份公司（□已上市 □拟上市） □有限公司 □其他",company_type_other:"",company_industry_type:[],company_industry_type_txt:"□互联网 □生物 □新能源 □新材料 □创意 □环保 □其他",company_industry_type_other:"",high_tech_enterprises_type:[],high_tech_enterprises_type_txt:"□国家 □深圳市 □其他 □无 （ ）",high_tech_enterprises_type_other:"",built_area:"",property_area:"",company_main_product:"",output_value:"",total_profit:"",product_profit:"",dev_invested:"",taxable_amount:"",derate_amount:"",company_employees_number:"",company_ability_employees_number:"",company_dev_employees_number:"",patent_number:"",invent_number:"",utility_model_patent:"",intentional_toward1:"",intentional_toward2:"",intentional_toward3:"",intentional_floor1:"",intentional_floor2:"",intentional_floor3:"",intentional_invested_amount:"",intentional_property_invested_amount:"",outher_invested_amount:"",enter_content:[],enter_content_txt:"□企业总部 □研发中心 □管理中心 □地区总部 □销售中心 □其他",enter_content_other:""},myCustomers:[]}},created:function(){var e=this;this.$https.all([this.getMyCustomer()]).then(this.$https.spread(function(t,a){e.editId&&e.getOldData()}))},watch:{"documentData.company_type":function(e){console.log(e);var t="",a=e.length+1;-1!==e.indexOf("1",-a)?t+="☑股份公司":t+="□股份公司",-1!==e.indexOf("2",-a)?t+="（☑已上市   ":t+="（□已上市   ",-1!==e.indexOf("3",-a)?t+="☑拟上市）  ":t+="□拟上市）  ",-1!==e.indexOf("4",-a)?t+="☑有限公司     ":t+="□有限公司     ",-1!==e.indexOf("5",-a)?t+="☑其他":(t+="□其他",this.documentData.company_type_other=""),this.documentData.company_type_txt=t},"documentData.company_industry_type":function(e){console.log(e);var t="",a=e.length+1;-1!==e.indexOf("1",-a)?t+="☑互联网 ":t+="□互联网 ",-1!==e.indexOf("2",-a)?t+="☑生物 ":t+="□生物 ",-1!==e.indexOf("3",-a)?t+="☑新能源 ":t+="□新能源 ",-1!==e.indexOf("4",-a)?t+="☑新材料 ":t+="□新材料 ",-1!==e.indexOf("5",-a)?t+="☑创意 ":t+="□创意 ",-1!==e.indexOf("6",-a)?t+="☑环保 ":t+="□环保 ",-1!==e.indexOf("7",-a)?t+="☑其他":(t+="□其他",this.documentData.company_industry_type_other=""),this.documentData.company_industry_type_txt=t},"documentData.high_tech_enterprises_type":function(e){console.log(e);var t="",a=e.length+1;-1!==e.indexOf("1",-a)?t+="☑国家   ":t+="□国家   ",-1!==e.indexOf("2",-a)?t+="☑深圳市    ":t+="□深圳市    ",-1!==e.indexOf("3",-a)?t+="☑其他    ":(t+="□其他    ",this.documentData.high_tech_enterprises_type_other=""),-1!==e.indexOf("4",-a)?t+="☑无 ":t+="□无 ",this.documentData.high_tech_enterprises_type_txt=t},"documentData.enter_content":function(e){console.log(e);var t="",a=e.length+1;-1!==e.indexOf("1",-a)?t+="☑企业总部  ":t+="□企业总部  ",-1!==e.indexOf("2",-a)?t+="☑研发中心   ":t+="□研发中心   ",-1!==e.indexOf("3",-a)?t+="☑管理中心  ":t+="□管理中心  ",-1!==e.indexOf("4",-a)?t+="☑地区总部  ":t+="□地区总部  ",-1!==e.indexOf("5",-a)?t+="☑销售中心      ":t+="□销售中心      ",-1!==e.indexOf("6",-a)?t+="☑其他":(t+="□其他",this.documentData.enter_content_other=""),this.documentData.enter_content_txt=t}},methods:{onPrint:function(){this.$print(this.$refs.printbox)},SetTemplateHtml:function(e){this.documentData.file_template_html=e},getMyCustomer:function(){var e=this;this.$https.get("/api/Customer/page",{params:{currentPage:1,pageSize:9999,customer_classify:999,user_id:-2}}).then(function(t){0==t.data.code?e.myCustomers=t.data.data.Items:e.$message({type:"error",showClose:!0,message:t.data.message})})},changeCustomer:function(e){var t;t=this.myCustomers.find(function(t){return t.c_id===e}),console.log(t),this.documentData.customer_name=t.customer_name,this.documentData.company_name=t.enterprise_name,this.documentData.company_corporate=t.company_corporate,this.documentData.company_registered_address=t.company_registered_address,this.documentData.company_registered_capital=t.company_registered_capital,this.documentData.company_main_product=t.company_main_product,this.documentData.company_employees_number=t.company_employees_number},getOldData:function(){var e=this;this.$https.get("/api/file_common/get_file_commondetails?fc_id="+this.editId).then(function(t){if(0==t.data.code){var a=t.data.data;e.documentData.c_id=a.c_id,e.documentData.customer_name=a.customer_name,e.documentData.file_template_html=a.file_template_html;var n=JSON.parse(a.file_json_data);e.documentData.create_time=n.create_time,e.documentData.company_name=n.company_name,e.documentData.company_corporate=n.company_corporate,e.documentData.linkman_name=n.linkman_name,e.documentData.linkman_phone=n.linkman_phone,e.documentData.company_registered_address=n.company_registered_address,e.documentData.company_registered_capital=n.company_registered_capital,e.documentData.company_type=n.company_type?n.company_type:[],e.documentData.company_type_other=n.company_type_other,e.documentData.company_industry_type=n.company_industry_type?n.company_industry_type:[],e.documentData.company_industry_type_other=n.company_industry_type_other,e.documentData.high_tech_enterprises_type=n.high_tech_enterprises_type?n.high_tech_enterprises_type:[],e.documentData.high_tech_enterprises_type_other=n.high_tech_enterprises_type_other,e.documentData.built_area=n.built_area,e.documentData.property_area=n.property_area,e.documentData.company_main_product=n.company_main_product,e.documentData.output_value=n.output_value,e.documentData.total_profit=n.total_profit,e.documentData.product_profit=n.product_profit,e.documentData.dev_invested=n.dev_invested,e.documentData.taxable_amount=n.taxable_amount,e.documentData.derate_amount=n.derate_amount,e.documentData.company_employees_number=n.company_employees_number,e.documentData.company_ability_employees_number=n.company_ability_employees_number,e.documentData.company_dev_employees_number=n.company_dev_employees_number,e.documentData.patent_number=n.patent_number,e.documentData.invent_number=n.invent_number,e.documentData.utility_model_patent=n.utility_model_patent,e.documentData.intentional_toward1=n.intentional_toward1,e.documentData.intentional_toward2=n.intentional_toward2,e.documentData.intentional_toward3=n.intentional_toward3,e.documentData.intentional_floor1=n.intentional_floor1,e.documentData.intentional_floor2=n.intentional_floor2,e.documentData.intentional_floor3=n.intentional_floor3,e.documentData.intentional_invested_amount=n.intentional_invested_amount,e.documentData.intentional_property_invested_amount=n.intentional_property_invested_amount,e.documentData.outher_invested_amount=n.outher_invested_amount,e.documentData.enter_content=n.enter_content?n.enter_content:[],e.documentData.enter_content_other=n.enter_content_other}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={c_id:e.documentData.c_id,customer_name:e.documentData.customer_name,file_template_html:e.documentData.file_template_html,file_template_id:e.frameParame.id,file_name:e.frameParame.name,file_type_code:e.frameParame.code};a.file_json_data=o()({create_time:e.documentData.create_time,company_name:e.documentData.company_name,company_corporate:e.documentData.company_corporate,linkman_name:e.documentData.linkman_name,linkman_phone:e.documentData.linkman_phone,company_registered_address:e.documentData.company_registered_address,company_registered_capital:e.documentData.company_registered_capital,company_type:e.documentData.company_type,company_type_other:e.documentData.company_type_other,company_industry_type:e.documentData.company_industry_type,company_industry_type_other:e.documentData.company_industry_type_other,high_tech_enterprises_type:e.documentData.high_tech_enterprises_type,high_tech_enterprises_type_other:e.documentData.high_tech_enterprises_type_other,built_area:e.documentData.built_area,property_area:e.documentData.property_area,company_main_product:e.documentData.company_main_product,output_value:e.documentData.output_value,total_profit:e.documentData.total_profit,product_profit:e.documentData.product_profit,dev_invested:e.documentData.dev_invested,taxable_amount:e.documentData.taxable_amount,derate_amount:e.documentData.derate_amount,company_employees_number:e.documentData.company_employees_number,company_ability_employees_number:e.documentData.company_ability_employees_number,company_dev_employees_number:e.documentData.company_dev_employees_number,patent_number:e.documentData.patent_number,invent_number:e.documentData.invent_number,utility_model_patent:e.documentData.utility_model_patent,intentional_toward1:e.documentData.intentional_toward1,intentional_toward2:e.documentData.intentional_toward2,intentional_toward3:e.documentData.intentional_toward3,intentional_floor1:e.documentData.intentional_floor1,intentional_floor2:e.documentData.intentional_floor2,intentional_floor3:e.documentData.intentional_floor3,intentional_invested_amount:e.documentData.intentional_invested_amount,intentional_property_invested_amount:e.documentData.intentional_property_invested_amount,outher_invested_amount:e.documentData.outher_invested_amount,enter_content:e.documentData.enter_content,enter_content_other:e.documentData.enter_content_other}),e.editId?(a.fc_id=parseInt(e.editId),e.$https.post("/api/file_common/update_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功编辑文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/file_common/create_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功保存文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","Frame")}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!this.frameParame.type,expression:"!this.frameParame.type"}],attrs:{sm:24,md:12}},[a("el-form",{ref:"form",attrs:{model:e.documentData,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"客户",prop:"c_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择客户"},on:{change:e.changeCustomer},model:{value:e.documentData.c_id,callback:function(t){e.$set(e.documentData,"c_id",t)},expression:"documentData.c_id"}},e._l(e.myCustomers,function(e){return a("el-option",{key:e.c_id,attrs:{label:e.customer_name,value:e.c_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"填表日期",prop:"create_time"}},[a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},model:{value:e.documentData.create_time,callback:function(t){e.$set(e.documentData,"create_time",t)},expression:"documentData.create_time"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{model:{value:e.documentData.company_name,callback:function(t){e.$set(e.documentData,"company_name",t)},expression:"documentData.company_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司法人"}},[a("el-input",{model:{value:e.documentData.company_corporate,callback:function(t){e.$set(e.documentData,"company_corporate",t)},expression:"documentData.company_corporate"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{model:{value:e.documentData.linkman_name,callback:function(t){e.$set(e.documentData,"linkman_name",t)},expression:"documentData.linkman_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:e.documentData.linkman_phone,callback:function(t){e.$set(e.documentData,"linkman_phone",t)},expression:"documentData.linkman_phone"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"注册地址"}},[a("el-input",{model:{value:e.documentData.company_registered_address,callback:function(t){e.$set(e.documentData,"company_registered_address",t)},expression:"documentData.company_registered_address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"注册资金"}},[a("el-input",{model:{value:e.documentData.company_registered_capital,callback:function(t){e.$set(e.documentData,"company_registered_capital",t)},expression:"documentData.company_registered_capital"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"企业类型"}},[a("el-checkbox-group",{model:{value:e.documentData.company_type,callback:function(t){e.$set(e.documentData,"company_type",t)},expression:"documentData.company_type"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("股份公司")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("已上市")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("拟上市")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("有限公司")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("其他")]),e._v(" "),a("el-input",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80px"},attrs:{type:"text",placeholder:"其他"},model:{value:e.documentData.company_type_other,callback:function(t){e.$set(e.documentData,"company_type_other",t)},expression:"documentData.company_type_other"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"行业类别"}},[a("el-checkbox-group",{model:{value:e.documentData.company_industry_type,callback:function(t){e.$set(e.documentData,"company_industry_type",t)},expression:"documentData.company_industry_type"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("互联网")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("生物")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("新能源")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("新材料")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("创意")]),e._v(" "),a("el-checkbox",{attrs:{label:"6"}},[e._v("环保")]),e._v(" "),a("el-checkbox",{attrs:{label:"7"}},[e._v("其他")]),e._v(" "),a("el-input",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80px"},attrs:{type:"text",placeholder:"其他"},model:{value:e.documentData.company_industry_type_other,callback:function(t){e.$set(e.documentData,"company_industry_type_other",t)},expression:"documentData.company_industry_type_other"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"认定高新企业"}},[a("el-checkbox-group",{model:{value:e.documentData.high_tech_enterprises_type,callback:function(t){e.$set(e.documentData,"high_tech_enterprises_type",t)},expression:"documentData.high_tech_enterprises_type"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("国家")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("深圳市")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("无")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("其他")]),e._v(" "),a("el-input",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80px"},attrs:{type:"text",placeholder:"其他"},model:{value:e.documentData.high_tech_enterprises_type_other,callback:function(t){e.$set(e.documentData,"high_tech_enterprises_type_other",t)},expression:"documentData.high_tech_enterprises_type_other"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"建筑面积"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.built_area,callback:function(t){e.$set(e.documentData,"built_area",t)},expression:"documentData.built_area"}},[a("template",{slot:"append"},[e._v("平方米")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物业面积"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.property_area,callback:function(t){e.$set(e.documentData,"property_area",t)},expression:"documentData.property_area"}},[a("template",{slot:"append"},[e._v("平方米")])],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"主营产品"}},[a("el-input",{model:{value:e.documentData.company_main_product,callback:function(t){e.$set(e.documentData,"company_main_product",t)},expression:"documentData.company_main_product"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上年度产值"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.output_value,callback:function(t){e.$set(e.documentData,"output_value",t)},expression:"documentData.output_value"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上年度利润总额"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.total_profit,callback:function(t){e.$set(e.documentData,"total_profit",t)},expression:"documentData.total_profit"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品销售收入"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.product_profit,callback:function(t){e.$set(e.documentData,"product_profit",t)},expression:"documentData.product_profit"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上年度研发投入"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.dev_invested,callback:function(t){e.$set(e.documentData,"dev_invested",t)},expression:"documentData.dev_invested"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上年度纳税总额"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.taxable_amount,callback:function(t){e.$set(e.documentData,"taxable_amount",t)},expression:"documentData.taxable_amount"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"政策减免税额"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.derate_amount,callback:function(t){e.$set(e.documentData,"derate_amount",t)},expression:"documentData.derate_amount"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"员工人数"}},[a("el-input",{model:{value:e.documentData.company_employees_number,callback:function(t){e.$set(e.documentData,"company_employees_number",t)},expression:"documentData.company_employees_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本科以上人数"}},[a("el-input",{model:{value:e.documentData.company_ability_employees_number,callback:function(t){e.$set(e.documentData,"company_ability_employees_number",t)},expression:"documentData.company_ability_employees_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发人数"}},[a("el-input",{model:{value:e.documentData.company_dev_employees_number,callback:function(t){e.$set(e.documentData,"company_dev_employees_number",t)},expression:"documentData.company_dev_employees_number"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"专利授权（件）"}},[a("el-input",{model:{value:e.documentData.patent_number,callback:function(t){e.$set(e.documentData,"patent_number",t)},expression:"documentData.patent_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发明专利"}},[a("el-input",{model:{value:e.documentData.invent_number,callback:function(t){e.$set(e.documentData,"invent_number",t)},expression:"documentData.invent_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实用新型专利"}},[a("el-input",{model:{value:e.documentData.utility_model_patent,callback:function(t){e.$set(e.documentData,"utility_model_patent",t)},expression:"documentData.utility_model_patent"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"拟购面积"}},[a("el-input",{attrs:{placeholder:"数字，小数点两位，单位平方米"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.documentData.intentional_area,callback:function(t){e.$set(e.documentData,"intentional_area",t)},expression:"documentData.intentional_area"}},[a("template",{slot:"append"},[e._v("平方米")])],2)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"朝向①"}},[a("el-input",{model:{value:e.documentData.intentional_toward1,callback:function(t){e.$set(e.documentData,"intentional_toward1",t)},expression:"documentData.intentional_toward1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"朝向②"}},[a("el-input",{model:{value:e.documentData.intentional_toward2,callback:function(t){e.$set(e.documentData,"intentional_toward2",t)},expression:"documentData.intentional_toward2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"朝向③"}},[a("el-input",{model:{value:e.documentData.intentional_toward3,callback:function(t){e.$set(e.documentData,"intentional_toward3",t)},expression:"documentData.intentional_toward3"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"楼层①"}},[a("el-input",{model:{value:e.documentData.intentional_floor1,callback:function(t){e.$set(e.documentData,"intentional_floor1",t)},expression:"documentData.intentional_floor1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"楼层②"}},[a("el-input",{model:{value:e.documentData.intentional_floor2,callback:function(t){e.$set(e.documentData,"intentional_floor2",t)},expression:"documentData.intentional_floor2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"楼层③"}},[a("el-input",{model:{value:e.documentData.intentional_floor3,callback:function(t){e.$set(e.documentData,"intentional_floor3",t)},expression:"documentData.intentional_floor3"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"拟投资额（万元）"}},[a("el-input",{model:{value:e.documentData.patent_number,callback:function(t){e.$set(e.documentData,"patent_number",t)},expression:"documentData.patent_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"物业投资"}},[a("el-input",{model:{value:e.documentData.invent_number,callback:function(t){e.$set(e.documentData,"invent_number",t)},expression:"documentData.invent_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"其他投资"}},[a("el-input",{model:{value:e.documentData.utility_model_patent,callback:function(t){e.$set(e.documentData,"utility_model_patent",t)},expression:"documentData.utility_model_patent"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"拟入驻内容"}},[a("el-checkbox-group",{model:{value:e.documentData.enter_content,callback:function(t){e.$set(e.documentData,"enter_content",t)},expression:"documentData.enter_content"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("企业总部")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("研发中心")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("管理中心")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("地区总部")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("销售中心")]),e._v(" "),a("el-checkbox",{attrs:{label:"6"}},[e._v("其他")]),e._v(" "),a("el-input",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80px"},attrs:{type:"text",placeholder:"其他"},model:{value:e.documentData.enter_content_other,callback:function(t){e.$set(e.documentData,"enter_content_other",t)},expression:"documentData.enter_content_other"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:function(t){e.submit()}}},[e._v("保存文档")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-web-reply"}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(t){e.onPrint()}}},[e._v("打印")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{sm:24,md:this.frameParame.type?24:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"print"===this.frameParame.type,expression:"this.frameParame.type === 'print'"}],staticClass:"text-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-printer",circle:""},on:{click:function(t){e.onPrint()}}},[e._v("点击打印本文档")])],1),e._v(" "),a("div",{staticClass:"print"},[a("div",{ref:"printbox"},[a("EnterParkRegistrationForm-Template",{attrs:{documentData:e.documentData},on:{setTemplateHtml:e.SetTemplateHtml}})],1)])])],1)],1)},staticRenderFns:[]};var y=a("Aizv")(p,f,!1,function(e){a("qoB6")},"data-v-9bf2ee42",null).exports;i.default.use(r),i.default.component("AdvanceSaleNotice-Template",function(e,t){s.a.get("/api/file_template/get_file_templatedetails_by_file_code?file_code=AdvanceSaleNotice").then(function(t){var a=t.data.data.template_html,n=t.data.data.template_html.replace(/{{/g,"{{documentData.").replace(/}}/g,' || "______" }}');e({template:n,props:{documentData:{type:Object}},data:function(){return{templateHtml:""}},methods:{},created:function(){this.$emit("setTemplateHtml",a)}})})});var h={props:{frameParame:{type:Object},editId:{type:Number()}},data:function(){var e=this;return{documentData:{c_id:"",customer_name:"",file_template_html:"",room_all_name:"",notify_time:"",sign_date_start:"",sign_date_end:"",company_name:"",link_man_name:"",link_man_tel:""},pickerBeginDateBefore:{disabledDate:function(t){var a=e.documentData.sign_date_end.replace("年","-").replace("月","-").replace("日",""),n=new Date(a);if(n)return t.getTime()>n}},pickerBeginDateAfter:{disabledDate:function(t){var a=e.documentData.sign_date_start.replace("年","-").replace("月","-").replace("日",""),n=new Date(a);if(n)return t.getTime()<n}},myCustomers:[]}},created:function(){var e=this;this.$https.all([this.getMyCustomer()]).then(this.$https.spread(function(t,a){e.editId&&e.getOldData()}))},watch:{},methods:{onPrint:function(){this.$print(this.$refs.printbox)},SetTemplateHtml:function(e){this.documentData.file_template_html=e},getMyCustomer:function(){var e=this;this.$https.get("/api/Customer/page",{params:{currentPage:1,pageSize:9999,customer_classify:999,user_id:-2}}).then(function(t){0==t.data.code?e.myCustomers=t.data.data.Items:e.$message({type:"error",showClose:!0,message:t.data.message})})},changeCustomer:function(e){var t;t=this.myCustomers.find(function(t){return t.c_id===e}),this.documentData.customer_name=t.customer_name},getOldData:function(){var e=this;this.$https.get("/api/file_common/get_file_commondetails?fc_id="+this.editId).then(function(t){if(0==t.data.code){var a=t.data.data;e.documentData.c_id=a.c_id,e.documentData.customer_name=a.customer_name,e.documentData.file_template_html=a.file_template_html;var n=JSON.parse(a.file_json_data);e.documentData.room_all_name=n.room_all_name,e.documentData.notify_time=n.notify_time,e.documentData.sign_date_start=n.sign_date_start,e.documentData.sign_date_end=n.sign_date_end,e.documentData.company_name=n.company_name,e.documentData.link_man_name=n.link_man_name,e.documentData.link_man_tel=n.link_man_tel}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={c_id:e.documentData.c_id,customer_name:e.documentData.customer_name,file_template_html:e.documentData.file_template_html,file_template_id:e.frameParame.id,file_name:e.frameParame.name,file_type_code:e.frameParame.code};a.file_json_data=o()({room_all_name:e.documentData.room_all_name,notify_time:e.documentData.notify_time,sign_date_start:e.documentData.sign_date_start,sign_date_end:e.documentData.sign_date_end,company_name:e.documentData.company_name,link_man_name:e.documentData.link_man_name,link_man_tel:e.documentData.link_man_tel}),e.editId?(a.fc_id=parseInt(e.editId),e.$https.post("/api/file_common/update_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功编辑文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/file_common/create_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功保存文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","Frame")}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!this.frameParame.type,expression:"!this.frameParame.type"}],attrs:{sm:24,md:12}},[a("el-form",{ref:"form",attrs:{model:e.documentData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"c_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择客户"},on:{change:e.changeCustomer},model:{value:e.documentData.c_id,callback:function(t){e.$set(e.documentData,"c_id",t)},expression:"documentData.c_id"}},e._l(e.myCustomers,function(e){return a("el-option",{key:e.c_id,attrs:{label:e.customer_name,value:e.c_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单元",prop:"room_all_name"}},[a("el-input",{model:{value:e.documentData.room_all_name,callback:function(t){e.$set(e.documentData,"room_all_name",t)},expression:"documentData.room_all_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"短信通知时间",prop:"notify_time"}},[a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},model:{value:e.documentData.notify_time,callback:function(t){e.$set(e.documentData,"notify_time",t)},expression:"documentData.notify_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签署协议期限(起)",prop:"sign_date_start"}},[a("el-date-picker",{attrs:{editable:!1,"picker-options":e.pickerBeginDateBefore,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},model:{value:e.documentData.sign_date_start,callback:function(t){e.$set(e.documentData,"sign_date_start",t)},expression:"documentData.sign_date_start"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签署协议期限(止)",prop:"sign_date_end"}},[a("el-date-picker",{attrs:{editable:!1,"picker-options":e.pickerBeginDateAfter,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},model:{value:e.documentData.sign_date_end,callback:function(t){e.$set(e.documentData,"sign_date_end",t)},expression:"documentData.sign_date_end"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司",prop:"company_name"}},[a("el-input",{model:{value:e.documentData.company_name,callback:function(t){e.$set(e.documentData,"company_name",t)},expression:"documentData.company_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名",prop:"link_man_name"}},[a("el-input",{model:{value:e.documentData.link_man_name,callback:function(t){e.$set(e.documentData,"link_man_name",t)},expression:"documentData.link_man_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"link_man_tel"}},[a("el-input",{model:{value:e.documentData.link_man_tel,callback:function(t){e.$set(e.documentData,"link_man_tel",t)},expression:"documentData.link_man_tel"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:function(t){e.submit()}}},[e._v("保存文档")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-web-reply"}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(t){e.onPrint()}}},[e._v("打印")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{sm:24,md:this.frameParame.type?24:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"print"===this.frameParame.type,expression:"this.frameParame.type === 'print'"}],staticClass:"text-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-printer",circle:""},on:{click:function(t){e.onPrint()}}},[e._v("点击打印本文档")])],1),e._v(" "),a("div",{staticClass:"print"},[a("div",{ref:"printbox"},[a("AdvanceSaleNotice-Template",{attrs:{documentData:e.documentData},on:{setTemplateHtml:e.SetTemplateHtml}})],1)])])],1)],1)},staticRenderFns:[]};var D=a("Aizv")(h,v,!1,function(e){a("a0ma")},"data-v-e24210a0",null).exports;i.default.use(r),i.default.component("PurchaseIntention-Template",function(e,t){s.a.get("/api/file_template/get_file_templatedetails_by_file_code?file_code=PurchaseIntention").then(function(t){var a=t.data.data.template_html,n=t.data.data.template_html.replace(/{{/g,"{{documentData.").replace(/}}/g,' || "______" }}');e({template:n,props:{documentData:{type:Object}},data:function(){return{templateHtml:""}},methods:{},created:function(){this.$emit("setTemplateHtml",a)}})})});var g={props:{frameParame:{type:Object},editId:{type:Number()}},data:function(){return{documentData:{c_id:"",customer_name:"",file_template_html:"",room_all_name:"",built_area:"",address:"",company_scope_of_operation:"",company_briefing:""},myCustomers:[]}},created:function(){var e=this;this.$https.all([this.getMyCustomer()]).then(this.$https.spread(function(t,a){e.editId&&e.getOldData()}))},watch:{},methods:{onPrint:function(){this.$print(this.$refs.printbox)},SetTemplateHtml:function(e){this.documentData.file_template_html=e},getMyCustomer:function(){var e=this;this.$https.get("/api/Customer/page",{params:{currentPage:1,pageSize:9999,customer_classify:999,user_id:-2}}).then(function(t){0==t.data.code?e.myCustomers=t.data.data.Items:e.$message({type:"error",showClose:!0,message:t.data.message})})},changeCustomer:function(e){var t;t=this.myCustomers.find(function(t){return t.c_id===e}),this.documentData.customer_name=t.customer_name},getOldData:function(){var e=this;this.$https.get("/api/file_common/get_file_commondetails?fc_id="+this.editId).then(function(t){if(0==t.data.code){var a=t.data.data;e.documentData.c_id=a.c_id,e.documentData.customer_name=a.customer_name,e.documentData.file_template_html=a.file_template_html;var n=JSON.parse(a.file_json_data);e.documentData.room_all_name=n.room_all_name,e.documentData.built_area=n.built_area,e.documentData.address=n.address,e.documentData.company_scope_of_operation=n.company_scope_of_operation,e.documentData.company_briefing=n.company_briefing}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a={c_id:e.documentData.c_id,customer_name:e.documentData.customer_name,file_template_html:e.documentData.file_template_html,file_template_id:e.frameParame.id,file_name:e.frameParame.name,file_type_code:e.frameParame.code};a.file_json_data=o()({room_all_name:e.documentData.room_all_name,built_area:e.documentData.built_area,address:e.documentData.address,company_scope_of_operation:e.documentData.company_scope_of_operation,company_briefing:e.documentData.company_briefing}),e.editId?(a.fc_id=parseInt(e.editId),e.$https.post("/api/file_common/update_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功编辑文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/file_common/create_file_common",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"成功保存文档",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","Frame")}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!this.frameParame.type,expression:"!this.frameParame.type"}],attrs:{sm:24,md:12}},[a("el-form",{ref:"form",attrs:{model:e.documentData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"c_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择客户"},on:{change:e.changeCustomer},model:{value:e.documentData.c_id,callback:function(t){e.$set(e.documentData,"c_id",t)},expression:"documentData.c_id"}},e._l(e.myCustomers,function(e){return a("el-option",{key:e.c_id,attrs:{label:e.customer_name,value:e.c_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"公司地址"}},[a("el-input",{model:{value:e.documentData.address,callback:function(t){e.$set(e.documentData,"address",t)},expression:"documentData.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司主营业务"}},[a("el-input",{model:{value:e.documentData.company_scope_of_operation,callback:function(t){e.$set(e.documentData,"company_scope_of_operation",t)},expression:"documentData.company_scope_of_operation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司简介"}},[a("el-input",{model:{value:e.documentData.company_briefing,callback:function(t){e.$set(e.documentData,"company_briefing",t)},expression:"documentData.company_briefing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物业面积"}},[a("el-input",{model:{value:e.documentData.built_area,callback:function(t){e.$set(e.documentData,"built_area",t)},expression:"documentData.built_area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单元"}},[a("el-input",{model:{value:e.documentData.room_all_name,callback:function(t){e.$set(e.documentData,"room_all_name",t)},expression:"documentData.room_all_name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:function(t){e.submit()}}},[e._v("保存文档")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-web-reply"}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(t){e.onPrint()}}},[e._v("打印")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{sm:24,md:this.frameParame.type?24:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"print"===this.frameParame.type,expression:"this.frameParame.type === 'print'"}],staticClass:"text-right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-printer",circle:""},on:{click:function(t){e.onPrint()}}},[e._v("点击打印本文档")])],1),e._v(" "),a("div",{staticClass:"print"},[a("div",{ref:"printbox"},[a("PurchaseIntention-Template",{attrs:{documentData:e.documentData},on:{setTemplateHtml:e.SetTemplateHtml}})],1)])])],1)],1)},staticRenderFns:[]};var x={components:{ProofOfPendingPayment:u,EnterParkRegistrationForm:y,AdvanceSaleNotice:D,PurchaseIntention:a("Aizv")(g,b,!1,function(e){a("lXdw")},"data-v-2d6c4d5f",null).exports},props:{frameParame:{type:Object},editId:{type:Number()}},data:function(){return{template_code:""}},created:function(){this.frameParame||alert("模板加载失败，请选择模板"),console.info(this.template_code),this.template_code=this.frameParame.code},watch:{},methods:{closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","Frame")},getDataList:function(){this.$emit("parentGetDataList")}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",["ProofOfPendingPayment"===e.template_code?a("ProofOfPendingPayment",{attrs:{frameParame:e.frameParame,editId:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}}):"EnterParkRegistrationForm"===e.template_code?a("EnterParkRegistrationForm",{attrs:{frameParame:e.frameParame,editId:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}}):"AdvanceSaleNotice"===e.template_code?a("AdvanceSaleNotice",{attrs:{frameParame:e.frameParame,editId:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}}):"PurchaseIntention"===e.template_code?a("PurchaseIntention",{attrs:{frameParame:e.frameParame,editId:e.editId},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}}):a("div",[e._v("文档加载错误")])],1)],1)},staticRenderFns:[]};var $=a("Aizv")(x,k,!1,function(e){a("vDKp")},"data-v-64d89b7e",null);t.a=$.exports},a0ma:function(e,t){},cvQm:function(e,t){},lXdw:function(e,t){},q4Nh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("u6qr"),o=a.n(n),i=a("3SZ7"),l=a.n(i),m={data:function(){return{form:{template_name:"",file_code:"",file_type:"",version_num:"",template_html:""},form_rules:{template_name:[{required:!0,message:"请输入模板名称",trigger:"blur"}],file_code:[{required:!0,message:"请输入模板Code",trigger:"blur"}],file_type:[{required:!0,message:"请输入模板类别",trigger:"blur"}],version_num:[{required:!0,message:"请输入模板版本",trigger:"blur"}],template_html:[{required:!0,message:"请输入模板HTML",trigger:"blur"}]},doc_template_type:[]}},props:{id:{type:Number},code:{type:String}},created:function(){var e=this;this.$https.all([this.getDic("doc_template_type","doc_template_type")]).then(this.$https.spread(function(t,a){e.id&&e.getOldData()}))},methods:{getOldData:function(){var e=this;this.$https.get("/api/file_template/get_file_templatedetails_by_file_code?file_code="+this.code).then(function(t){if(0==t.data.code){var a=t.data.data;e.form.template_name=a.template_name,e.form.file_code=a.file_code,e.form.file_type=parseInt(a.file_type),e.form.version_num=a.version_num,e.form.template_html=a.template_html}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var a=JSON.parse(l()(e.form));e.id?(a.id=parseInt(e.id),e.$https.post("/api/file_template/update_file_template",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogTemplateEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/file_template/create_file_template",a).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogTemplateAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var a=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?a[t]=e.data.data:a.$message({type:"error",showClose:!0,message:e.data.message})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogTemplateAdd"),this.$emit("closeDialog","dialogTemplateEdit"))}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{"status-icon":"",rules:e.form_rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"template_name"}},[a("el-input",{model:{value:e.form.template_name,callback:function(t){e.$set(e.form,"template_name",t)},expression:"form.template_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板Code",prop:"file_code"}},[a("el-input",{attrs:{disabled:!!e.id},model:{value:e.form.file_code,callback:function(t){e.$set(e.form,"file_code",t)},expression:"form.file_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板类别",prop:"file_type"}},[a("el-select",{model:{value:e.form.file_type,callback:function(t){e.$set(e.form,"file_type",t)},expression:"form.file_type"}},e._l(e.doc_template_type,function(e){return a("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"模板版本",prop:"version_num"}},[a("el-input",{model:{value:e.form.version_num,callback:function(t){e.$set(e.form,"version_num",t)},expression:"form.version_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板HTML",prop:"template_html"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.template_html,callback:function(t){e.$set(e.form,"template_html",t)},expression:"form.template_html"}}),e._v(" "),a("p",{staticStyle:{"font-size":"10px"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" 提示：请勿随意更改，请最外层使用div包裹，使用 {{}} 进行字段占位")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var c={components:{TemplateAdd:a("Aizv")(m,r,!1,function(e){a("Kc66")},"data-v-d8b73bdc",null).exports,Frame:a("SaOK").a},data:function(){return{loading:!1,editId:null,editCode:null,FrameParame:null,tableData:[],dialogTemplateAdd:!1,dialogTemplateEdit:!1,dialogFrame:!1,pageIndex:1,pageSize:10,dataTotal:0,doc_template_type:[]}},created:function(){var e=this;this.$https.all([this.getDic("doc_template_type","doc_template_type")]).then(this.$https.spread(function(t,a){e.getDataList()}))},watch:{},methods:{getDataList:function(){var e=this;this.loading=!0,this.$https.get("/api/file_template/page",{params:{currentPage:this.pageIndex,pageSize:this.pageSize,is_enable:2}}).then(function(t){e.loading=!1,0==t.data.code?(e.tableData=t.data.data.Items,e.dataTotal=t.data.data.Total):e.$message({type:"error",showClose:!0,message:t.data.message})})},listEdit:function(e,t){this.editId=e,this.editCode=t,this.dialogTemplateEdit=!0},listFrame:function(e,t,a){this.FrameParame={id:Number(e),name:t,code:a},this.dialogFrame=!0},pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()},getDic:function(e,t){var a=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?a[t]=e.data.data:a.$message({type:"error",showClose:!0,message:e.data.message})})},getDicVal:function(e,t){var a="",n=!0,i=!1,l=void 0;try{for(var m,r=o()(this[t]);!(n=(m=r.next()).done);n=!0){var c=m.value;e==c.value_id&&(a=c.value_name)}}catch(e){i=!0,l=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw l}}return a},closeDialog:function(e){"Frame"===e&&(this.dialogFrame=!1,this.dialogFrameEdit=!1,this.dialogFramePrint=!1),this[e]=!1}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("文档模板管理")]),e._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-refresh",size:"small",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.dialogTemplateAdd=!0}}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"template_name",label:"模板名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"file_code",label:"模板Code"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getDicVal(t.row.file_type,"doc_template_type")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"version_num",label:"模板版本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){e.listEdit(t.row.id,t.row.file_code)}}},[e._v("编辑模板")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){e.listFrame(t.row.id,t.row.template_name,t.row.file_code)}}},[e._v("使用模板")])]}}])})],1),e._v(" "),a("div",{staticClass:"text-center m-t"},[e.dataTotal>10?a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}}):e._e()],1)],1),e._v(" "),e.dialogTemplateAdd?a("el-dialog",{attrs:{title:"新增模板",visible:e.dialogTemplateAdd,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogTemplateAdd=t}}},[a("TemplateAdd",{on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogTemplateEdit?a("el-dialog",{attrs:{title:"编辑模板信息",visible:e.dialogTemplateEdit,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialogTemplateEdit=t}}},[a("TemplateAdd",{attrs:{id:e.editId,code:e.editCode},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogFrame?a("el-dialog",{attrs:{title:"创建文档",visible:e.dialogFrame,"append-to-body":"",fullscreen:""},on:{"update:visible":function(t){e.dialogFrame=t}}},[a("Frame",{attrs:{frameParame:e.FrameParame},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e()],1)},staticRenderFns:[]};var _=a("Aizv")(c,s,!1,function(e){a("SZw7")},"data-v-213424de",null);t.default=_.exports},qoB6:function(e,t){},vDKp:function(e,t){}});
//# sourceMappingURL=2.a5a54c2c5b993db63f13.js.map