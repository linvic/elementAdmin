webpackJsonp([19],{"5TR+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{Details:a("zGNL").a},data:function(){return{editId:null,pageIndex:1,pageSize:10,dataTotal:0,loading:!0,approve_status:"2",dialogDetails:!1,tableData:[]}},created:function(){this.getDataList()},watch:{},methods:{pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()},closeDialog:function(e){this[e]=!1},openDetails:function(e){this.editId=Number(e),this.dialogDetails=!0},handleClick:function(e){this.approve_status=e.name,this.getDataList()},changeState:function(e,t){var a=this;this.$prompt("请输入审批意见","审批",{inputType:"textarea",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var n=s.value;a.$https.post("/api/customer_delete_approve/update_customer_delete_approve",{id:e,approve_remark:n,approve_status:t?1:0}).then(function(e){if(0==e.data.code){var s=t?"已同意删除":"已拒绝删除";a.$message({type:"success",showClose:!0,message:s,duration:1500,onClose:function(){a.getDataList()}})}else a.$message({type:"error",showClose:!0,message:e.data.message})})})},getDataList:function(){var e=this;this.$https.get("/api/customer_delete_approve/page",{params:{currentPage:this.pageIndex,pageSize:this.pageSize,approve_status:this.approve_status}}).then(function(t){0==t.data.code?(e.tableData=t.data.data.Items,e.dataTotal=t.data.data.Total,e.loading=!1):e.$message({type:"error",showClose:!0,message:t.data.message})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("删除申请")]),e._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini",plain:"",onclick:"window.location.reload()"}},[e._v("刷新")])],1)],1),e._v(" "),a("el-tabs",{attrs:{value:"2",type:"card"},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:"未处理",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已同意",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已拒绝",name:"0"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_user_name",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"删除客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){e.openDetails(t.row.c_id)}}},[e._v(e._s(t.row.customer_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"apply_remark",label:"删除原因"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.approve_status?"拒绝":1===t.row.approve_status?"同意":"未处理"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.approve_status?a("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){e.changeState(t.row.id,!0)}}},[e._v("同意")]):e._e(),e._v(" "),2===t.row.approve_status?a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){e.changeState(t.row.id,!1)}}},[e._v("驳回")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"text-center m-t"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}})],1)],1),e._v(" "),e.dialogDetails?a("el-dialog",{attrs:{title:"客户详情",visible:e.dialogDetails,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.dialogDetails=t}}},[a("Details",{attrs:{id:e.editId},on:{closeDialog:e.closeDialog}})],1):e._e()],1)},staticRenderFns:[]};var i=a("Aizv")(s,n,!1,function(e){a("ZjSN")},"data-v-906cee68",null);t.default=i.exports},ZjSN:function(e,t){}});
//# sourceMappingURL=19.9e884e1cdccba6f7f9a6.js.map