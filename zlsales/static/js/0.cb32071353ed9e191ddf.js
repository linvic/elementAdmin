webpackJsonp([0],{"+8MW":function(e,t,r){"use strict";var a={mixins:[r("hoPp").a],data:function(){return{acceptTypes:["image/png","image/jpeg","image/gif"]}},methods:{beforeUpload:function(e){return this.acceptTypes.includes(e.type)?e.size/1024/1024<1?this.addFile(e):(this.$notify.info({title:e.name,message:"单张图片不得大于 1 MB 的限制"}),!1):(this.$notify.info({title:e.name,message:"只能上传 PNG / JPG / GIF 格式的图片"}),!1)}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-upload",{ref:"upload",attrs:{data:e.access,action:e.action,"file-list":e.fileList,"show-file-list":!1,accept:e.acceptTypes.join(","),"before-upload":e.beforeUpload,"on-progress":e.onProgress,"on-success":e.onSuccess,"on-error":e.onError}},[r("div",{staticClass:"icon-uploader"},[e.isUploading?r("span",[e._v(e._s(e.percent)+" %")]):e.files?r("img",{attrs:{src:e.files}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])},staticRenderFns:[]};var n=r("Aizv")(a,o,!1,function(e){r("HP/n")},"data-v-47353b44",null);t.a=n.exports},"0YyF":function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"1DW3":function(e,t){},"3Nuf":function(e,t){},"3SZ7":function(e,t,r){e.exports={default:r("X/Lc"),__esModule:!0}},"5BUm":function(e,t,r){"use strict";var a=r("3SZ7"),o=r.n(a),n=r("u6qr"),i=r.n(n),s=r("BGwB"),l=r("M05L"),c={components:{ContactsAdd:s.a,PhotosUploader:l.a},data:function(){return{dialogImageUrl:"",dialogVisible:!1,iconUrl:[],form:{purchase_intention:"",communicate_type:"1",communicate_remark:""},form_rules:{purchase_intention:[{required:!0,message:"请选择购买意向",trigger:"change"}],communicate_type:[{required:!0,message:"请选择跟进方式",trigger:"change"}],communicate_remark:[{required:!0,message:"跟进内容不能为空",trigger:"blur"}]},tableData:[],purchase_intention:[],communicate_type:[{value_id:"1",value_name:"电话跟进"},{value_id:"2",value_name:"上门拜访"},{value_id:"3",value_name:"来访接待"},{value_id:"4",value_name:"网络跟进"},{value_id:"5",value_name:"带看房源"},{value_id:"6",value_name:"活动邀约"},{value_id:"7",value_name:"其它"}],estateVal:[],estateLable:[],estate:[]}},props:{followData:{type:Object},isIntention:{type:Boolean,default:!0}},created:function(){var e=this;this.$https.all([this.getDic("crm_purchase_intention","purchase_intention")]).then(this.$https.spread(function(t,r){e.getDataList(),e.isIntention?e.form.purchase_intention=e.followData.type:e.form.purchase_intention="0",e.getProjects()}))},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getDataList:function(){var e=this;this.$https.get("/api/customer_communicate/list_customer_communicate?c_id="+this.followData.id).then(function(t){0==t.data.code?e.tableData=t.data.data:e.$message({type:"error",showClose:!0,message:t.data.message})})},getProjects:function(){var e=this;this.$https.get("/api/pms_base_projects/GetProjects",{params:{page:1,page_size:999}}).then(function(t){if(0==t.data.code){var r=!0,a=!1,o=void 0;try{for(var n,s=i()(t.data.data.Items);!(r=(n=s.next()).done);r=!0){var l=n.value,c={value:l.project_id,label:l.project_name,children:[]};e.estate.push(c)}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}else e.$message({type:"error",showClose:!0,message:t.data.message})})},getBuildings:function(e){var t=this;this.$https.get("/api/pms_base_buildings/GetBuildings",{params:{page:1,page_size:999,project_id:e}}).then(function(r){if(0==r.data.code){for(var a=0;a<t.estate.length;a++)if(t.estate[a].value===e){t.estate[a].children=[];var o=!0,n=!1,s=void 0;try{for(var l,c=i()(r.data.data.Items);!(o=(l=c.next()).done);o=!0){var m=l.value,u={value:m.building_id,label:m.building_name,children:[]};t.estate[a].children.push(u)}}catch(e){n=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw s}}}}else t.$message({type:"error",showClose:!0,message:r.data.message})})},getFloors:function(e,t){var r=this;this.$https.get("/api/pms_base_floors/GetFloors",{params:{page:1,page_size:999,building_id:t}}).then(function(a){if(0==a.data.code){for(var o=0;o<r.estate.length;o++)if(r.estate[o].value===e)for(var n=0;n<r.estate[o].children.length;n++)if(r.estate[o].children[n].value===t){r.estate[o].children[n].children=[];var s=!0,l=!1,c=void 0;try{for(var m,u=i()(a.data.data.Items);!(s=(m=u.next()).done);s=!0){var f=m.value,_={value:f.floor_id,label:f.floor_name,children:[]};r.estate[o].children[n].children.push(_)}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}}}else r.$message({type:"error",showClose:!0,message:a.data.message})})},getRooms:function(e,t,r){var a=this;this.$https.get("/api/pms_base_rooms/GetRooms",{params:{page:1,page_size:999,floor_id:r}}).then(function(o){if(0==o.data.code){for(var n=0;n<a.estate.length;n++)if(a.estate[n].value===e)for(var s=0;s<a.estate[n].children.length;s++)if(a.estate[n].children[s].value===t)for(var l=0;l<a.estate[n].children[s].children.length;l++)if(a.estate[n].children[s].children[l].value===r){a.estate[n].children[s].children[l].children=[];var c=!0,m=!1,u=void 0;try{for(var f,_=i()(o.data.data.Items);!(c=(f=_.next()).done);c=!0){var p=f.value,d={value:p.room_id,label:p.room_name};a.estate[n].children[s].children[l].children.push(d)}}catch(e){m=!0,u=e}finally{try{!c&&_.return&&_.return()}finally{if(m)throw u}}}}else a.$message({type:"error",showClose:!0,message:o.data.message})})},handleItemChange:function(e){var t=e.length;1===t?this.getBuildings(e[0]):2===t?this.getFloors(e[0],e[1]):3===t&&this.getRooms(e[0],e[1],e[2])},handleChange:function(){var e=this.getCascaderObj(this.estateVal,this.estate);if(0!==e.length){var t=e[0].label+"#"+e[1].label+"#"+e[2].label+"#"+e[3].label,r={cc_id:0,room_id:e[3].value,room_details:t};if(0!==this.estateLable.length){var a=[],o=!0,n=!1,s=void 0;try{for(var l,c=i()(this.estateLable);!(o=(l=c.next()).done);o=!0){var m=l.value;a.push(m.room_id)}}catch(e){n=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw s}}var u=a.length+1;-1===a.indexOf(r.room_id,-u)&&this.estateLable.push(r)}else this.estateLable.push(r)}},closeTag:function(e,t){this.estateLable.splice(t,1)},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r=JSON.parse(o()(e.form));if("5"===r.communicate_type){if(0===e.estateLable.length)return void e.$message({type:"error",showClose:!0,message:"请选择带看的房源"});r.list_customer_communicate_room=e.estateLable}r.c_id=e.followData.id,r.communicate_file=e.iconUrl.join(","),console.log(r),e.$https.post("/api/customer_communicate/create_customer_communicate",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"新增成功",duration:1e3,onClose:function(){e.getDataList(),e.form.communicate_type="1",e.form.communicate_remark="",e.iconUrl=[],e.estateLable=[],e.estateVal=[]}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},getDicVal:function(e,t){var r="",a=!0,o=!1,n=void 0;try{for(var s,l=i()(this[t]);!(a=(s=l.next()).done);a=!0){var c=s.value;e==c.value_id&&(r=c.value_name)}}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}return r},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","dialogFollowUp")}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"当前客户名："}},[r("p",[e._v(e._s(e.followData.name))])]),e._v(" "),e.isIntention?r("el-form-item",{attrs:{label:"购买意向：",prop:"purchase_intention"}},[r("el-select",{model:{value:e.form.purchase_intention,callback:function(t){e.$set(e.form,"purchase_intention",t)},expression:"form.purchase_intention"}},e._l(e.purchase_intention,function(t){return r("el-option",{key:t.value_id,attrs:{label:t.value_name,value:String(t.value_id)}},[e._v(e._s(t.value_name))])}))],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"跟进方式：",prop:"communicate_type"}},[r("el-radio-group",{model:{value:e.form.communicate_type,callback:function(t){e.$set(e.form,"communicate_type",t)},expression:"form.communicate_type"}},e._l(e.communicate_type,function(t){return r("el-radio",{key:t.value_id,attrs:{label:String(t.value_id)}},[e._v(e._s(t.value_name))])}))],1),e._v(" "),"5"===e.form.communicate_type?r("el-form-item",{attrs:{label:"带看房源："}},[r("div",[r("el-cascader",{attrs:{clearable:"",options:e.estate},on:{"active-item-change":e.handleItemChange,change:e.handleChange},model:{value:e.estateVal,callback:function(t){e.estateVal=t},expression:"estateVal"}})],1),e._v(" "),e._l(e.estateLable,function(t,a){return r("el-tag",{key:a,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(r){e.closeTag(t,a)}}},[e._v("\n                "+e._s(t.room_details)+"\n            ")])})],2):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"跟进内容：",prop:"communicate_remark"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.communicate_remark,callback:function(t){e.$set(e.form,"communicate_remark",t)},expression:"form.communicate_remark"}})],1),e._v(" "),r("el-form-item",[r("PhotosUploader",{staticClass:"avatar-uploader",attrs:{limit:9,files:e.iconUrl},on:{"update:files":function(t){e.iconUrl=t}}}),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1),e._v(" "),r("h3",{staticClass:"table_title"},[e._v("历史跟进记录：")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"created_user_name",label:"跟进人"}}),e._v(" "),r("el-table-column",{attrs:{label:"跟进方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getDicVal(t.row.communicate_type,"communicate_type"))+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"跟进内容",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",[e._v(e._s(t.row.communicate_remark))]),e._v(" "),""!==t.row.communicate_file?r("p",e._l(t.row.communicate_file.split(","),function(t,a){return r("a",{attrs:{href:t,target:"_blank"}},[e._v("图片"+e._s(a+1)+" ")])})):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"created_time",label:"跟进时间"}})],1)],1)},staticRenderFns:[]};var u=r("Aizv")(c,m,!1,function(e){r("fvnn")},"data-v-2041c2f3",null);t.a=u.exports},"607n":function(e,t){e.exports=function(e){return e instanceof Date}},"6Zhv":function(e,t,r){var a=r("xA5w");e.exports=function(e,t){var r=a(e).getTime(),o=Number(t);return new Date(r+o)}},"8tzn":function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r("Ky1r"))},"9REN":function(e,t,r){var a=r("tKe2"),o=r("E4qR"),n=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,m=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return n;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=l.test(e);return r||c.test(e)?m(e.slice(2),r?2:8):s.test(e)?n:+e}},"9jJK":function(e,t){},BGwB:function(e,t,r){"use strict";var a=r("3SZ7"),o=r.n(a),n={data:function(){return{form:{c_id:0,linkman_name:"",telephone:"",linkman_type:"1",linkman_sex:"1",identification_type:"",identification_number:"",remark:""},form_rules:{linkman_name:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"}],telephone:[{required:!0,message:"联系人电话不能为空",trigger:"blur"}]},identification_type:[],linkman_type:[{value_id:"1",value_name:"法定联系人"},{value_id:"2",value_name:"财务联系人"},{value_id:"3",value_name:"物业联系人"},{value_id:"4",value_name:"政务联系人"}]}},created:function(){this.$https.all([this.getDic("contact_card_type","identification_type")]).then(this.$https.spread(function(e,t){}))},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r=JSON.parse(o()(e.form));r.identification_type=""==e.form.identification_type?0:e.form.identification_type,r=o()(r),e.$message({type:"success",showClose:!0,message:"联系人新增成功",duration:1e3,onClose:function(){e.closeDialog("dialogContactsAdd"),e.$emit("parentSetContactsList",r)}})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},closeDialog:function(e){e?this.$emit("closeThisDialog",e):(this.$emit("closeThisDialog","dialogContactsAdd"),this.$emit("closeThisDialog","dialogContactsEdit"))}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"联系人姓名",prop:"linkman_name"}},[r("el-input",{model:{value:e.form.linkman_name,callback:function(t){e.$set(e.form,"linkman_name",t)},expression:"form.linkman_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[r("el-input",{model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.linkman_sex,callback:function(t){e.$set(e.form,"linkman_sex",t)},expression:"form.linkman_sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"证件类型"}},[r("el-select",{model:{value:e.form.identification_type,callback:function(t){e.$set(e.form,"identification_type",t)},expression:"form.identification_type"}},e._l(e.identification_type,function(t){return r("el-option",{key:t.value_id,attrs:{label:t.value_name,value:t.value_id}},[e._v(e._s(t.value_name))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"证件号码"}},[r("el-input",{model:{value:e.form.identification_number,callback:function(t){e.$set(e.form,"identification_number",t)},expression:"form.identification_number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系人类型"}},[r("el-radio-group",{model:{value:e.form.linkman_type,callback:function(t){e.$set(e.form,"linkman_type",t)},expression:"form.linkman_type"}},e._l(e.linkman_type,function(t){return r("el-radio",{key:t.value_id,attrs:{label:String(t.value_id)}},[e._v(e._s(t.value_name))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),r("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=r("Aizv")(n,i,!1,function(e){r("1DW3")},"data-v-3f9efee2",null);t.a=s.exports},CBWy:function(e,t,r){"use strict";var a=r("JSQk");e.exports=function(e,t){var r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=2097152,n=Math.ceil(e.size/o),i=0,s=new a.ArrayBuffer,l=new FileReader;function c(){var t=i*o,a=t+o>=e.size?e.size:t+o;l.readAsArrayBuffer(r.call(e,t,a))}c(),l.onloadend=function(e){s.append(e.target.result),++i<n?c():t(null,s.end())},l.onerror=function(){t("oops, something went wrong.")}}},DcBU:function(e,t){},E4qR:function(e,t,r){var a=r("QvAU"),o=r("0YyF"),n="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&a(e)==n}},Fz0F:function(e,t){},"HP/n":function(e,t){},Idi2:function(e,t,r){"use strict";var a=r("3SZ7"),o=r.n(a),n={props:{resourceData:{type:Object}},data:function(){return{form:{follow_content:"",resource_id:"",resource_name:""}}},created:function(){this.form.resource_id=this.resourceData.id,this.form.resource_name=this.resourceData.name},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r=JSON.parse(o()(e.form));e.$https.post("/api/rent_base_resources/CreateFollow",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","dialogFollowUpAdd")}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"带看房源"}},[r("p",[e._v(e._s(e.form.resource_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"跟进内容",prop:"follow_content"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.follow_content,callback:function(t){e.$set(e.form,"follow_content",t)},expression:"form.follow_content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s={components:{FollowUpAdd:r("Aizv")(n,i,!1,function(e){r("MBN5")},"data-v-54d1f65e",null).exports},props:{resourceData:{type:Object}},data:function(){return{editId:null,pageIndex:1,pageSize:10,dataTotal:0,loading:!0,tableData:[],dialogFollowUpAdd:!1}},created:function(){this.resourceData?this.getDataList():alert("未能获取到您所要查询的盘源信息")},watch:{},methods:{pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()},closeDialog:function(e){this[e]=!1},getDataList:function(){var e=this;this.$https.get("/api/rent_base_resources/GetFollows",{params:{page:this.pageIndex,page_size:this.pageSize,resource_id:this.resourceData.id}}).then(function(t){0==t.data.code?(e.tableData=t.data.data.Items,e.dataTotal=t.data.data.Total,e.loading=!1):e.$message({type:"error",showClose:!0,message:t.data.message})})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"clearfix"},[r("span",[e._v("房源："+e._s(e.resourceData.name))]),e._v(" "),r("el-button-group",{staticStyle:{float:"right"}},[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogFollowUpAdd=!0}}},[e._v("新增跟进记录")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"follow_content",label:"跟进内容",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"follow_time",label:"跟进时间"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_user_name",label:"跟进人"}})],1),e._v(" "),r("div",{staticClass:"text-center m-t"},[e.dataTotal>10?r("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}}):e._e()],1),e._v(" "),e.dialogFollowUpAdd?r("el-dialog",{attrs:{title:"新增跟进记录",visible:e.dialogFollowUpAdd,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.dialogFollowUpAdd=t}}},[r("FollowUpAdd",{attrs:{resourceData:e.resourceData},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e()],1)},staticRenderFns:[]};var c=r("Aizv")(s,l,!1,function(e){r("rb6h")},"data-v-730620da",null);t.a=c.exports},JSQk:function(e,t,r){var a;a=function(e){"use strict";var t=function(e,t){return e+t&4294967295},r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(e,r,a,o,n,i){return r=t(t(r,e),t(o,i)),t(r<<n|r>>>32-n,a)}function o(e,t,r,o,n,i,s){return a(t&r|~t&o,e,t,n,i,s)}function n(e,t,r,o,n,i,s){return a(t&o|r&~o,e,t,n,i,s)}function i(e,t,r,o,n,i,s){return a(t^r^o,e,t,n,i,s)}function s(e,t,r,o,n,i,s){return a(r^(t|~o),e,t,n,i,s)}function l(e,r){var a=e[0],l=e[1],c=e[2],m=e[3];l=s(l=s(l=s(l=s(l=i(l=i(l=i(l=i(l=n(l=n(l=n(l=n(l=o(l=o(l=o(l=o(l,c=o(c,m=o(m,a=o(a,l,c,m,r[0],7,-680876936),l,c,r[1],12,-389564586),a,l,r[2],17,606105819),m,a,r[3],22,-1044525330),c=o(c,m=o(m,a=o(a,l,c,m,r[4],7,-176418897),l,c,r[5],12,1200080426),a,l,r[6],17,-1473231341),m,a,r[7],22,-45705983),c=o(c,m=o(m,a=o(a,l,c,m,r[8],7,1770035416),l,c,r[9],12,-1958414417),a,l,r[10],17,-42063),m,a,r[11],22,-1990404162),c=o(c,m=o(m,a=o(a,l,c,m,r[12],7,1804603682),l,c,r[13],12,-40341101),a,l,r[14],17,-1502002290),m,a,r[15],22,1236535329),c=n(c,m=n(m,a=n(a,l,c,m,r[1],5,-165796510),l,c,r[6],9,-1069501632),a,l,r[11],14,643717713),m,a,r[0],20,-373897302),c=n(c,m=n(m,a=n(a,l,c,m,r[5],5,-701558691),l,c,r[10],9,38016083),a,l,r[15],14,-660478335),m,a,r[4],20,-405537848),c=n(c,m=n(m,a=n(a,l,c,m,r[9],5,568446438),l,c,r[14],9,-1019803690),a,l,r[3],14,-187363961),m,a,r[8],20,1163531501),c=n(c,m=n(m,a=n(a,l,c,m,r[13],5,-1444681467),l,c,r[2],9,-51403784),a,l,r[7],14,1735328473),m,a,r[12],20,-1926607734),c=i(c,m=i(m,a=i(a,l,c,m,r[5],4,-378558),l,c,r[8],11,-2022574463),a,l,r[11],16,1839030562),m,a,r[14],23,-35309556),c=i(c,m=i(m,a=i(a,l,c,m,r[1],4,-1530992060),l,c,r[4],11,1272893353),a,l,r[7],16,-155497632),m,a,r[10],23,-1094730640),c=i(c,m=i(m,a=i(a,l,c,m,r[13],4,681279174),l,c,r[0],11,-358537222),a,l,r[3],16,-722521979),m,a,r[6],23,76029189),c=i(c,m=i(m,a=i(a,l,c,m,r[9],4,-640364487),l,c,r[12],11,-421815835),a,l,r[15],16,530742520),m,a,r[2],23,-995338651),c=s(c,m=s(m,a=s(a,l,c,m,r[0],6,-198630844),l,c,r[7],10,1126891415),a,l,r[14],15,-1416354905),m,a,r[5],21,-57434055),c=s(c,m=s(m,a=s(a,l,c,m,r[12],6,1700485571),l,c,r[3],10,-1894986606),a,l,r[10],15,-1051523),m,a,r[1],21,-2054922799),c=s(c,m=s(m,a=s(a,l,c,m,r[8],6,1873313359),l,c,r[15],10,-30611744),a,l,r[6],15,-1560198380),m,a,r[13],21,1309151649),c=s(c,m=s(m,a=s(a,l,c,m,r[4],6,-145523070),l,c,r[11],10,-1120210379),a,l,r[2],15,718787259),m,a,r[9],21,-343485551),e[0]=t(a,e[0]),e[1]=t(l,e[1]),e[2]=t(c,e[2]),e[3]=t(m,e[3])}function c(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function m(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function u(e){var t,r,a,o,n,i,s=e.length,m=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(m,c(e.substring(t-64,t)));for(r=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(l(m,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),i=parseInt(o[1],16)||0,a[14]=n,a[15]=i,l(m,a),m}function f(e){var t,a="";for(t=0;t<4;t+=1)a+=r[e>>8*t+4&15]+r[e>>8*t&15];return a}function _(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function p(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function d(e){var t,r=[],a=e.length;for(t=0;t<a-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function h(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==_(u("hello"))&&(t=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,a){var o,n,i,s,l=this.byteLength,c=t(r,l),m=l;return a!==e&&(m=t(a,l)),c>m?new ArrayBuffer(0):(o=m-c,n=new ArrayBuffer(o),i=new Uint8Array(n),s=new Uint8Array(this,c,o),i.set(s),n)}}(),h.prototype.append=function(e){return this.appendBinary(p(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)l(this._hash,c(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,r,a=this._buff,o=a.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)n[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(n,o),r=_(this._hash),e&&(r=d(r)),this.reset(),r},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var r,a,o,n=t;if(e[n>>2]|=128<<(n%4<<3),n>55)for(l(this._hash,e),n=0;n<16;n+=1)e[n]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=a,e[15]=o,l(this._hash,e)},h.hash=function(e,t){return h.hashBinary(p(e),t)},h.hashBinary=function(e,t){var r=_(u(e));return t?d(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,r,a,o,n,i=(r=this._buff.buffer,a=e,o=!0,(n=new Uint8Array(r.byteLength+a.byteLength)).set(new Uint8Array(r)),n.set(new Uint8Array(a),r.byteLength),o?n:n.buffer),s=i.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)l(this._hash,m(i.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(i.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,r,a=this._buff,o=a.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)n[t>>2]|=a[t]<<(t%4<<3);return this._finish(n,o),r=_(this._hash),e&&(r=d(r)),this.reset(),r},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e,t=h.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},h.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,a=e.length,o=new ArrayBuffer(a),n=new Uint8Array(o);for(r=0;r<a;r+=1)n[r]=e.charCodeAt(r);return t?n:o}(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var r=_(function(e){var t,r,a,o,n,i,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(c,m(e.subarray(t-64,t)));for(r=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(l(c,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),i=parseInt(o[1],16)||0,a[14]=n,a[15]=i,l(c,a),c}(new Uint8Array(e)));return t?d(r):r},h},e.exports=a()},KLe2:function(e,t,r){var a=r("tKe2"),o=r("dKAV"),n=r("9REN"),i="Expected a function",s=Math.max,l=Math.min;e.exports=function(e,t,r){var c,m,u,f,_,p,d=0,h=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var r=c,a=m;return c=m=void 0,d=t,f=e.apply(a,r)}function y(e){var r=e-p;return void 0===p||r>=t||r<0||v&&e-d>=u}function w(){var e=o();if(y(e))return x(e);_=setTimeout(w,function(e){var r=t-(e-p);return v?l(r,u-(e-d)):r}(e))}function x(e){return _=void 0,g&&c?b(e):(c=m=void 0,f)}function $(){var e=o(),r=y(e);if(c=arguments,m=this,p=e,r){if(void 0===_)return function(e){return d=e,_=setTimeout(w,t),h?b(e):f}(p);if(v)return _=setTimeout(w,t),b(p)}return void 0===_&&(_=setTimeout(w,t)),f}return t=n(t)||0,a(r)&&(h=!!r.leading,u=(v="maxWait"in r)?s(n(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),$.cancel=function(){void 0!==_&&clearTimeout(_),d=0,c=p=m=_=void 0},$.flush=function(){return void 0===_?f:x(o())},$}},M05L:function(e,t,r){"use strict";var a={mixins:[r("hoPp").a],data:function(){return{acceptTypes:["image/png","image/jpeg","image/gif"]}},methods:{beforeUpload:function(e){return this.acceptTypes.includes(e.type)?e.size/1024/1024<1?this.addFile(e):(this.$notify.info({title:e.name,message:"单张图片不得大于 1 MB 的限制"}),!1):(this.$notify.info({title:e.name,message:"只能上传 PNG / JPG / GIF 格式的图片"}),!1)},handleExceed:function(e,t){this.$message.warning("当前限制选择 "+this.limit+" 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-upload",{ref:"upload",attrs:{"list-type":"picture-card",multiple:"",limit:e.limit,action:e.action,data:e.access,"file-list":e.fileList,accept:e.acceptTypes.join(","),"before-upload":e.beforeUpload,"on-exceed":e.handleExceed,"on-remove":e.onRemove,"on-progress":e.onProgress,"on-success":e.onSuccess,"on-error":e.onError}},[r("i",{staticClass:"el-icon-plus"})])},staticRenderFns:[]};var n=r("Aizv")(a,o,!1,function(e){r("MLab")},"data-v-6a040f02",null);t.a=n.exports},MBN5:function(e,t){},MLab:function(e,t){},QvAU:function(e,t,r){var a=r("gHB6"),o=r("boJ2"),n=r("aGzm"),i="[object Null]",s="[object Undefined]",l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:i:l&&l in Object(e)?o(e):n(e)}},"X/Lc":function(e,t,r){var a=r("Df2F"),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},Yp0Q:function(e,t,r){"use strict";var a=r("u6qr"),o=r.n(a),n={data:function(){return{house_type:"0",form:{resource_name:"",city:"",region:"",building:"",roomno:"",unit:"",floor:"",addr:"",period:"",room_id:"",room_unit:"",room_decoration:"",room_toward:"",built_area:"",usable_area:"",room_feature:"",building_age:"",manage_cost:"",property_right:"",come_from:"",brokerage:"",expiration:"",check_way:"",entrust_way:"",rent_charge1:"",rent_charge2:"",sale_charge1:"",sale_charge2:"",base_charge:"",status:"0",uid1:0,user_name1:"",user_mobile1:"",remark1:"",uid2:0,user_name2:"",user_mobile2:"",remark2:""},room_decoration:[],room_feature:[],room_toward:[],room_unit:[],estateVal:[],estate:[]}},props:{id:{type:Number}},created:function(){var e=this;this.$https.all([this.getDic("pms_type_decoration","room_decoration"),this.getDic("pms_type_roomfunc","room_feature"),this.getDic("pms_type_direction","room_toward"),this.getDic("pms_type_unit","room_unit")]).then(this.$https.spread(function(t,r){e.id&&e.getOldData()}))},watch:{},methods:{getOldData:function(){var e=this;this.$https.get("/api/rent_base_resources/GetResource?resource_id="+this.id).then(function(t){if(0==t.data.code){var r=t.data.data;if(r.room_id?(e.form.room_id=r.room_id,e.form.resource_name=r.resource_name):(e.house_type="1",e.form.resource_name=r.resource_name,e.form.city=r.city,e.form.region=r.region,e.form.building=r.building,e.form.roomno=r.roomno,e.form.unit=r.unit,e.form.floor=r.floor,e.form.addr=r.addr,e.form.period=r.period),e.form.room_unit=r.room_unit.toString(),e.form.room_decoration=r.room_decoration.toString(),e.form.room_toward=r.room_toward.toString(),e.form.built_area=0==r.built_area?"":r.built_area.toString(),e.form.usable_area=0==r.usable_area?"":r.usable_area.toString(),e.form.room_feature=r.room_feature.toString(),console.log(e.form.room_feature),e.form.building_age=r.building_age,e.form.manage_cost=r.manage_cost,e.form.property_right=r.property_right,e.form.come_from=r.come_from,e.form.brokerage=r.brokerage,e.form.expiration=r.expiration,e.form.check_way=r.check_way,e.form.entrust_way=r.entrust_way,(r.rent_charge||"~"!==r.rent_charge)&&(e.form.rent_charge=r.rent_charge),(r.sale_charge||"~"!==r.sale_charge)&&(e.form.sale_charge=r.sale_charge),e.form.base_charge=r.base_charge,e.form.status=r.status,r.resource_users||0!==r.resource_users.length){var a=!0,n=!1,i=void 0;try{for(var s,l=o()(r.resource_users);!(a=(s=l.next()).done);a=!0){var c=s.value;1===c.user_type?(e.form.uid1=c.uid,e.form.user_name1=c.user_name,e.form.user_mobile1=c.user_mobile,e.form.remark1=c.remark):(e.form.uid2=c.uid,e.form.user_name2=c.user_name,e.form.user_mobile2=c.user_mobile,e.form.remark2=c.remark)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}}else e.$message({type:"error",showClose:!0,message:t.data.message})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogRentingAdd"),this.$emit("closeDialog","dialogRentingEdit"))},getDicVals:function(e,t){var r=[],a=e.toString().split(","),n=!0,i=!1,s=void 0;try{for(var l,c=o()(a);!(n=(l=c.next()).done);n=!0){var m=l.value,u=!0,f=!1,_=void 0;try{for(var p,d=o()(this[t]);!(u=(p=d.next()).done);u=!0){var h=p.value;m==h.value_id&&r.push(h.value_name)}}catch(e){f=!0,_=e}finally{try{!u&&d.return&&d.return()}finally{if(f)throw _}}}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}return r.join(", ")}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-tabs",{attrs:{value:e.house_type,type:"card"}},["0"===e.house_type?r("el-tab-pane",{attrs:{label:"园区内房源",name:"0"}}):r("el-tab-pane",{attrs:{label:"园区外房源",name:"1"}})],1),e._v(" "),r("el-form",{ref:"form",attrs:{":model":e.form,"label-width":"100px",size:"small","label-suffix":"："}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.house_type&&e.id,expression:"house_type === '0' && id"}],attrs:{label:"房源"}},[r("p",[e._v(e._s(e.form.resource_name))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.house_type,expression:"house_type === '1'"}]},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"城区"}},[r("p",[e._v(e._s(e.form.city))])])],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"片区"}},[r("p",[e._v(e._s(e.form.region))])])],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"物业名"}},[r("p",[e._v(e._s(e.form.resource_name))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"楼栋"}},[r("p",[e._v(e._s(e.form.building))])])],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"单元"}},[r("p",[e._v(e._s(e.form.unit))])])],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"楼层"}},[r("p",[e._v(e._s(e.form.floor))])])],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"房号"}},[r("p",[e._v(e._s(e.form.roomno))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{label:"地址"}},[r("p",[e._v(e._s(e.form.addr))])])],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"期数"}},[r("p",[e._v(e._s(e.form.period))])])],1)],1)],1),e._v(" "),r("div",{staticClass:"hr-line-dashed"}),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"户型"}},[r("p",[e._v(e._s(e.getDicVals(e.form.room_unit,"room_unit")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"装修"}},[r("p",[e._v(e._s(e.getDicVals(e.form.room_decoration,"room_decoration")))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"朝向"}},[r("p",[e._v(e._s(e.getDicVals(e.form.room_toward,"room_toward")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"房间功能",prop:"room_feature"}},[r("p",[e._v(e._s(e.getDicVals(e.form.room_feature,"room_feature")))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建筑面积"}},[r("p",[e._v(e._s(e.form.built_area)+" 平米")])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"使用面积"}},[r("p",[e._v(e._s(e.form.usable_area)+" 平米")])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建筑年代"}},[r("p",[e._v(e._s(e.form.building_age))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"管理费"}},[r("p",[e._v(e._s(e.form.manage_cost)+" 元/平米")])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"产权"}},[r("p",[e._v(e._s(e.form.property_right))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"来源"}},[r("p",[e._v(e._s(e.form.come_from))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"收佣情况"}},[r("p",[e._v(e._s(e.form.brokerage))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"到期时间"}},[r("p",[e._v(e._s(e.form.expiration))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"看房方式"}},[r("p",[e._v(e._s(e.form.check_way))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"委托方式"}},[r("p",[e._v(e._s(e.form.entrust_way))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"状态"}},[0===e.form.status?r("p",[e._v("可租")]):1===e.form.status?r("p",[e._v("可售")]):2===e.form.status?r("p",[e._v("租售")]):3===e.form.status?r("p",[e._v("已租")]):4===e.form.status?r("p",[e._v("已售")]):5===e.form.status?r("p",[e._v("被成交")]):6===e.form.status?r("p",[e._v("被成交")]):r("p")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"租价"}},[r("p",[e._v(e._s(e.form.rent_charge)+" 元/平米")])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"售价"}},[r("p",[e._v(e._s(e.form.sale_charge)+" 元/平米")])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"底价"}},[r("p",[e._v(e._s(e.form.base_charge)+" 元/平米")])])],1)],1),e._v(" "),r("div",{staticClass:"hr-line-dashed"}),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("table",{staticClass:"renting-details-table"},[r("tr",[r("td",{attrs:{width:"100"}}),e._v(" "),r("td",[e._v("姓名")]),e._v(" "),r("td",[e._v("联系电话")]),e._v(" "),r("td",[e._v("备注")])]),e._v(" "),r("tr",[r("td",[e._v("业主")]),e._v(" "),r("td",[e._v(e._s(e.form.user_name1))]),e._v(" "),r("td",[e._v(e._s(e.form.user_mobile1))]),e._v(" "),r("td",[e._v(e._s(e.form.remark1))])]),e._v(" "),r("tr",[r("td",[e._v("联系人")]),e._v(" "),r("td",[e._v(e._s(e.form.user_name2))]),e._v(" "),r("td",[e._v(e._s(e.form.user_mobile2))]),e._v(" "),r("td",[e._v(e._s(e.form.remark2))])])])])],1)],1)],1)},staticRenderFns:[]};var s=r("Aizv")(n,i,!1,function(e){r("DcBU")},"data-v-4555c116",null);t.a=s.exports},aGzm:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},boJ2:function(e,t,r){var a=r("gHB6"),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var t=n.call(e,s),r=e[s];try{e[s]=void 0;var a=!0}catch(e){}var o=i.call(e);return a&&(t?e[s]=r:delete e[s]),o}},dKAV:function(e,t,r){var a=r("kE/M");e.exports=function(){return a.Date.now()}},eYlF:function(e,t,r){"use strict";var a=r("3SZ7"),o=r.n(a),n={props:{resourceData:{type:Object}},data:function(){return{form:{customer_name:"",view_date:"",customer_id:"",customer_mobile:"",view_result:"",resource_id:"",resource_name:""},rules:{customer_id:[{required:!0,message:"请选择客户",trigger:"blur"}],view_date:[{required:!0,message:"请选择带看日期",trigger:"change"}],view_result:[{required:!0,message:"请输入看房情况",trigger:"blur"}]},myCustomers:[]}},created:function(){this.form.resource_id=this.resourceData.id,this.form.resource_name=this.resourceData.name;this.$https.all([this.getMyCustomer()]).then(this.$https.spread(function(e,t){}))},methods:{getMyCustomer:function(){var e=this;this.$https.get("/api/Customer/page",{params:{currentPage:1,pageSize:9999,customer_classify:999,user_id:-2}}).then(function(t){0==t.data.code?e.myCustomers=t.data.data.Items:e.$message({type:"error",showClose:!0,message:t.data.message})})},changeCustomer:function(e){var t;t=this.myCustomers.find(function(t){return t.c_id===e}),console.log(t),console.log(this.form),this.form.customer_name=t.customer_name,this.form.customer_mobile=t.telephone},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r=JSON.parse(o()(e.form));console.log(e.form),e.$https.post("/api/rent_base_resources/CreateView",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog(),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","dialogGetViewsAdd")}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"带看房源"}},[r("p",[e._v(e._s(e.form.resource_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"客户名称",prop:"customer_id"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择客户"},on:{change:e.changeCustomer},model:{value:e.form.customer_id,callback:function(t){e.$set(e.form,"customer_id",t)},expression:"form.customer_id"}},e._l(e.myCustomers,function(e){return r("el-option",{key:e.c_id,attrs:{label:e.customer_name,value:e.c_id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"看房情况",prop:"view_result"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.view_result,callback:function(t){e.$set(e.form,"view_result",t)},expression:"form.view_result"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"带看日期",prop:"view_date"}},[r("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.form.view_date,callback:function(t){e.$set(e.form,"view_date",t)},expression:"form.view_date"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s={components:{GetViewsAdd:r("Aizv")(n,i,!1,function(e){r("q9Vr")},"data-v-04fa1c57",null).exports,Details:r("zGNL").a},props:{resourceData:{type:Object}},data:function(){return{editId:null,pageIndex:1,pageSize:10,dataTotal:0,loading:!0,tableData:[],dialogGetViewsAdd:!1,dialogDetails:!1}},created:function(){this.resourceData?this.getDataList():alert("未能获取到您所要查询的盘源信息")},watch:{},methods:{pageSizeChange:function(e){this.pageSize=e,this.getDataList()},pageIndexChange:function(e){this.pageIndex=e,this.getDataList()},closeDialog:function(e){this[e]=!1},openDetails:function(e){this.editId=Number(e),this.dialogDetails=!0},getDataList:function(){var e=this;this.$https.get("/api/rent_base_resources/GetViews",{params:{page:this.pageIndex,page_size:this.pageSize,resource_id:this.resourceData.id}}).then(function(t){0==t.data.code?(e.tableData=t.data.data.Items,e.dataTotal=t.data.data.Total,e.loading=!1):e.$message({type:"error",showClose:!0,message:t.data.message})})},formatterDate:function(e,t){var r=new Date(e.view_date),a=r.getFullYear();a=a<10?"0"+a:a;var o=r.getMonth()+1;o=o<10?"0"+o:o;var n=r.getDate();return a+"-"+o+"-"+(n=n<10?"0"+n:n)}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"clearfix"},[r("span",[e._v("房源："+e._s(e.resourceData.name))]),e._v(" "),r("el-button-group",{staticStyle:{float:"right"}},[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogGetViewsAdd=!0}}},[e._v("新增带看记录")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{attrs:{href:"javascript:;"},on:{click:function(r){e.openDetails(t.row.customer_id)}}},[e._v(e._s(t.row.customer_name)+"（"+e._s(t.row.customer_mobile)+"）")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"view_result",label:"看房情况",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"view_date",label:"带看日期",formatter:e.formatterDate}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_user_name",label:"带看人"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_time",label:"录入时间"}})],1),e._v(" "),r("div",{staticClass:"text-center m-t"},[e.dataTotal>10?r("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.pageSizeChange,"current-change":e.pageIndexChange}}):e._e()],1),e._v(" "),e.dialogGetViewsAdd?r("el-dialog",{attrs:{title:"新增带看记录",visible:e.dialogGetViewsAdd,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.dialogGetViewsAdd=t}}},[r("GetViewsAdd",{attrs:{resourceData:e.resourceData},on:{closeDialog:e.closeDialog,parentGetDataList:e.getDataList}})],1):e._e(),e._v(" "),e.dialogDetails?r("el-dialog",{attrs:{title:"客户详情",visible:e.dialogDetails,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.dialogDetails=t}}},[r("Details",{attrs:{id:e.editId},on:{closeDialog:e.closeDialog}})],1):e._e()],1)},staticRenderFns:[]};var c=r("Aizv")(s,l,!1,function(e){r("9jJK")},"data-v-c0440ecc",null);t.a=c.exports},fvnn:function(e,t){},gHB6:function(e,t,r){var a=r("kE/M").Symbol;e.exports=a},hoPp:function(e,t,r){"use strict";var a=r("Edqs"),o=r.n(a),n=r("UIuv"),i=r.n(n),s=r("mTx5"),l=r.n(s),c=r("KLe2"),m=r.n(c),u=r("iVxu"),f=r.n(u),_=r("nfOx"),p=r.n(_),d=r("mtWM"),h=r.n(d),v=function(e){return"string"==typeof e},g={dir:"sales",host:"",expiretime:"",policy:"",signature:"",OSSAccessKeyId:""};function b(){return h.a.get("http://dev.crm.zhiling.net.cn/api/Ali/Sign").then(function(e){o()(g,e.data.data)})}function y(){return i.a.resolve()}t.a={props:{files:{type:[String,Array],required:!0},limit:{type:[Number],default:9}},data:function(){return{oss:g,key:"",percent:0,taskQueue:[],isUploading:!1,fileList:[]}},computed:{action:function(){return g.host},access:function(){return{key:this.key,policy:g.policy,signature:g.signature,OSSAccessKeyId:g.OSSAccessKeyId,success_action_status:201}}},watch:{files:{handler:function(e){v(e)&&(e=[e]),this.fileList=e.map(function(e,t){return{name:""+t,url:e}})},immediate:!0},isUploading:function(e){var t=this;e||this.$nextTick(function(){t.syncUploadFiles()})}},methods:{syncUploadFiles:function(){var e=this.$refs.upload.uploadFiles.map(function(e){return e.url}).filter(function(e){return e.startsWith("http")});this.$emit("update:files",v(this.files)?e.slice(-1)[0]||"":e)},onProgress:function(e){var t=e.percent;console.log("上传进度",t),this.percent=~~t},onSuccess:function(e,t,r){var a=this.nextFile();t.url=a},onRemove:m()(function(){var e=this;this.isUploading?setTimeout(function(){return e.onRemove},1e3):this.syncUploadFiles()},250),onError:function(){this.isUploading=!1,this.$message.warning("上传功能出了点问题，请重试")},addFile:function(e){var t=this;return new i.a(function(r){t.taskQueue.push({file:e,start:r}),t.isUploading||(t.isUploading=!0,t.nextFile(!0))})},nextFile:function(e){var t=this,r=void 0;e||(r=l()(this.action,this.key)),e||console.info("上传成功：",r);var a=this.taskQueue;if(a.length){var o=void 0;(+p()(new Date,10)>+g.expiretime?b:y)().then(function(){return o=a.shift(),e=o.file,new i.a(function(t,r){f()(e,function(a,o){a?r(a):t(l()(g.dir,o+"."+e.name.split(".").pop()))})});var e}).then(function(e){t.key=e,t.$nextTick(function(){o.start()})}).catch(function(e){return console.warn(e)})}else this.isUploading=!1;return r}}}},iVxu:function(e,t,r){e.exports=r("CBWy")},"ie+Y":function(e,t,r){"use strict";var a=r("u6qr"),o=r.n(a),n=r("BGwB"),i=r("M05L"),s={components:{ContactsAdd:n.a,PhotosUploader:i.a},data:function(){return{form:{user_id:""},form_rules:{user_id:[{required:!0,message:"请选择业务员",trigger:"change"}]},tableData:[],purchase_intention:[],usersAll:[]}},props:{users:{type:Array}},created:function(){var e=this;this.$https.all([this.getDic("crm_purchase_intention","purchase_intention"),this.getUsersAll()]).then(this.$https.spread(function(t,r){e.tableData=e.users,console.log(e.tableData)}))},methods:{getUsersAll:function(){var e=this;this.$https.get("/api/Account/list_users_all").then(function(t){0==t.data.code?e.usersAll=t.data.data:e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r={user_id:e.form.user_id},a=[],n=!0,i=!1,s=void 0;try{for(var l,c=o()(e.users);!(n=(l=c.next()).done);n=!0){var m=l.value;a.push(m.c_id)}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}r.list_c_id=a,e.$https.post("/api/Customer/update_customer_user_id",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"选中客户业务员变更成功",duration:1500,onClose:function(){e.closeDialog("dialogChangeSalesman"),e.$emit("parentSetContactsList",r)}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},getDicVal:function(e,t){var r="",a=!0,n=!1,i=void 0;try{for(var s,l=o()(this[t]);!(a=(s=l.next()).done);a=!0){var c=s.value;e==c.value_id&&(r=c.value_name)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}return r},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","dialogChangeSalesman")}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"业务员变更为：",prop:"user_id"}},[r("el-select",{model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.usersAll,function(t){return r("el-option",{key:t.user_id,attrs:{label:t.user_name,value:String(t.user_id)}},[e._v(e._s(t.user_name))])}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1),e._v(" "),r("h3",{staticClass:"table_title"},[e._v("已选中客户：")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"c_id",label:"ID",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"enterprise_name",label:"公司名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"customer_name",label:"联系人姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"telephone",label:"联系电话"}}),e._v(" "),r("el-table-column",{attrs:{label:"购买意向"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getDicVal(t.row.purchase_intention,"purchase_intention"))+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"user_name",label:"原业务员"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_time",label:"创建时间"}})],1)],1)},staticRenderFns:[]};var c=r("Aizv")(s,l,!1,function(e){r("Fz0F")},"data-v-5f906a90",null);t.a=c.exports},"kE/M":function(e,t,r){var a=r("8tzn"),o="object"==typeof self&&self&&self.Object===Object&&self,n=a||o||Function("return this")();e.exports=n},mTx5:function(e,t,r){var a,o,n;n=function(){return function(){return function(e){var t=[];if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<e.length;a++){var o=e[a];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(a>0&&(o=o.replace(/^[\/]+/,"")),o=a<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var n=t.join("/"),i=(n=n.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return n=i.shift()+(i.length>0?"?":"")+i.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},void 0!==e&&e.exports?e.exports=n():void 0===(o="function"==typeof(a=n)?a.call(t,r,t,e):a)||(e.exports=o)},mZqt:function(e,t){},nfOx:function(e,t,r){var a=r("6Zhv");e.exports=function(e,t){var r=Number(t);return a(e,1e3*r)}},q9Vr:function(e,t){},rb6h:function(e,t){},tKe2:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},xA5w:function(e,t,r){var a=r("607n"),o=36e5,n=6e4,i=2,s=/[T ]/,l=/:/,c=/^(\d{2})$/,m=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],u=/^(\d{4})/,f=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],_=/^-(\d{2})$/,p=/^-?(\d{3})$/,d=/^-?(\d{2})-?(\d{2})$/,h=/^-?W(\d{2})$/,v=/^-?W(\d{2})-?(\d{1})$/,g=/^(\d{2}([.,]\d*)?)$/,b=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,w=/([Z+-].*)$/,x=/^(Z)$/,$=/^([+-])(\d{2})$/,k=/^([+-])(\d{2}):?(\d{2})$/;function D(e,t,r){t=t||0,r=r||0;var a=new Date(0);a.setUTCFullYear(e,0,4);var o=7*t+r+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+o),a}e.exports=function(e,t){if(a(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var r=(t||{}).additionalDigits;r=null==r?i:Number(r);var C=function(e){var t,r={},a=e.split(s);if(l.test(a[0])?(r.date=null,t=a[0]):(r.date=a[0],t=a[1]),t){var o=w.exec(t);o?(r.time=t.replace(o[1],""),r.timezone=o[1]):r.time=t}return r}(e),S=function(e,t){var r,a=m[t],o=f[t];if(r=u.exec(e)||o.exec(e)){var n=r[1];return{year:parseInt(n,10),restDateString:e.slice(n.length)}}if(r=c.exec(e)||a.exec(e)){var i=r[1];return{year:100*parseInt(i,10),restDateString:e.slice(i.length)}}return{year:null}}(C.date,r),A=S.year,z=function(e,t){if(null===t)return null;var r,a,o,n;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(r=_.exec(e))return a=new Date(0),o=parseInt(r[1],10)-1,a.setUTCFullYear(t,o),a;if(r=p.exec(e)){a=new Date(0);var i=parseInt(r[1],10);return a.setUTCFullYear(t,0,i),a}if(r=d.exec(e)){a=new Date(0),o=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return a.setUTCFullYear(t,o,s),a}if(r=h.exec(e))return n=parseInt(r[1],10)-1,D(t,n);if(r=v.exec(e)){n=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return D(t,n,l)}return null}(S.restDateString,A);if(z){var I,F=z.getTime(),U=0;return C.time&&(U=function(e){var t,r,a;if(t=g.exec(e))return(r=parseFloat(t[1].replace(",",".")))%24*o;if(t=b.exec(e))return r=parseInt(t[1],10),a=parseFloat(t[2].replace(",",".")),r%24*o+a*n;if(t=y.exec(e)){r=parseInt(t[1],10),a=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return r%24*o+a*n+1e3*i}return null}(C.time)),C.timezone?(V=C.timezone,I=(j=x.exec(V))?0:(j=$.exec(V))?(L=60*parseInt(j[2],10),"+"===j[1]?-L:L):(j=k.exec(V))?(L=60*parseInt(j[2],10)+parseInt(j[3],10),"+"===j[1]?-L:L):0):(I=new Date(F+U).getTimezoneOffset(),I=new Date(F+U+I*n).getTimezoneOffset()),new Date(F+U+I*n)}var V,j,L;return new Date(e)}},ymTJ:function(e,t,r){"use strict";var a=r("u6qr"),o=r.n(a),n={data:function(){var e=this;return{house_type:"0",form:{resource_name:"",city:"",region:"",building:"",roomno:"",unit:"",floor:"",addr:"",period:"",room_id:"",room_unit:"",room_decoration:"",room_toward:"",built_area:"",usable_area:"",room_feature:"",building_age:"",manage_cost:"",property_right:"",come_from:"",brokerage:"",expiration:"",check_way:"",entrust_way:"",rent_charge1:"",rent_charge2:"",sale_charge1:"",sale_charge2:"",base_charge:"",status:"0",uid1:0,user_name1:"",user_mobile1:"",remark1:"",uid2:0,user_name2:"",user_mobile2:"",remark2:""},form_rules:{room_id:[{validator:function(t,r,a){""===e.form.room_id&&"0"===e.house_type?a(new Error("房源不能为空")):a()},trigger:"change"}],resource_name:[{required:!0,message:"请输入物业名",trigger:"change"}],room_feature:[{required:!0,message:"请选择房间功能",trigger:"change"}],rent_charge:[{validator:function(t,r,a){("0"!==e.form.status&&"2"!==e.form.status||""!==e.form.rent_charge1)&&(""!==e.form.rent_charge1&&""!==e.form.rent_charge2||""===e.form.rent_charge1&&""===e.form.rent_charge2)?a():a(new Error("请填写完整租价区间"))},trigger:"blur"}],sale_charge:[{validator:function(t,r,a){("1"!==e.form.status&&"2"!==e.form.status||""!==e.form.sale_charge1)&&(""!==e.form.sale_charge1&&""!==e.form.sale_charge2||""===e.form.sale_charge1&&""===e.form.sale_charge2)?(console.log("xxx"),a()):a(new Error("请填写完整售价区间"))},trigger:"blur"}]},room_decoration:[],room_feature:[],room_toward:[],room_unit:[],estateVal:[],estate:[],statusBase:[{name:"可租",value:0},{name:"可售",value:1},{name:"租售",value:2},{name:"已租",value:3},{name:"已售",value:4},{name:"被成交",value:5},{name:"暂缓",value:6}]}},props:{id:{type:Number}},created:function(){var e=this;this.$https.all([this.getDic("pms_type_decoration","room_decoration"),this.getDic("pms_type_roomfunc","room_feature"),this.getDic("pms_type_direction","room_toward"),this.getDic("pms_type_unit","room_unit"),this.getProjects()]).then(this.$https.spread(function(t,r){e.id&&e.getOldData()}))},watch:{},methods:{handleClick:function(e){this.house_type=e.name},getProjects:function(){var e=this;this.$https.get("/api/pms_base_projects/GetProjects",{params:{page:1,page_size:999}}).then(function(t){if(0==t.data.code){var r=!0,a=!1,n=void 0;try{for(var i,s=o()(t.data.data.Items);!(r=(i=s.next()).done);r=!0){var l=i.value,c={value:l.project_id,label:l.project_name,children:[]};e.estate.push(c)}}catch(e){a=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}}else e.$message({type:"error",showClose:!0,message:t.data.message})})},getBuildings:function(e){var t=this;this.$https.get("/api/pms_base_buildings/GetBuildings",{params:{page:1,page_size:999,project_id:e}}).then(function(r){if(0==r.data.code){for(var a=0;a<t.estate.length;a++)if(t.estate[a].value===e){t.estate[a].children=[];var n=!0,i=!1,s=void 0;try{for(var l,c=o()(r.data.data.Items);!(n=(l=c.next()).done);n=!0){var m=l.value,u={value:m.building_id,label:m.building_name,children:[]};t.estate[a].children.push(u)}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}}}else t.$message({type:"error",showClose:!0,message:r.data.message})})},getFloors:function(e,t){var r=this;this.$https.get("/api/pms_base_floors/GetFloors",{params:{page:1,page_size:999,building_id:t}}).then(function(a){if(0==a.data.code){for(var n=0;n<r.estate.length;n++)if(r.estate[n].value===e)for(var i=0;i<r.estate[n].children.length;i++)if(r.estate[n].children[i].value===t){r.estate[n].children[i].children=[];var s=!0,l=!1,c=void 0;try{for(var m,u=o()(a.data.data.Items);!(s=(m=u.next()).done);s=!0){var f=m.value,_={value:f.floor_id,label:f.floor_name,children:[]};r.estate[n].children[i].children.push(_)}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}}}else r.$message({type:"error",showClose:!0,message:a.data.message})})},getRooms:function(e,t,r){var a=this;this.$https.get("/api/pms_base_rooms/GetRooms",{params:{page:1,page_size:999,floor_id:r}}).then(function(n){if(0==n.data.code){for(var i=0;i<a.estate.length;i++)if(a.estate[i].value===e)for(var s=0;s<a.estate[i].children.length;s++)if(a.estate[i].children[s].value===t)for(var l=0;l<a.estate[i].children[s].children.length;l++)if(a.estate[i].children[s].children[l].value===r){a.estate[i].children[s].children[l].children=[];var c=!0,m=!1,u=void 0;try{for(var f,_=o()(n.data.data.Items);!(c=(f=_.next()).done);c=!0){var p=f.value,d={value:p.room_id,label:p.room_name};a.estate[i].children[s].children[l].children.push(d)}}catch(e){m=!0,u=e}finally{try{!c&&_.return&&_.return()}finally{if(m)throw u}}}}else a.$message({type:"error",showClose:!0,message:n.data.message})})},handleItemChange:function(e){var t=e.length;1===t?this.getBuildings(e[0]):2===t?this.getFloors(e[0],e[1]):3===t&&this.getRooms(e[0],e[1],e[2])},handleChange:function(){var e=this,t=this.getCascaderObj(this.estateVal,this.estate);this.form.resource_name=t[0].label+"#"+t[1].label+"#"+t[2].label+"#"+t[3].label,this.form.room_id=this.estateVal[3],this.$https.get("/api/pms_base_rooms/GetRoomDetail?room_id="+this.form.room_id).then(function(t){if(0==t.data.code){var r=t.data.data;e.form.room_feature=0==r.room_feature?"":r.room_feature.toString(),e.form.room_decoration=0==r.room_decoration?"":r.room_decoration.toString(),e.form.room_unit=0==r.room_unit?"":r.room_unit.toString(),e.form.room_toward=0==r.room_toward?"":r.room_toward.toString(),e.form.built_area=0==r.built_area?"":r.built_area.toString(),e.form.usable_area=0==r.usable_area?"":r.usable_area.toString()}else e.$message({type:"error",showClose:!0,message:t.data.message})})},getOldData:function(){var e=this;this.$https.get("/api/rent_base_resources/GetResource?resource_id="+this.id).then(function(t){if(0==t.data.code){var r=t.data.data;switch(r.room_id?(e.form.room_id=r.room_id,e.form.resource_name=r.resource_name):(e.house_type="1",e.form.resource_name=r.resource_name,e.form.city=r.city,e.form.region=r.region,e.form.building=r.building,e.form.roomno=r.roomno,e.form.unit=r.unit,e.form.floor=r.floor,e.form.addr=r.addr,e.form.period=r.period),e.form.room_unit=r.room_unit.toString(),e.form.room_decoration=r.room_decoration.toString(),e.form.room_toward=r.room_toward.toString(),e.form.built_area=0==r.built_area?"":r.built_area.toString(),e.form.usable_area=0==r.usable_area?"":r.usable_area.toString(),e.form.room_feature=r.room_feature.toString(),console.log(e.form.room_feature),e.form.building_age=r.building_age,e.form.manage_cost=r.manage_cost,e.form.property_right=r.property_right,e.form.come_from=r.come_from,e.form.brokerage=r.brokerage,e.form.expiration=r.expiration,e.form.check_way=r.check_way,e.form.entrust_way=r.entrust_way,(r.rent_charge||"~"!==r.rent_charge)&&(e.form.rent_charge1=r.rent_charge.split("~")[0],e.form.rent_charge2=r.rent_charge.split("~")[0]),(r.sale_charge||"~"!==r.sale_charge)&&(e.form.sale_charge1=r.sale_charge.split("~")[0],e.form.sale_charge2=r.sale_charge.split("~")[0]),e.form.base_charge=r.base_charge,e.form.status=r.status.toString(),r.status){case 0:case 1:case 2:e.statusBase=[{name:"可租",value:0},{name:"可售",value:1},{name:"租售",value:2},{name:"被成交",value:5},{name:"暂缓",value:6}];break;case 3:e.statusBase=[{name:"已租",value:3}];break;case 4:e.statusBase=[{name:"已售",value:4}];break;case 5:case 6:e.statusBase=[{name:"可租",value:0},{name:"可售",value:1},{name:"租售",value:2},{name:"被成交",value:5},{name:"暂缓",value:6}];break;default:e.statusBase=[{name:"可租",value:0},{name:"可售",value:1},{name:"租售",value:2},{name:"已租",value:3},{name:"已售",value:4},{name:"被成交",value:5},{name:"暂缓",value:6}]}if(r.resource_users||0!==r.resource_users.length){var a=!0,n=!1,i=void 0;try{for(var s,l=o()(r.resource_users);!(a=(s=l.next()).done);a=!0){var c=s.value;console.log(c.uid),1===c.user_type?(e.form.uid1=c.uid,e.form.user_name1=c.user_name,e.form.user_mobile1=c.user_mobile,e.form.remark1=c.remark):(e.form.uid2=c.uid,e.form.user_name2=c.user_name,e.form.user_mobile2=c.user_mobile,e.form.remark2=c.remark)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}}else e.$message({type:"error",showClose:!0,message:t.data.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.error("验证失败"),!1;var r={room_unit:e.form.room_unit,room_decoration:e.form.room_decoration,room_toward:e.form.room_toward,room_feature:e.form.room_feature,built_area:""==e.form.built_area?0:e.form.built_area,usable_area:""==e.form.usable_area?0:e.form.usable_area,building_age:e.form.building_age,manage_cost:e.form.manage_cost,property_right:e.form.property_right,come_from:e.form.come_from,brokerage:e.form.brokerage,expiration:e.form.expiration,check_way:e.form.check_way,entrust_way:e.form.entrust_way,rent_charge:e.form.rent_charge1+"~"+e.form.rent_charge2,sale_charge:e.form.sale_charge1+"~"+e.form.sale_charge2,base_charge:e.form.base_charge,status:e.form.status};"0"===e.house_type?(r.room_id=e.form.room_id,r.resource_name=e.form.resource_name):(r.resource_name=e.form.resource_name,r.city=e.form.city,r.region=e.form.region,r.building=e.form.building,r.roomno=e.form.roomno,r.unit=e.form.unit,r.floor=e.form.floor,r.addr=e.form.addr,r.period=e.form.period),r.resource_users=[{resource_id:0,user_type:1,user_name:e.form.user_name1,user_mobile:e.form.user_mobile1,remark:e.form.remark1},{resource_id:0,user_type:2,user_name:e.form.user_name2,user_mobile:e.form.user_mobile2,remark:e.form.remark2}],console.log(e.form),e.id?(r.resource_id=parseInt(e.id),r.resource_users[0].uid=e.form.uid1,r.resource_users[1].uid=e.form.uid2,r.resource_users[0].resource_id=parseInt(e.id),r.resource_users[1].resource_id=parseInt(e.id),e.$https.post("/api/rent_base_resources/UpdateResource",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"编辑成功",duration:1500,onClose:function(){e.closeDialog("dialogRentingEdit"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})):e.$https.post("/api/rent_base_resources/CreateResource",r).then(function(t){0==t.data.code?e.$message({type:"success",showClose:!0,message:"添加成功",duration:1500,onClose:function(){e.closeDialog("dialogRentingAdd"),e.$emit("parentGetDataList")}}):e.$message({type:"error",showClose:!0,message:t.data.message})})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},getTreeDeepArr:function(e,t){var r=[],a=[],o=0;return function t(n,i){for(var s=0;s<n.length;s++){if(o=i,r[i]=n[s].id,n[s].id==e){a=r.slice(0,i+1);break}n[s].children&&(o++,t(n[s].children,o))}return a}(t,o)},closeDialog:function(e){e?this.$emit("closeDialog",e):(this.$emit("closeDialog","dialogRentingAdd"),this.$emit("closeDialog","dialogRentingEdit"))}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-tabs",{attrs:{value:e.house_type,type:"card"},on:{"tab-click":e.handleClick}},[r("el-tab-pane",{attrs:{label:"园区内房源",name:"0",disabled:!!e.id}}),e._v(" "),r("el-tab-pane",{attrs:{label:"园区外房源",name:"1",disabled:!!e.id}})],1),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.form_rules,model:e.form,"label-width":"80px",size:"small"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.house_type&&!e.id,expression:"house_type === '0' && !id"}]},[r("el-form-item",{attrs:{label:"房源",prop:"room_id"}},[r("el-cascader",{attrs:{clearable:"",options:e.estate,separator:"#"},on:{"active-item-change":e.handleItemChange,change:e.handleChange},model:{value:e.estateVal,callback:function(t){e.estateVal=t},expression:"estateVal"}})],1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.house_type&&e.id,expression:"house_type === '0' && id"}],attrs:{label:"房源"}},[r("p",[e._v(e._s(e.form.resource_name))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.house_type,expression:"house_type === '1'"}]},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"城区"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"片区"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"物业名",prop:"resource_name"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.resource_name,callback:function(t){e.$set(e.form,"resource_name",t)},expression:"form.resource_name"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"楼栋"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.building,callback:function(t){e.$set(e.form,"building",t)},expression:"form.building"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"单元"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"楼层"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.floor,callback:function(t){e.$set(e.form,"floor",t)},expression:"form.floor"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"房号"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.roomno,callback:function(t){e.$set(e.form,"roomno",t)},expression:"form.roomno"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"期数"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.period,callback:function(t){e.$set(e.form,"period",t)},expression:"form.period"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"hr-line-dashed"}),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"户型"}},[r("el-select",{model:{value:e.form.room_unit,callback:function(t){e.$set(e.form,"room_unit",t)},expression:"form.room_unit"}},[r("el-option",{attrs:{label:"请选择户型",value:""}}),e._v(" "),e._l(e.room_unit,function(e){return r("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id.toString()}})})],2)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"装修"}},[r("el-select",{model:{value:e.form.room_decoration,callback:function(t){e.$set(e.form,"room_decoration",t)},expression:"form.room_decoration"}},[r("el-option",{attrs:{label:"请选择装修",value:""}}),e._v(" "),e._l(e.room_decoration,function(e){return r("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id.toString()}})})],2)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"朝向"}},[r("el-select",{model:{value:e.form.room_toward,callback:function(t){e.$set(e.form,"room_toward",t)},expression:"form.room_toward"}},[r("el-option",{attrs:{label:"请选择朝向",value:""}}),e._v(" "),e._l(e.room_toward,function(e){return r("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id.toString()}})})],2)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"房间功能",prop:"room_feature"}},[r("el-select",{model:{value:e.form.room_feature,callback:function(t){e.$set(e.form,"room_feature",t)},expression:"form.room_feature"}},[r("el-option",{attrs:{label:"请选择房间功能",value:""}}),e._v(" "),e._l(e.room_feature,function(e){return r("el-option",{key:e.value_id,attrs:{label:e.value_name,value:e.value_id.toString()}})})],2)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建筑面积"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"数字，小数点两位，单位平米",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.built_area,callback:function(t){e.$set(e.form,"built_area",t)},expression:"form.built_area"}}),e._v(" 平米\n                ")],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"使用面积"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"数字，小数点两位，单位平米",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.usable_area,callback:function(t){e.$set(e.form,"usable_area",t)},expression:"form.usable_area"}}),e._v(" 平米\n                ")],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建筑年代"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.building_age,callback:function(t){e.$set(e.form,"building_age",t)},expression:"form.building_age"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"管理费"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"数字，小数点两位，单位元/平米",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.manage_cost,callback:function(t){e.$set(e.form,"manage_cost",t)},expression:"form.manage_cost"}}),e._v(" 元/平米\n                ")],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"产权"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.property_right,callback:function(t){e.$set(e.form,"property_right",t)},expression:"form.property_right"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"来源"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.come_from,callback:function(t){e.$set(e.form,"come_from",t)},expression:"form.come_from"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"收佣情况"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.brokerage,callback:function(t){e.$set(e.form,"brokerage",t)},expression:"form.brokerage"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"到期时间"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择到期时间"},model:{value:e.form.expiration,callback:function(t){e.$set(e.form,"expiration",t)},expression:"form.expiration"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"看房方式"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.check_way,callback:function(t){e.$set(e.form,"check_way",t)},expression:"form.check_way"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"委托方式"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.entrust_way,callback:function(t){e.$set(e.form,"entrust_way",t)},expression:"form.entrust_way"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusBase,function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value.toString()}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"租价",prop:"rent_charge"}},[r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"0.00",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.rent_charge1,callback:function(t){e.$set(e.form,"rent_charge1",t)},expression:"form.rent_charge1"}}),e._v(" ~\n                    "),r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"0.00",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.rent_charge2,callback:function(t){e.$set(e.form,"rent_charge2",t)},expression:"form.rent_charge2"}}),e._v(" 元/平米\n                ")],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"售价",prop:"sale_charge"}},[r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"0.00",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.sale_charge1,callback:function(t){e.$set(e.form,"sale_charge1",t)},expression:"form.sale_charge1"}}),e._v(" ~\n                    "),r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"0.00",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.sale_charge2,callback:function(t){e.$set(e.form,"sale_charge2",t)},expression:"form.sale_charge2"}}),e._v(" 元/平米\n                ")],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"底价"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"数字，小数点两位，单位平方米",type:"number"},nativeOn:{keyup:function(t){e.onkeyupPrice(t)}},model:{value:e.form.base_charge,callback:function(t){e.$set(e.form,"base_charge",t)},expression:"form.base_charge"}}),e._v(" 元/平米\n                ")],1)],1)],1),e._v(" "),r("div",{staticClass:"hr-line-dashed"}),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"业主"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"业主姓名",type:"text"},model:{value:e.form.user_name1,callback:function(t){e.$set(e.form,"user_name1",t)},expression:"form.user_name1"}}),e._v(" "),r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"业主联系电话",type:"text"},model:{value:e.form.user_mobile1,callback:function(t){e.$set(e.form,"user_mobile1",t)},expression:"form.user_mobile1"}}),e._v(" "),r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"业主备注",type:"text"},model:{value:e.form.remark1,callback:function(t){e.$set(e.form,"remark1",t)},expression:"form.remark1"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"联系人"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"联系人姓名",type:"text"},model:{value:e.form.user_name2,callback:function(t){e.$set(e.form,"user_name2",t)},expression:"form.user_name2"}}),e._v(" "),r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"联系人联系电话",type:"text"},model:{value:e.form.user_mobile2,callback:function(t){e.$set(e.form,"user_mobile2",t)},expression:"form.user_mobile2"}}),e._v(" "),r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"联系人备注",type:"text"},model:{value:e.form.remark2,callback:function(t){e.$set(e.form,"remark2",t)},expression:"form.remark2"}})],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=r("Aizv")(n,i,!1,function(e){r("mZqt")},"data-v-607f094e",null);t.a=s.exports},zGNL:function(e,t,r){"use strict";var a=r("u6qr"),o=r.n(a),n={data:function(){return{form:{theme:"",customer_classify:"0",customer_type:"0",transactions_num:"",classification:[],customer_source:"",purchase_intention:"",intentional_area:"",enterprise_name:"",customer_name:"",telephone:"",sex:"1",native_place:"",company_email:"",job:"",person_identification_type:"",person_identification_number:"",person_identification_image:[],communication_address:"",company_logo:"",company_identification_type:"",company_identification_number:"",company_identification_image:[],company_corporate:"",company_industry_type:"",company_registered_capital:"",company_registered_address:"",company_type:"",company_main_product:"",company_employees_number:"",company_scope_of_operation:""},tableData:[],classification:[],customer_source:[],identification_type:[],company_card_type:[],company_industry:[],company_type:[],company_employees:[],purchase_intention:[]}},props:{id:{type:Number}},created:function(){var e=this;this.$https.all([this.getDic("crm_classification","classification"),this.getDic("crm_customer_source","customer_source"),this.getDic("contact_card_type","identification_type"),this.getDic("company_card_type","company_card_type"),this.getDic("company_industry","company_industry"),this.getDic("company_type","company_type"),this.getDic("company_employees","company_employees"),this.getDic("crm_purchase_intention","purchase_intention")]).then(this.$https.spread(function(t,r){e.id&&(e.getOldData(),e.getContactsList())}))},methods:{getOldData:function(){var e=this;this.$https.get("/api/Customer/get_customerdetails?c_id="+this.id).then(function(t){if(0==t.data.code){var r=t.data.data;e.form.theme=r.theme,e.form.customer_classify=r.customer_classify,e.form.customer_type=r.customer_type,e.form.classification=r.classification.split(","),e.form.customer_source=r.customer_source,e.form.purchase_intention=r.purchase_intention,e.form.intentional_area=0==r.intentional_area?"":r.intentional_area,e.form.transactions_num=r.transactions_num,e.form.enterprise_name=r.enterprise_name,e.form.customer_name=r.customer_name,e.form.telephone=r.telephone,e.form.sex=r.sex.toString(),e.form.native_place=r.native_place,e.form.company_email=r.company_email,e.form.job=r.job,e.form.person_identification_type=r.person_identification_type,e.form.person_identification_number=r.person_identification_number,r.person_identification_image&&(e.form.person_identification_image=r.person_identification_image.split(",")),e.form.company_logo=r.company_logo,e.form.company_identification_type=r.company_identification_type,e.form.company_industry_type=0==r.company_industry_type?"":r.company_industry_type,e.form.company_type=0==r.company_type?"":r.company_type,e.form.company_employees_number=0==r.company_employees_number?"":r.company_employees_number,e.form.company_identification_number=r.company_identification_number,r.company_identification_image&&(e.form.company_identification_image=r.company_identification_image.split(",")),e.form.communication_address=r.communication_address,e.form.company_corporate=r.company_corporate,e.form.company_registered_capital=r.company_registered_capital,e.form.company_registered_address=r.company_registered_address,e.form.company_main_product=r.company_main_product,e.form.company_scope_of_operation=r.company_scope_of_operation,console.log(e.form)}else e.$message({type:"error",showClose:!0,message:t.data.message})})},getContactsList:function(){var e=this;this.$https.get("/api/customer_linkman/list_customer_linkman?c_id="+this.id).then(function(t){0==t.data.code?e.tableData=t.data.data:e.$message({type:"error",showClose:!0,message:t.data.message})})},getDic:function(e,t){var r=this;this.$https.get("/api/Dicts/GetValues",{params:{type_code:e}}).then(function(e){0==e.data.code?r[t]=e.data.data:r.$message({type:"error",showClose:!0,message:e.data.message})})},getDicVals:function(e,t){var r=[],a=e.toString().split(","),n=!0,i=!1,s=void 0;try{for(var l,c=o()(a);!(n=(l=c.next()).done);n=!0){var m=l.value,u=!0,f=!1,_=void 0;try{for(var p,d=o()(this[t]);!(u=(p=d.next()).done);u=!0){var h=p.value;m==h.value_id&&r.push(h.value_name)}}catch(e){f=!0,_=e}finally{try{!u&&d.return&&d.return()}finally{if(f)throw _}}}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}return r.join(", ")},closeDialog:function(e){e?this.$emit("closeDialog",e):this.$emit("closeDialog","dialogDetails")}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px","label-suffix":"：",size:"small"}},["2"!==e.form.customer_classify?r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"线索名称/主题"}},[r("p",[e._v(e._s(e.form.theme))])])],1)],1):e._e(),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"客户分类",prop:"classification"}},[r("p",[e._v(e._s(e.getDicVals(e.form.classification.join(","),"classification")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"客户来源",prop:"customer_source"}},[r("p",[e._v(e._s(e.getDicVals(e.form.customer_source,"customer_source")))])])],1)],1),e._v(" "),"2"!==e.form.customer_classify?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"购买意向",prop:"purchase_intention"}},[r("p",[e._v(e._s(e.getDicVals(e.form.purchase_intention,"purchase_intention")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"意向面积"}},[r("p",[e._v(e._s(e.form.intentional_area)+"平米")])])],1)],1):e._e(),e._v(" "),e.form.transactions_num>0?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"成交次数",prop:"transactions_num"}},[r("p",[e._v(e._s(e.form.transactions_num))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业名称",prop:"enterprise_name"}},[r("p",[e._v(e._s(e.form.enterprise_name))])])],1)],1):e._e(),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"客户姓名",prop:"customer_name"}},[r("p",[e._v(e._s(e.form.customer_name))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"客户联系电话",prop:"telephone"}},[r("p",[e._v(e._s(e.form.telephone))])])],1)],1),e._v(" "),"1"!==e.form.customer_type?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"客户主体类别",prop:"customer_name"}},[r("p",[e._v(e._s("1"===e.form.customer_type?"个人":"企业"))])])],1)],1):e._e(),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"性别"}},[r("p",[e._v(e._s("1"===e.form.sex?"男":"女"))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"籍贯"}},[r("p",[e._v(e._s(e.form.native_place))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电子邮箱"}},[r("p",[e._v(e._s(e.form.company_email))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"职务"}},[r("p",[e._v(e._s(e.form.job))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"个人证件类型"}},[r("p",[e._v(e._s(e.getDicVals(e.form.person_identification_type,"identification_type")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"个人证件号码",prop:"person_identification_number"}},[r("p",[e._v(e._s(e.form.person_identification_number))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"个人证件图片"}},[r("p",e._l(e.form.person_identification_image,function(t,a){return t?r("img",{key:a,attrs:{width:"120px",height:"120px",src:t}}):e._e()}))])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"通讯地址"}},[r("p",[e._v(e._s(e.form.communication_address))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"企业Logo"}},[r("p",[e.form.company_logo?r("img",{attrs:{width:"120px",height:"120px",src:e.form.company_logo}}):e._e()])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业证件类型"}},[r("p",[e._v(e._s(e.getDicVals(e.form.company_identification_type,"company_card_type")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业证件号码"}},[r("p",[e._v(e._s(e.form.company_identification_number))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"企业证件图片"}},[r("p",e._l(e.form.company_identification_image,function(t,a){return t?r("img",{key:a,attrs:{width:"120px",height:"120px",src:t}}):e._e()}))])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业法人"}},[r("p",[e._v(e._s(e.form.company_corporate))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业行业类别"}},[r("p",[e._v(e._s(e.getDicVals(e.form.company_industry_type,"company_industry")))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业类型"}},[r("p",[e._v(e._s(e.getDicVals(e.form.company_type,"company_type")))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业注册资金"}},[r("p",[e._v(e._s(e.form.company_registered_capital))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主营产品"}},[r("p",[e._v(e._s(e.form.company_main_product))])])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业员工人数(人)"}},[r("p",[e._v(e._s(e.getDicVals(e.form.company_employees_number,"company_employees")))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"企业注册地址"}},[r("p",[e._v(e._s(e.form.company_registered_address))])])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"经营范围"}},[r("p",[e._v(e._s(e.form.company_scope_of_operation))])])],1)],1)],1),e._v(" "),r("h3",{staticClass:"table_title"},[e._v("联系人信息：")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"mini"}},[r("el-table-column",{attrs:{prop:"linkman_name",label:"联系人姓名",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{prop:"telephone",label:"电话"}}),e._v(" "),r("el-table-column",{attrs:{prop:"identification_number",label:"证件号码"}}),e._v(" "),r("el-table-column",{attrs:{label:"证件类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getDicVals(t.row.identification_type,"identification_type"))+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_time",label:"创建时间",width:"140"}})],1),e._v(" "),r("div",{staticClass:"text-center m-t"},[r("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("关 闭")])],1)],1)},staticRenderFns:[]};var s=r("Aizv")(n,i,!1,function(e){r("3Nuf")},"data-v-4f90c536",null);t.a=s.exports}});
//# sourceMappingURL=0.cb32071353ed9e191ddf.js.map