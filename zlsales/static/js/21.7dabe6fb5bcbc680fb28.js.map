{"version":3,"sources":["webpack:///src/pages/CRM/Public/Lists.vue","webpack:///./src/pages/CRM/Public/Lists.vue?7984","webpack:///./src/pages/CRM/Public/Lists.vue"],"names":["Lists","FollowUp","Details","this","getDic","getDataList","then","$https","spread","acct","perms","val","id","name","_ref","value","valItem","_step","c_id","user_id","item","message","result","code","data","_step2","value_name","text","keyItem","_step3","_step4","selectionChecked","enterprise_name","customer_name","telephone","theme","pageIndex","pageSize","classification","Items","Total","Public_Lists","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","float","icon","size","plain","onclick","inline","model","formFilter","label","placeholder","callback","$$v","$set","expression","type","on","click","formFilterSubmit","span","$event","crmDel","margin-left","width","vertical-align","_l","key","value_id","directives","rawName","tableData","selection-change","handleSelectionChange","prop","scopedSlots","_u","fn","scope","href","openDetails","row","_s","getDicVals","getDicVal","purchase_intention","Claim","current-page","page-sizes","page-size","layout","total","dataTotal","size-change","pageSizeChange","current-change","pageIndexChange","title","visible","dialogFollowUp","append-to-body","update:visible","followData","FollowUpObj","isIntention","closeDialog","parentGetDataList","_e","dialogDetails","editId","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.7dabe6fb5bcbc680fb28.js","sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>公海客户</span>\r\n                <el-button-group style=\"float: right;\">\r\n                    <el-button icon=\"el-icon-refresh\" size=\"mini\" plain onclick=\"window.location.reload()\">刷新</el-button>\r\n                </el-button-group>\r\n            </div>\r\n            <el-form :inline=\"true\" :model=\"formFilter\" class=\"old_form_seach\" size=\"small\">\r\n                <el-form-item label=\"公司名称\">\r\n                    <el-input v-model=\"formFilter.enterprise_name\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"联系人姓名\">\r\n                    <el-input v-model=\"formFilter.customer_name\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"联系电话\">\r\n                    <el-input v-model=\"formFilter.telephone\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"主题\">\r\n                    <el-input v-model=\"formFilter.theme\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"formFilterSubmit\" icon=\"el-icon-search\">查询</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-row>\r\n                <el-col :span=\"18\">\r\n                    <el-button size=\"small\" @click=\"crmDel()\" icon=\"el-icon-delete\">删除</el-button>\r\n                    <el-select size=\"small\" v-model=\"formFilter.classification\" style=\"margin-left:20px;width: 150px;vertical-align: middle;\" placeholder=\"请选择客户类别\">\r\n                        <el-option label=\"所有客户类别\" value=\"\"></el-option>\r\n                        <el-option v-for=\"item in classification\" :key=\"item.value_id\" :label=\"item.value_name\" :value=\"item.value_id\"></el-option>\r\n                    </el-select>\r\n                </el-col>\r\n                <el-col :span=\"6\" class=\"text-right\">\r\n                    <el-button size=\"small\" type=\"success\" onclick=\"alert('敬请期待')\" icon=\"el-icon-upload\">导入</el-button>\r\n                    <el-button size=\"small\" type=\"success\" onclick=\"alert('敬请期待')\" icon=\"el-icon-web-download\">导出</el-button>\r\n                </el-col>\r\n            </el-row>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\" v-loading=\"loading\">\r\n                <el-table-column type=\"selection\" width=\"55\" prop=\"c_id\"></el-table-column>\r\n                <el-table-column prop=\"c_id\" label=\"ID\" width=\"55\"></el-table-column>\r\n                <el-table-column prop=\"theme\" label=\"主题\"></el-table-column>\r\n                <el-table-column prop=\"enterprise_name\" label=\"公司名称\"></el-table-column>\r\n                <el-table-column label=\"客户姓名\">\r\n                    <template slot-scope=\"scope\">\r\n                        <a href=\"javascript:;\" @click=\"openDetails(scope.row.c_id)\">{{scope.row.customer_name}}</a>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"telephone\" label=\"联系电话\"></el-table-column>\r\n                <el-table-column label=\"客户分类\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{getDicVals(scope.row.classification, 'classification')}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"购买意向\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{getDicVal(scope.row.purchase_intention, 'purchase_intention')}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"created_time\" label=\"创建时间\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"primary\"\r\n                            @click=\"Claim(scope.row.c_id)\" plain>认领</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页 -->\r\n            <div class=\"text-center m-t\">\r\n                <el-pagination\r\n                    @size-change=\"pageSizeChange\"\r\n                    @current-change=\"pageIndexChange\"\r\n                    :current-page=\"pageIndex\"\r\n                    :page-sizes=\"[10, 15, 20, 30]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"dataTotal\">\r\n                </el-pagination>\r\n            </div>\r\n        </el-card>\r\n        <el-dialog v-if=\"dialogFollowUp\" title=\"跟进记录\" :visible.sync=\"dialogFollowUp\" append-to-body width=\"900px\">\r\n            <FollowUp @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\" :followData=\"FollowUpObj\" :isIntention=\"false\"></FollowUp>\r\n        </el-dialog>\r\n        <el-dialog v-if=\"dialogDetails\" title=\"客户详情\" :visible.sync=\"dialogDetails\" append-to-body width=\"1000px\">\r\n            <Details @closeDialog=\"closeDialog\" :id=\"editId\"></Details>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport FollowUp from './../FollowUp'\r\nimport Details from './../Details'\r\n\r\nexport default {\r\n    components: {\r\n        FollowUp,\r\n        Details\r\n    },\r\n    data () {\r\n        return {\r\n            editId: null, // 编辑id\r\n            FollowUpObj: null, // 更进记录需要数据\r\n            pageIndex: 1, // 当前页码\r\n            pageSize: 10, // 页码大小\r\n            dataTotal: 0, // 数据总数\r\n            loading: true,\r\n            formFilter: {\r\n                enterprise_name: '', // 公司名称\r\n                customer_name: '',// 联系人姓名\r\n                telephone: '',// 联系电话\r\n                theme: '',// 主题\r\n                classification: '' //购买意向\r\n            }, // 检索\r\n            searchForm: {\r\n                enterprise_name: '', // 公司名称\r\n                customer_name: '',// 联系人姓名\r\n                telephone: '',// 联系电话\r\n                theme: ''// 主题\r\n            },\r\n            selectionChecked: [],\r\n            tableData: [],\r\n            classification: [], // 字典 - 客户分类\r\n            purchase_intention: [], // 字典 - 购买意向\r\n            roleunitUsers: [], // 所属业务员\r\n            dialogDetails: false, // 详情\r\n            dialogFollowUp: false //跟进记录\r\n        }\r\n    },\r\n    created() {\r\n        let _this = this;\r\n        this.$https.all([\r\n            this.getDic('crm_classification', 'classification'),\r\n            this.getDic('crm_purchase_intention', 'purchase_intention'),\r\n            this.getDataList()\r\n        ]).then(this.$https.spread(function (acct, perms) {\r\n        }))\r\n    },\r\n    watch: {\r\n        'formFilter.classification': function(){\r\n            this.getDataList();\r\n        }\r\n    },\r\n    methods: {\r\n        pageSizeChange(val) { // 分页：pageSize改变时\r\n            this.pageSize = val;\r\n            this.getDataList();\r\n        },\r\n        pageIndexChange(val) { // 分页：当前页码改变时\r\n            this.pageIndex = val;\r\n            this.getDataList();\r\n        },\r\n        closeDialog(name) { // 关闭弹层\r\n            this[name] = false;\r\n        },\r\n        FollowUp(id, name, type) { // 更进记录\r\n            this.FollowUpObj = {\r\n                id: Number(id),\r\n                name: name,\r\n                type: type // 购买意向\r\n            };\r\n            this.dialogFollowUp = true;\r\n        },\r\n        openDetails(id) { // 详情\r\n            this.editId = Number(id);\r\n            this.dialogDetails = true;\r\n        },\r\n        crmDel() { // 删除\r\n            if (this.selectionChecked.length === 0) {\r\n                this.$message({\r\n                    type: 'error',\r\n                    showClose: true,\r\n                    message: '您未勾选需要删除的客户'\r\n                })\r\n            } else {\r\n                this.$prompt('请输入删除原因', '删除需要总监确认。您还可以将其丢入公海', {\r\n                    inputType: 'textarea',\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消'\r\n                }).then(({ value }) => {\r\n\r\n                    let _postData = [];\r\n                    for(var valItem of this.selectionChecked) {\r\n                        let item = {\r\n                            c_id: valItem.c_id,\r\n                            old_user_id: valItem.user_id,\r\n                            apply_remark: value\r\n                        }\r\n                        _postData.push(item)\r\n                    }\r\n                    this.$https.post('/api/customer_delete_approve/create_customer_delete_approve', _postData).then((result) => {\r\n                        if (result.data.code == 0) {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                showClose: true,\r\n                                message: '删除成功',\r\n                                duration: 1500,\r\n                                onClose: () => {\r\n                                    this.getDataList();\r\n                                    // window.location.reload()\r\n                                }\r\n                            })\r\n                        } else {\r\n                            this.$message({\r\n                                type: 'error',\r\n                                showClose: true,\r\n                                message: result.data.message\r\n                            })\r\n                        }\r\n                    })\r\n                });\r\n            }\r\n        },\r\n        Claim(id) { // 认领\r\n\r\n            this.$confirm('您确定要认领该客户吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$https.post('/api/Customer/update_customer_to_me', {\r\n                    c_id: id\r\n                }).then((result) => {\r\n                    if (result.data.code == 0) {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            showClose: true,\r\n                            message: '成功认领',\r\n                            duration: 1500,\r\n                            onClose: () => {\r\n                                this.getDataList();\r\n                            }\r\n                        })\r\n                    } else {\r\n                        this.$message({\r\n                            type: 'error',\r\n                            showClose: true,\r\n                            message: result.data.message\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }).catch(() => {\r\n            });\r\n        },\r\n        getDic(code, dic) { // 根据关键字获取字典值并保存 相应字段\r\n            this.$https.get('/api/Dicts/GetValues', {\r\n                params: {\r\n                    type_code: code\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this[dic] = result.data.data;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        getDicVal(key, dic) { // 根据字典值匹配字典名\r\n            let text = '';\r\n            for(var item of this[dic]) {\r\n                if (key == item.value_id) {\r\n                    text = item.value_name;\r\n                }\r\n            }\r\n            return text;\r\n        },\r\n        getDicVals(keys, dic) { // 根据字典值匹配字典名\r\n            let texts = [];\r\n            let keysArr = keys.split(',');\r\n            for(var keyItem of keysArr) {\r\n                for(var item of this[dic]) {\r\n                    if (keyItem == item.value_id) {\r\n                        texts.push(item.value_name);\r\n                    }\r\n                }\r\n            }\r\n            return texts.join(', ');\r\n        },\r\n        handleSelectionChange(val) { // 多选执行的方法\r\n            this.selectionChecked = val;\r\n            console.info(this.selectionChecked);\r\n        },\r\n        formFilterSubmit() { // 搜索查询按钮\r\n            this.searchForm.enterprise_name = this.formFilter.enterprise_name;\r\n            this.searchForm.customer_name = this.formFilter.customer_name;\r\n            this.searchForm.telephone = this.formFilter.telephone;\r\n            this.searchForm.theme = this.formFilter.theme;\r\n            this.getDataList();\r\n        },\r\n        getDataList() { // 分页获取\r\n            \r\n            this.$https.get('/api/Customer/page', {\r\n                params: {\r\n                    currentPage: this.pageIndex,\r\n                    pageSize: this.pageSize,\r\n                    customer_classify: 999,\r\n                    enterprise_name: this.searchForm.enterprise_name,\r\n                    customer_name: this.searchForm.customer_name,\r\n                    telephone: this.searchForm.telephone,\r\n                    theme: this.searchForm.theme,\r\n                    user_id: 0,\r\n                    classification: this.formFilter.classification\r\n                }\r\n            }).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.tableData = result.data.data.Items;\r\n                    this.dataTotal = result.data.data.Total;\r\n\r\n                    this.loading = false;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .old_form_seach {\r\n        border-bottom: 1px dashed #eee;\r\n        margin-bottom: 20px;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/CRM/Public/Lists.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"公海客户\")]),_vm._v(\" \"),_c('el-button-group',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"mini\",\"plain\":\"\",\"onclick\":\"window.location.reload()\"}},[_vm._v(\"刷新\")])],1)],1),_vm._v(\" \"),_c('el-form',{staticClass:\"old_form_seach\",attrs:{\"inline\":true,\"model\":_vm.formFilter,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"公司名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.formFilter.enterprise_name),callback:function ($$v) {_vm.$set(_vm.formFilter, \"enterprise_name\", $$v)},expression:\"formFilter.enterprise_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系人姓名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.formFilter.customer_name),callback:function ($$v) {_vm.$set(_vm.formFilter, \"customer_name\", $$v)},expression:\"formFilter.customer_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.formFilter.telephone),callback:function ($$v) {_vm.$set(_vm.formFilter, \"telephone\", $$v)},expression:\"formFilter.telephone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"主题\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.formFilter.theme),callback:function ($$v) {_vm.$set(_vm.formFilter, \"theme\", $$v)},expression:\"formFilter.theme\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.formFilterSubmit}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":18}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.crmDel()}}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"margin-left\":\"20px\",\"width\":\"150px\",\"vertical-align\":\"middle\"},attrs:{\"size\":\"small\",\"placeholder\":\"请选择客户类别\"},model:{value:(_vm.formFilter.classification),callback:function ($$v) {_vm.$set(_vm.formFilter, \"classification\", $$v)},expression:\"formFilter.classification\"}},[_c('el-option',{attrs:{\"label\":\"所有客户类别\",\"value\":\"\"}}),_vm._v(\" \"),_vm._l((_vm.classification),function(item){return _c('el-option',{key:item.value_id,attrs:{\"label\":item.value_name,\"value\":item.value_id}})})],2)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"text-right\",attrs:{\"span\":6}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"onclick\":\"alert('敬请期待')\",\"icon\":\"el-icon-upload\"}},[_vm._v(\"导入\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"onclick\":\"alert('敬请期待')\",\"icon\":\"el-icon-web-download\"}},[_vm._v(\"导出\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"prop\":\"c_id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"c_id\",\"label\":\"ID\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"theme\",\"label\":\"主题\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"enterprise_name\",\"label\":\"公司名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"客户姓名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.openDetails(scope.row.c_id)}}},[_vm._v(_vm._s(scope.row.customer_name))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"telephone\",\"label\":\"联系电话\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"客户分类\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s(_vm.getDicVals(scope.row.classification, 'classification'))+\"\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"购买意向\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s(_vm.getDicVal(scope.row.purchase_intention, 'purchase_intention'))+\"\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"created_time\",\"label\":\"创建时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.Claim(scope.row.c_id)}}},[_vm._v(\"认领\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"text-center m-t\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageIndex,\"page-sizes\":[10, 15, 20, 30],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.dataTotal},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageIndexChange}})],1)],1),_vm._v(\" \"),(_vm.dialogFollowUp)?_c('el-dialog',{attrs:{\"title\":\"跟进记录\",\"visible\":_vm.dialogFollowUp,\"append-to-body\":\"\",\"width\":\"900px\"},on:{\"update:visible\":function($event){_vm.dialogFollowUp=$event}}},[_c('FollowUp',{attrs:{\"followData\":_vm.FollowUpObj,\"isIntention\":false},on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e(),_vm._v(\" \"),(_vm.dialogDetails)?_c('el-dialog',{attrs:{\"title\":\"客户详情\",\"visible\":_vm.dialogDetails,\"append-to-body\":\"\",\"width\":\"1000px\"},on:{\"update:visible\":function($event){_vm.dialogDetails=$event}}},[_c('Details',{attrs:{\"id\":_vm.editId},on:{\"closeDialog\":_vm.closeDialog}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-1737564a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/CRM/Public/Lists.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1737564a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./Lists.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Lists.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Lists.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1737564a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./Lists.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1737564a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/CRM/Public/Lists.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}