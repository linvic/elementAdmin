{"version":3,"sources":["webpack:///src/pages/System/Role/Add.vue","webpack:///./src/pages/System/Role/Add.vue?b964","webpack:///./src/pages/System/Role/Add.vue","webpack:///src/pages/System/Role/RolePower.vue","webpack:///./src/pages/System/Role/RolePower.vue?34fd","webpack:///./src/pages/System/Role/RolePower.vue","webpack:///src/pages/System/Role/List.vue","webpack:///./src/pages/System/Role/List.vue?3bbb","webpack:///./src/pages/System/Role/List.vue"],"names":["Add","required","message","trigger","Number","getOldData","data","role_name","role_desc","id","Role_Add","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","status-icon","rules","form_rules","model","form","label-width","label","prop","value","callback","$$v","$set","expression","_v","type","rows","on","click","$event","submit","closeDialog","staticRenderFns","System_Role_Add","__webpack_require__","normalizeComponent","ssrContext","RolePower","getDataBase","_iteratorNormalCompletion","item","_step","getCheckedKeys","checkedKeys","getHalfCheckedKeys","Role_RolePower","staticClass","treeData","show-checkbox","expand-on-click-node","default-expand-all","node-key","highlight-current","props","defaultProps","check-change","handleCheckChange","List","RoleAdd","RolePower_normalizeComponent","getDataList","_this","pageIndex","pageSize","then","result","Items","Total","val","Role_List","slot","staticStyle","float","icon","size","plain","onclick","dialogRoleAdd","directives","name","rawName","width","tableData","scopedSlots","_u","key","fn","scope","row","role_code","listEdit","role_id","_e","rolePower","listDel","current-page","page-sizes","page-size","layout","total","dataTotal","size-change","pageSizeChange","current-change","pageIndexChange","title","visible","append-to-body","update:visible","parentGetDataList","dialogRoleEdit","editId","dialogRolePower","List_Component","List_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.5ff1841b165cdb9e6f9d.js","sourcesContent":["<template>\r\n    <div>\r\n        <el-form ref=\"form\" status-icon :rules=\"form_rules\" :model=\"form\" label-width=\"100px\">\r\n            <el-form-item label=\"角色名称\" prop=\"role_name\">\r\n                <el-input v-model=\"form.role_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"角色备注\">\r\n                <el-input type=\"textarea\" v-model=\"form.role_desc\" :rows=\"3\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submit()\">保存</el-button>\r\n                <el-button @click=\"closeDialog()\">取消</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        return {\r\n            form: {\r\n                role_name: '',\r\n                role_desc: ''\r\n            },\r\n            form_rules: {\r\n                role_name: [\r\n                    { required: true, message: '请输入角色名称', trigger: 'blur' }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        id: {\r\n            type: Number\r\n        }\r\n    },\r\n    created() {\r\n        if (this.id) { // 编辑\r\n            this.getOldData();\r\n        }\r\n    },\r\n    methods: {\r\n        getOldData() { // 获取详情数据\r\n\r\n            this.$https.get('/api/company_role/get_company_roledetails?role_id=' + this.id).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    let _data = result.data.data;\r\n                    this.form.role_name = _data.role_name;\r\n                    this.form.role_desc = _data.role_desc;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        submit() { // 提交\r\n            this.$refs.form.validate((valid) => {\r\n                if (valid) {\r\n                    let _postData = {\r\n                        role_name: this.form.role_name,\r\n                        role_desc: this.form.role_desc\r\n                    }\r\n                    if (this.id) { // 编辑\r\n                        _postData.role_id = parseInt(this.id);\r\n                        this.$https.post('/api/company_role/update_company_role', _postData).then((result) => {\r\n                            if (result.data.code == 0) {\r\n                                this.$message({\r\n                                    type: 'success',\r\n                                    showClose: true,\r\n                                    message: '编辑成功',\r\n                                    duration: 1500,\r\n                                    onClose: () => {\r\n                                        // 关闭当前dialog，\r\n                                        this.closeDialog('dialogRoleEdit');\r\n                                        // 刷新列表\r\n                                        this.$emit('parentGetDataList');\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'error',\r\n                                    showClose: true,\r\n                                    message: result.data.message\r\n                                })\r\n                            }\r\n                        })\r\n                    } else { // 新增\r\n\r\n                        this.$https.post('/api/company_role/create_company_role', _postData).then((result) => {\r\n                            if (result.data.code == 0) {\r\n                                this.$message({\r\n                                    type: 'success',\r\n                                    showClose: true,\r\n                                    message: '添加成功',\r\n                                    duration: 1500,\r\n                                    onClose: () => {\r\n                                        // 关闭当前dialog，\r\n                                        this.closeDialog('dialogRoleAdd');\r\n                                        // 刷新列表\r\n                                        this.$emit('parentGetDataList');\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'error',\r\n                                    showClose: true,\r\n                                    message: result.data.message\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                    \r\n\r\n                } else {\r\n                    console.error('验证失败');\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        closeDialog(name) { // 关闭当前\r\n            // this.$refs.form.resetFields(); // 重置表单\r\n            if (!name) {\r\n                this.$emit('closeDialog', 'dialogRoleAdd'); // 执行父组件关闭方法\r\n                this.$emit('closeDialog', 'dialogRoleEdit'); // 执行父组件关闭方法\r\n            } else {\r\n                this.$emit('closeDialog', name); // 执行父组件关闭方法\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/System/Role/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"form\",attrs:{\"status-icon\":\"\",\"rules\":_vm.form_rules,\"model\":_vm.form,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"role_name\"}},[_c('el-input',{model:{value:(_vm.form.role_name),callback:function ($$v) {_vm.$set(_vm.form, \"role_name\", $$v)},expression:\"form.role_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色备注\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.form.role_desc),callback:function ($$v) {_vm.$set(_vm.form, \"role_desc\", $$v)},expression:\"form.role_desc\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submit()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.closeDialog()}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-050d1b65\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/System/Role/Add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-050d1b65\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./Add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-050d1b65\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-050d1b65\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/System/Role/Add.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <span>请勾选需要的功能:</span>\r\n        <div class=\"treeBox\">\r\n            <el-tree\r\n                :data=\"treeData\"\r\n                show-checkbox\r\n                :expand-on-click-node=\"false\"\r\n                default-expand-all\r\n                node-key=\"id\"\r\n                ref=\"tree\"\r\n                highlight-current\r\n                @check-change=\"handleCheckChange\"\r\n                :props=\"defaultProps\">\r\n            </el-tree>\r\n        </div>\r\n        <div class=\"m-t text-center\">\r\n            <el-button type=\"primary\" @click=\"submit()\">保存</el-button>\r\n            <el-button @click=\"closeDialog()\">取消</el-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        return {\r\n            treeData: [],\r\n            defaultProps: {\r\n                label: 'text'\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        id: {\r\n            type: Number\r\n        }\r\n    },\r\n    created() {\r\n        this.getDataBase();\r\n\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {\r\n    },\r\n    methods: {\r\n        getDataBase() { // 获取基础数据\r\n            this.$https.get('/api/company_role/list_module?status=1&parent_id=0').then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.treeData = result.data.data;\r\n                    this.getOldData(); // 获取原配置\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        getOldData() { // 获取编辑数据\r\n\r\n            this.$https.get('/api/company_role/list_company_role_app_map?role_id=' + this.id).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    let _data = result.data.data;\r\n                    for(var item of _data) {\r\n                        this.$refs.tree.setChecked(item.app_id, true, false);\r\n                    }\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        submit() { // 提交\r\n            let checkedKeys = this.$refs.tree.getCheckedKeys();\r\n            let _postData = {\r\n                role_id: this.id,\r\n                list_app_id: checkedKeys\r\n            };\r\n            // for(var valItem of checkedKeys) {\r\n            //     let item = {\r\n            //         role_id: this.id,\r\n            //         app_id: valItem\r\n            //     }\r\n            //     _postData.push(item)\r\n            // }\r\n            // _postData.app_id = this.id;\r\n            // _postData.list_role_id = checkedKeys;\r\n\r\n            this.$https.post('/api/company_role/create_company_role_app_map', _postData).then((result) => {\r\n                if (result.data.code == 0) {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        showClose: true,\r\n                        message: '配置成功',\r\n                        duration: 1500,\r\n                        onClose: () => {\r\n                            // 关闭当前dialog，\r\n                            this.closeDialog('dialogRolePower');\r\n                            // 刷新列表\r\n                            this.$emit('parentGetDataList');\r\n                        }\r\n                    })\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        closeDialog(name) { // 关闭当前\r\n            // this.$refs.form.resetFields(); // 重置表单\r\n            if (!name) {\r\n                this.$emit('closeDialog', 'dialogRolePower'); // 执行父组件关闭方法\r\n            } else {\r\n                this.$emit('closeDialog', name); // 执行父组件关闭方法\r\n            }\r\n        },\r\n        handleCheckChange(node, checked, indeterminate) {\r\n            let _halfCheckedKeys = this.$refs.tree.getHalfCheckedKeys();\r\n            if(_halfCheckedKeys.length != 0) {\r\n                this.$refs.tree.setChecked(_halfCheckedKeys[0], true, false);\r\n            }\r\n            if (checked) {\r\n                this.$refs.tree.setChecked(node.parentId, true, false);\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    .treeBox {\r\n        border: 1px dashed #eaeefb;\r\n        padding: 10px 5px;\r\n        max-height: 400px;\r\n        overflow-y: auto;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/System/Role/RolePower.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',[_vm._v(\"请勾选需要的功能:\")]),_vm._v(\" \"),_c('div',{staticClass:\"treeBox\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.treeData,\"show-checkbox\":\"\",\"expand-on-click-node\":false,\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps},on:{\"check-change\":_vm.handleCheckChange}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-t text-center\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submit()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.closeDialog()}}},[_vm._v(\"取消\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-2c423aa0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/System/Role/RolePower.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c423aa0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./RolePower.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./RolePower.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./RolePower.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c423aa0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./RolePower.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2c423aa0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/System/Role/RolePower.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n\r\n        <el-card>\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>角色管理</span>\r\n                <el-button-group style=\"float: right;\">\r\n                    <el-button icon=\"el-icon-refresh\" size=\"small\" plain onclick=\"window.location.reload()\">刷新</el-button>\r\n                    <el-button type=\"primary\" icon=\"el-icon-circle-plus-outline\" size=\"small\" @click=\"dialogRoleAdd = true\">新增</el-button>\r\n                </el-button-group>\r\n            </div>\r\n            \r\n            <el-table :data=\"tableData\" style=\"width: 100%\" v-loading=\"loading\">\r\n                <el-table-column prop=\"role_id\" label=\"ID\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"role_name\" label=\"角色名称\"></el-table-column>\r\n                <el-table-column prop=\"role_desc\" label=\"角色备注\"></el-table-column>\r\n                <el-table-column prop=\"created_time\" label=\"创建时间\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"250\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"primary\"\r\n                            plain\r\n                            v-if=\"scope.row.role_code != 'baserole'\"\r\n                            @click=\"listEdit(scope.row.role_id)\">编辑</el-button>\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"success\"\r\n                            plain\r\n                            @click=\"rolePower(scope.row.role_id)\">权限配置</el-button>\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"danger\"\r\n                            plain\r\n                            v-if=\"scope.row.role_code != 'baserole'\"\r\n                            @click=\"listDel(scope.row.role_id)\">删除</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div class=\"text-center m-t\">\r\n                <el-pagination\r\n                    @size-change=\"pageSizeChange\"\r\n                    @current-change=\"pageIndexChange\"\r\n                    :current-page=\"pageIndex\"\r\n                    :page-sizes=\"[10, 15, 20, 30]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"dataTotal\">\r\n                </el-pagination>\r\n            </div>\r\n        </el-card>\r\n        <el-dialog v-if=\"dialogRoleAdd\" title=\"新增角色\" :visible.sync=\"dialogRoleAdd\" append-to-body width=\"600px\">\r\n            <RoleAdd @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\"></RoleAdd>\r\n        </el-dialog>\r\n\r\n        <el-dialog v-if=\"dialogRoleEdit\" title=\"编辑角色信息\" :visible.sync=\"dialogRoleEdit\" append-to-body width=\"600px\">\r\n            <RoleAdd @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\" :id=\"editId\"></RoleAdd>\r\n        </el-dialog>\r\n\r\n        <el-dialog v-if=\"dialogRolePower\" title=\"角色权限配置\" :visible.sync=\"dialogRolePower\" append-to-body width=\"540px\">\r\n            <RolePower @closeDialog=\"closeDialog\" @parentGetDataList=\"getDataList\" :id=\"editId\"></RolePower>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport RoleAdd from './Add'\r\nimport RolePower from './RolePower'\r\nexport default {\r\n    components: {\r\n        RoleAdd,\r\n        RolePower\r\n    },\r\n    data () {\r\n        return {\r\n            loading: false,\r\n            editId: null,\r\n            tableData: [],\r\n            dialogRoleAdd: false, // 新增弹层\r\n            dialogRoleEdit: false, // 新增弹层\r\n            dialogRolePower: false, // 新增弹层\r\n            pageIndex: 1, // 当前页码\r\n            pageSize: 10, // 页码大小\r\n            dataTotal: 0 // 数据总数\r\n        }\r\n    },\r\n    created() {\r\n        this.getDataList();\r\n    },\r\n    watch: {\r\n    },\r\n    methods: {\r\n        // 获取字典值分页\r\n        getDataList() {\r\n            this.loading = true;\r\n            this.$https.get('/api/company_role/page', {\r\n                params: {\r\n                    currentPage: this.pageIndex,\r\n                    pageSize: this.pageSize\r\n                }\r\n            }).then((result) => {\r\n                this.loading = false;\r\n                if (result.data.code == 0) {\r\n                    this.tableData = result.data.data.Items;\r\n                    this.dataTotal = result.data.data.Total;\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        showClose: true,\r\n                        message: result.data.message\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        closeDialog(name) {\r\n            this[name] = false;\r\n        },\r\n        listEdit(id) { // 修改\r\n            this.editId = Number(id);\r\n            this.dialogRoleEdit = true;\r\n        },\r\n        rolePower(id) { // 权限配置\r\n            this.editId = Number(id);\r\n            this.dialogRolePower = true;\r\n        },\r\n        listDel(id) { // 删除\r\n\r\n            this.$confirm('您确定要将删除该角色吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$https.get('/api/company_role/delete?role_id=' + id).then((result) => {\r\n                    if (result.data.code == 0) {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            showClose: true,\r\n                            message: '删除成功',\r\n                            duration: 1500,\r\n                            onClose: () => {\r\n                                this.getDataList();\r\n                            }\r\n                        })\r\n                    } else {\r\n                        this.$message({\r\n                            type: 'error',\r\n                            showClose: true,\r\n                            message: result.data.message\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }).catch(() => {\r\n            });\r\n        },\r\n        pageSizeChange(val) { // 分页：pageSize改变时\r\n            this.pageSize = val;\r\n            this.getDataList();\r\n        },\r\n        pageIndexChange(val) { // 分页：当前页码改变时\r\n            this.pageIndex = val;\r\n            this.getDataList();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .dicMain {\r\n        padding: 0px 0px 20px 20px;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/System/Role/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"角色管理\")]),_vm._v(\" \"),_c('el-button-group',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\",\"size\":\"small\",\"plain\":\"\",\"onclick\":\"window.location.reload()\"}},[_vm._v(\"刷新\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\",\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogRoleAdd = true}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"role_id\",\"label\":\"ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"role_desc\",\"label\":\"角色备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"created_time\",\"label\":\"创建时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.role_code != 'baserole')?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.listEdit(scope.row.role_id)}}},[_vm._v(\"编辑\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){_vm.rolePower(scope.row.role_id)}}},[_vm._v(\"权限配置\")]),_vm._v(\" \"),(scope.row.role_code != 'baserole')?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.listDel(scope.row.role_id)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"text-center m-t\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageIndex,\"page-sizes\":[10, 15, 20, 30],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.dataTotal},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageIndexChange}})],1)],1),_vm._v(\" \"),(_vm.dialogRoleAdd)?_c('el-dialog',{attrs:{\"title\":\"新增角色\",\"visible\":_vm.dialogRoleAdd,\"append-to-body\":\"\",\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogRoleAdd=$event}}},[_c('RoleAdd',{on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e(),_vm._v(\" \"),(_vm.dialogRoleEdit)?_c('el-dialog',{attrs:{\"title\":\"编辑角色信息\",\"visible\":_vm.dialogRoleEdit,\"append-to-body\":\"\",\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogRoleEdit=$event}}},[_c('RoleAdd',{attrs:{\"id\":_vm.editId},on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e(),_vm._v(\" \"),(_vm.dialogRolePower)?_c('el-dialog',{attrs:{\"title\":\"角色权限配置\",\"visible\":_vm.dialogRolePower,\"append-to-body\":\"\",\"width\":\"540px\"},on:{\"update:visible\":function($event){_vm.dialogRolePower=$event}}},[_c('RolePower',{attrs:{\"id\":_vm.editId},on:{\"closeDialog\":_vm.closeDialog,\"parentGetDataList\":_vm.getDataList}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-8d2a79d0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/System/Role/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8d2a79d0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8d2a79d0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.13.7.1@vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8d2a79d0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/System/Role/List.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}